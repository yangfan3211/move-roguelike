(this["webpackJsonpreact-roguelike"]=this["webpackJsonpreact-roguelike"]||[]).push([[0],{178:function(e,t,n){},187:function(e,t){},193:function(e,t){},195:function(e,t){},205:function(e,t){},207:function(e,t){},234:function(e,t){},235:function(e,t){},240:function(e,t){},242:function(e,t){},249:function(e,t){},268:function(e,t){},323:function(e,t,n){},324:function(e,t,n){},329:function(e,t,n){"use strict";n.r(t);var i=n(1),r=n.n(i),a=n(166),o=n.n(a),c=n(2),s=n(4),u=(n(178),n(74)),d=n(14),l=n(5),p=n(174),h=n(22),f=n.p+"static/media/crystal-cave-song.c6cc657d.mp3",g=n.p+"static/media/no-hope.11d9baff.mp3",b=1e3,A=29,j=20,m=60,x=38,v="3d5+3",y=function(e,t,n){return[[e[0],Math.max(0,e[1]-1)],[e[0],Math.min(n-1,e[1]+1)],[Math.max(0,e[0]-1),e[1]],[Math.min(e[0]+1,t-1),e[1]]]},O=function(e,t){for(var n=e[0].length,i=e.length,r=e.map((function(e){return e.map((function(e){return"#"===e?"#":""}))})),a=[t],o=0,c=function(){var t=[];a.forEach((function(a){r[a[1]][a[0]]=String(o),y(a,n,i).forEach((function(n){"#"!==e[n[1]][n[0]]&&""===r[n[1]][n[0]]&&(t.map((function(e){return JSON.stringify(e)})).includes(JSON.stringify(n))||t.push(n))}))})),o++,a=[].concat(t)};0!==a.length;)c();return r},w=function(e){e.interactionText="",e.hitsLastRound=[],e.deathPositionsThisRound=[],e.sounds=[],e.playerPreviousPosition=e.playerPosition},C=n(12),E=n(51),P="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACQCAYAAADA6GNQAAAdbUlEQVR42u1dC+wlVX2eNqbF1AqIggXW3a6wymNXsLAImGVZQsoj67pbsGxBCtKUh1oeW6hsQ3sh4gNZExesrRaXgBWkacAAUvABGEnYSjeGhtJCcSkhsmCigqRJWdPT/c7e7/DNmfOauXPv//+He5Nf5syZ85sz93zf73HOzJ1bVemPGYrut/mYDjpT/f70R+v4icF6Kx0uxLbf9tBNVrrq337OIVZmqv8/WP8Ds/dBJ81F/dHAJ/B3ve+9Tq45eFHpRbiBf/GpzVY8ILL6j16z1gJ/7apFVjwijLN/22bZB84zn7zxMTv4BAF1hUDk9Mfd/+jgK+gcxEISOMujnoJQ8AVq4D99x5VWSAIcKxnETP/ZMcCgY8DvvmKtFZRRN0f0u4OPwQbQ7JiDx30cQ5vIhTjAYvo8nvgiztrRjvookxQ5AqGt7wFYl+ubg49rRftXXvqp00NdgTsu1R9X/6OTACCj08u+eZizHJRxESUegBcf0sexUv1rT9nX6aPcVn/U/quBedVz7CjPEf3RCQCQ0dmKc+Y5S0IZnRfmAVH9UhcI/RMW7+7CAcpt9dk/y2314XapT3c8AX2zZMmSqD6OTYQAHHB16agrJUBMvyR/oD6B17K2GUP/M61vHnjgATMYDMw+v3twQx91OIY2Yw0BYB1JoIK6gkTKtjn3zD0b+qjL6LsBQFsmfpwJoK5gAEbp3+nTA6kwjxi3/unr/s5a/NcP3ts8s/Z4uz13n91sHY5NJBHEYEGuunRfK9zPJFFOnzocDJ6rjT6zfpKgrf4o/dP6qK9149aHpUMA9g03rDIXXHC4LbN+7NZPd6XAo0y3lmBxbarXVV/7p/XPRP8sE7hJ6DPW77LLLhZs7ENQRh2nhOMiQc11LV++3LpbCMrqymJfALLmpLfYAadLb6M/1/vvUx+A0wOgXKA/OgHIWHS06awFdvoFQZkMjmSzRvVRbqk/6/pnPsK8Y9L66vZRLtDv7x4A2cYB5H4kA3e5AsvU/chRe1jhOUoyePbfQn8s/asLR3mS+nT/JADLk7wn4JhYMAe3bhcibdroz/X+e9Nn5o+2nA5y+oc6zgomAr4u6RasQjUGv6X+XO+/V32GDQ0hJMGM3BYuvQsWi83V9DMnP+b+L33B3HbZhW6bskC0gaglhupaEGr6mWnwCwGz5CBRrlxzslHysD5DqFQ/c4k0se809wigQGU8gD0G4NeuXeviFslAEiyZt49rFxgY8+erlpp7rv4Tc9u6VTXAWYfjBTnATBPIbLr9TtvPcatPceU56wVUEiRogE9BPQTgB8JB7Rz/t3FjjQQoY4t9lHE8RYAOBDLjIsBFn/qc3f5o/erXRF5kwQTAKQB98CnQo5fIzYEBFmTz1z5nhfuQKvyAqulIID1n1RNADnhsAf5TX21k7uaRxx63MltJ0IhhPpgENEeAZcuWNUiQIwAAM7/c5sDXMo6jzPOIpXchUCykmJtvvtmsW7euDUBGwX/55ZdtmXLYMcc2xhTtZmN4qCVsvkvnfowA37nleisE/4VtXyzRa7hxWi0tWd036k44dGEI/BqBBssrRyCWSwhE8LFtQwAFnHL6xy828xe9yxIAWyUJyjg+KwkA0UQO+woiwI25TiWBegHkAThXCQkIuhe3nStHPUgQI4C298FmXYxAAesv8lwAGIs12AJYCvaRDLKe4QEyW3OBmttXQhB8SCQXsMkeSaAhgATA8QwJHOjYAmiCzvieiN2OBGjzqzuvryWFSqBQPgEAAT63JAQlQ4Ya6LR8CAig4KOMulkJvlqwhgG1fA0T/roBCRICn1PBhAex5wHoFD+RQ12OAAT7ilOPdGBnCGRBJ9AnnniiCwO8natESJDB0BvQ8un+NTQwFMxKAgBodeFe0pdyi85bAHA/9nMNoIQAmsRB/HAQcd/BMKDTQ80jQrF/8eLFFmwQQMFXYT2227dvD3pBWj7BpwfwLH/2kkCFoJbcB2A7H3wSoAD8Sl0/r4GegMdyC0IxAuWSPwU/JvAM9A4RAricQMfRBx/l2RoGorOCQvLU1g00b6Dk7imEFmw0GSwhkCaTEf3oaiHDAElB0P26GPiM8zoeCj4fah33073jWBfodAOJy8FcCUx4lYa71qlhxvKrwAJPyuqT51BX7+9HpohGwVfAA+7/tX0TqaW01W3Tf9XxpkytT7F2J/AGvk7AsoN11fQzJwk9/czQAM4kAOa6Ly81f3bJnlMSdB3AH3z6bVa63lw55R+us9JVv2P4qIFPCUyDs5+TD93NQF4r8bw1+DdduLuTtskkgD/0isuctNXX+Xvh83QWdGwJ+ofP+k0nJAHblID/tY8tNHOJBDXAP//UXua8m3Z3UkAIdwyA4yaML6X6AHy/0091+yjrfk6foPsPVub0CTS27z7g12plPZYiAAEH+LgdvOjtb3REmPUEAOinXv1mC/ii9/+GLUNQRh3KaBMbQBIlALarEzJF9Qk2+9e6En1avFo/tyl9JYExlQUegrIHvklZPcHHMwFKgDlBAhIAXxrAQ1AmAXILMQTa1/eIEfVABDqkL14g3v8QaOiQAK7/wlAAoH/xz7s60FHOWb4SAM8EXHPGO8xfrtnbEYIyZ0hAIhD4AvBH0a95jVH7x2/xCDjL3Jbo0+WroC5l+QQfFg8CoKwE+M+vnGBlLpCg5v41DFSFL3jI6AcXgSRRLNGP9s9YL4SplXPnYPZP909BXSgBBJhw976lqxB4CrzDbCWBS/7ofimoS8V/WLBm/b6+Ho+EAkcCuHpfH3VectjI+mHxjz/+eLR/eIHMSyac2yfgOiMIrQkASFg9QIUQ4MvPXWnWrjwySoLZ6gmcyyXgJATrchY4f/58Bzb1CDqOlWTxaMfMn4I60Y/2DwIQZHoPkiPXPwCnu2eZwDMs+F4A4CPZA+AQgv/cf/+HuXPTJ2ukUOAZLmblLAAWw7I/K0h5AQwwAFCL5xQQdTiWANERDG1h7VwLwBZ1GRLU+x+SgODz+lP66vr93/drKPD1ASSsHaCTCCQA8gBNCFGmx5h1BFDX7w+AhoIUgGgf00c5pc9YHQoZbfv/6JFvNf9y017mMx/b1ZZL9DXh89cQNDEM6S99zzst4CqoA/AQTgcJ/GwDv/Ln3dhyALQukY3XEjYbCob6KGtil3Ljmgcw5mNboB/sH+Rr0z9nARoCUJZZQBQ4AK6iYNPqSYZZvxoIV0+rEbdfPBPQaV3BKmBwNuDPLCbQf80b0O2XrAHoByGA7l/BDtXN6sUgzQHargN01HdgYUt9lkv7h8uH9WOr5Tbg672AkiVg/SAfgPhAh+qmn+nnNf2Zy88DTD+jAnf5N95nper4hwkj6E8/fSaEbcEjcJDVFy9yUhqDR9SffvoAnU/nes/iFyVyCw/ZrQYcBHWlBBhRf/rpCj5AP+e4JeaI/fe2grK/n/tpFq0WgKkUWvGo+tPPqCQg4CgTeJZxLAW+AufrK5Cpc6DNgrftattgq+WpF5gAAeDuAfR37j3OAYgy6gp+nDGyPkHH8iv1UVYyTGEaMwleePoR5+4ZBlBXGsNnWH/6GTUPgKXC8jQn4M+2SmO4r486mdKNS3/66SsEkAQEv9SFMw8giASvIP73oT/99DULUPdLMmRmAfZYKHPXupS+3zakPyXBmK2fyZZ/P5/1CS/Qqz7A5mIQZwYZ/emnjykgBAONLe/na11iKljTh6VSH+Uu+mr1BfrTT18rgRhsuGpaHctV4f14WrBa84T0p5++PAETPy2XTuP60mcO0FJ/+pl6sdc9UYy3LVYIDWTqMe5Z98WvPvO9Vl7vJFi6dGk5+IEfSpg7Pr/KPLXlTiso+8dRX4Vf85KzRjNu8N89b8byBTNCGzNiP8ncioQYbmttzfnnn197AcK6M37PLr2qoE7b+DqhuoA1apuSN3W3eeePuX/DqdrfpD1BlxdRpL53CuBGe7H40Hsdq1TZgkJgALRavnoCkkDbs3PsYwuBBWLwzzpuPyu0Sh5n29CXkHqzYMECK/qloPvCdw8P6oMAfl1LEpiW5VcXsVavNpnYayJtY/rRV+MH9EfOgezArly2sAa8LziGNp6lVwoWBGBDAL5utU3IClD/vevf6toCaAjPiWMAPqLfGCjPI+QGpxiA0LVjTAhMCmBsPS/ojCKg78TXD7lyzxtEPU0oPzCM+xBYOoBWQR2PhwaEXgFCD6DgQ7RN7BwEW4FHWQkUCSM1wFmmF6I3CHiJBoDeADuAAgBW2h7HdKv6/jH9DiPq+4lf6zzEJoEEGdv5R33IyntOu8oK97WNvnKFVul7AQ6+b/0Q72KtdQfADbp/egrVJ8nU+2j/voQAJDk5yCoEXtv6AKruvUv2drosq/X6JFJ91dVzRKy/4U1K8xC2dcoEH2W8FeOYy/7JCsqoIwlCiYYOIPaPOmBPN9goq5eIMLXm3v1Xu2iYCQ0ALJtWjz5RBvhaRw8gXqABIIH64bKj3OCjrJaXIkAf+mhvJCdCmecL6WeAN4WJ5c4TweIJPD2A7qdiIMH7ty2bncul+2WdZ+VOH5YNq1YCQQfAUZceIDTbCHkADQH+cZ0txFwv9jUe+664L30/BJToR8JoEFiPHEGi1Ny+AqZlDQeRaYgVuCvfNWmdb8Fe0lIji08qtAUJQtm+nwMQbFq83yaQVZtEwhdMynygIu659j09YGvXwDah8Vf9xPpKaYJYxdYCUowKzvdDU7LCeath/Nfz5QgUGmgFVpM+lhOJYAi07BKrn6SNQd8k3HgyjKam2aFjsVempNxGIwlsu5KVGbQsgXzSqEtPLGXHFoi6vom0D/2SpfbiRTMFOESyUPgITilK1g263HTocUnY+AtAiWlecJrY4yrhqAToo99g2OGMYuhBQ2GtGvVdvLPiBlDB8u9MLhPP5P2ISd6PmRW3gE2h1U2fLSgc1JkarM79b7/RubtaObQ/jv7vf+k5o9tY3QTDZPuBX3P2Leagxdeadyz4iC1XHX/i3bX/nxyyl7nuLZU577d3lkvOR3CHWysxAiSIYPWOvPQq86YTduQJS1fYcpvvMwTZtffBLySBue/JZ1qP4a++d7bzcsOykbp8pwR8060/cgS45K/us3UoF1yQI1ChO67VEXDzmU84AphVR9g6lFPnVOBJGn55Ao59ade8piHgf/3thx0BPrRx004S7Cin+lfgSRrUPfPKyyECJAkI8J998ZdWSkgghHbEN2Zghfo5Ijjwtzy6rUGAQhLUCJRr52exDvzv39sgQCEJagSq7Eujdw4CvjyF7RpZ9BD8W599sUGAHAkcqEIg7AN8SAP88HnM7//tNyzoIADK+3/wNCs5Eqi163e+bu2vW+FYZAkA4EIEwD62CQI0CBSJobZNwEPsBHsHcEECoH7HNkGABoG0f7UGtJGwUiMAgAsRAPvYJrxAg0Dav5DAtpGwUrN8gk/gUeZ+gUd135PA634oJAYtF+LnACRAwgs0CBRaz+a5PALULBfi5wAkQMILNAgU6p/n8ghQs1yInwOQAAkv0CBQqH+eyyOAtXYFG0TQOnqGGPnU5QNstPW9AfVDocABrQApAQh+hABB/cp7ykePeedwQCtANQIMwY8QIKjv96/HvHM4oBUgJQDBjxAgqO/3XzsWOAddvgN7+cCWISiTFDES0OUT7MGwDjIYepdY/mMBCWT8NSFwMQKk9H3vEiJAIOOvCYGLESCl73uXEAECGX9NHHARAqT0fe8SIwA9gFq/eoFU/kOLJwlo/eoFoncDBZCaNQesPkqAmH6oLkQA6qs1B6w+SoCYfqguSAACJtYcsPo4ASL6wbr6ORqAgwQAjR5As/lcCCAJ8AgfPUDkKe76gofvxlVCRPBX1mL66hVC4IeAo7Wq1fpE8M8R01evEAQ/ABytVa22QQT/HBF99QrJHEKIoDMASQCzSSAtX2cATACj8Z+3SgkUEzkKgdQ21PGze1/f1wuEEHcuAuUSOcoQSG0T6j+o7+kFQog7F4FiIkchkNom1H9I39eLhBB3Ds38dTZAQuRIoJm/zgZ0/SNIAo3T1fCRMALPR8J8a/bPwWPUTeiZ2OofAYMuged5fGv2F4B4jLoJPRNb/SNg0CXwPI9vzf4aAI9RN6GXBFHDAReDciRgCPDXApQI9ArJPMB31xn3Hc0jWug1MnklRMZ91wig4SGmh7aRuXAjifPm61H3PVzpq4WHmB7XAyLLwbU5fygvCCWDBJzrAATZJwK9gz8T2PmO/OGTsiSBxnOt07YhN5pKICM/2aodIwk0nmtdrv9UAlnSvyOBxHOty/WfSiATP1lzy79q5aHZQGQm4MBXV4+tT4LQTKD26FSJ8IHLxBM5pXrT/sXtC7hGcwIeS60BEGzvJpir12XwPu7clfy+rU0/r/f+S66t9M8yermt3cezAGaE83TRK3oesOM19PVcw6TGb7QL9n8ZXLX/caX5ryd/4gQPkG7YsKHViyI79O/ahvpt+z2OPfZYM2/ePLsdhbwtz9PH+I0OPn8fyJ+FB94PENTFxXK7cuVKK7hwLefc2Cj9o12ob2wLz1EDn9KCBOaeux+xsmXLFiskQsF5+hi/0QnAwf/WvDfZ5UNsS+IPLhpf/O+/fJ9t+65932x1ceHYYr+EAB37d/qwFvaN/th3qT6AquSHsiQO60vBr7wf3GbO09f49UcCvg8gtYaccn3+OdpYYMf+nT4tHoPXot8aAXwCZgjQAL/Defoav9EJwPcEUEqBO+bgPWs/NOWXsGDUf1SaTOD8/kW3iHwAPnL9Je89Sg1+kgBq+R3OEx2/SSeCjeyzAIDaF4C78t8vwHNE3JjTFQupxc821pe4ftuG7UPXgb5CBExZbqj/LucJjR/D2vPPP5/60+t+k0C1WrKwIIs2F5xyuPsCoXPQOgMkcF9eEzAOWCaBqgGqSZOK9JkiQBUiYY6AgzNXJglYeh5//Aj+mcsX2p/JYztuElh35b8hhHUFixim8Bwm9OU5ABwsCokRAwwDT130ceCBB9amT9jXvtFWwGrMANr2TxL4oi5dp4WJRST3HRT8Oz6x873L2I6TBNbKAZZ6AVo/62ODoC+W6noOHXjVVSBSgwdgSTiATvDVnSrJQvcEdN7ubwtX8pyAABAlQ+Q8jVfyKfgE3d/vmwQ1AGmxtGQvIQlm7jrdCbnh3Dl4jIOOvnXwMwmpS7wAui+oF/CrXP8KfGH/jfOoKAkC52mMH2I+/7mcL93WfRzvnQD6JjBaMC23YCpS+8IhN5w5R22u7Isez11/h74b/fseoKD/5Hl8EuTCgFr89zecZkHHdqweQKdgtHrdz7lAP4uNueHcPJigo/+A+ze56+/Qd6P/EAFa3vBpTQAdv5nIAYKhIOO2s7MAut+CczRmApwFtFyP79J3X0vByfPkCDgrZgF+5u7P40sAHOUcHATVbXMzJRT/KSX6Cppf7kqiwvMEx68avimNMpF7ARov/f0SAvR1Dt2WEsCP/S3vpvlZem761ud5ouM3Y7eFq/6eCZiJ/vsYsLmu373j/31lu5Mntv28UwykfhfdT//4A+bRl7dYuWHbF1vfEBrhfr4b+DNOfmftRZVt9Xlns6s++u5wM6xf8DsSYBT9GvgdCDBqEmeB3zoEAOHDI0JRGOUaCgDcWj6FrAg8+kTfhcvw/RNgxTmX1rYtQLRtRiCRBf2kj+7vCIAySFESw0M3k6qy+/nuHHaxZcf26TuuNHdfsdYRoVQfwA9kSZyEKF1H4GIP+oZOhyezOscbR4D9jzi2ti0AsDd9gP7Hnz3EgY9yoRcYlQB28AH8toduMq+89FO7JREKSLDT6v99YJ5/9h9tGdtHN/9h7l6K00c/EF5DiwR6dKvnYBEwf1slXuw4qj7Apj7KaJ8IA8nFHGPe4L0c4g3FizgceFjwi09ttkJvAMkRgGBb/Z9ttvunnT3fkgLlnP5AbgZBH+APypeh+4n5FLh/hgBN6LzEbmR9BVoFbl9DAUmSCAe9hACAvmLHFkRgGVZZqg+rXzHcAvQVQ2K00ecWlr+iGwGKZ1HW2iAKFly3isZytBOLHlkfgMLC6fZp8diHKAlYnwgJbe/nN/RPWLy7eeiuDc7qAT7qSgFEWwCu0laffUN3MKxrkYNZncHwkbScvgVEwSRQKn4y57t0nqODvoJpywQaAvB9AiS8QJf7+TX99Z86yLpsDBgGbutw8OAJUJ8LP6qvAiBE3+T6x/8tUxdlTz96/cxZINDBdiChrUr8MqjmERTESCYfe+FyUD9EmkhMb5AgkAeEPEDjfr5/W7fAHdrBgsUTiK1SBxLEvA4Gm6SB1UJfLZBeAIJ8IHVDDG3xan56EpQlhJhcDqNJpHqxghwmHtPbzgL8hSDxMkXTQF8igDeWsKvIQx16kyg2+FuHA4iBJwEGUpcggdUlSL7+VnHBzAtC5yCJIAR9MPyfBtYnQLSAM1yxTOB5/SkvEPQAXRZy1M13IQAXgr7982+VLAQ17huEbsKE2oWSP3W7mPZB1B2nAFAjoNuGoFwVvB5eSQQdAK/6zAli+gS64/XHSdCWAH5OkJm6Bc/hh4G2BEg90BEjgCZ8+iQOyhy8QeF0En+xA11sA/+wks3cI/rJcaDFx66fx4sIwEydWXsbC/ZnF11IxJkBBOXMSqAJ5QGBpeCidQS6UBJiaz2LLhoD/v0OLLYFAUbVr10/AUe55fW/SgKdIbQgQRXQaa3vAV+yHNzb/Xx1p4MON3MYt/nHW5PWpyeg5XddRCr9396cVXa9Rdu2f5NZByi67q0SDphEtVkIgtVuHVoxyoWrgEF99A390thN8Ee4/umn4JXy089rFXRrQmbQ58MofTwQM/1MkgAY9AfPON5J1XwlXXY1UaUDiOZP13/VyUyRYKatYKL6+k8bAP1nn73EiZIgQwC3HHzrPe930pIEFvTrbvmhk0mTYOe/VT630Xz3iT+ycs1dh7VO3MzDDxtz221Wtl94YWv9f33cmLse/B8r13yp9WtqzC8e+7p58oEvWPnm35yb/acR+TMFCzhe8hgiQOJfNyzQxx8x326hHyCAKSUA9GeCABZ4yEUbDzCHnfh2Cz7LJQsgFvgd8uM1a8ymPfaw4LNcog/gIR9ff7tZcvRFFnyWS/QBPOT6y08ypx71WxZ8lmP6fJceX60G0PkMAcC/8ej9aq9ci4HPpWaUqc8lYZZLvgNApz7AP37tFZN5MwiBh9UvPGQ3KyAAy6svXpScghF4WP3VeHceBm0HAVh+8PD0b/MIPKz+dxadbgUEYPmDH96Y1CfwsPqjF1VWQACW/+KMxQ390Lv1aPUEXwkgRIkSAIAz/qNcQIDaIhWtnuBPjAB097R4Y6paORMKnLunxUNHy5lQ4Nw9LR46Ws6EAufuafHQ0XIkFJgtd5+uL1G2BCDo+kQOCeD9EZXTZ+xX0Aue6HH6SgCC7umPnwAQgo44hH2WSwgAIej2pc079lkuIQCEoEMH+yyXEABC0KGDfZZzBOD0jz/VltjfeBW7vplTALQ5APW92B+9bp8A1JfYP/4HQgk8BEBDADzrtBxaoSPwEAANAfCs03JIn8BDADQEwLNOyyF9Ag8B0BAAzzot+y6X1k4C8GfarMdWyaD/QoZ970ENp896hoQIkL6Ld/qsx9YjQ7/gK+gMAYj3SgjsgySs1wtW0BkCEO+VENgHSViv+go6QwDivRIC+yAJ61VfQWcIQLxXQmAfJGG9b3Fw+74FE3TmAZwVKAmoD9dPgHwPwJDAWUEVeDkE3L7fP0FnHsBZQTWOn4UzyVMLJ/BM/rhfhf6SfZjkqYUTeCZ/3A/pM8lTCyfwTP64H9JnkqcWTuCZ/HE/5EFgcQAXAKgH8MOAHxJUH+CqfsDyo28nQXsb+0U/YPljDQm+ZYeWI5OxzLPs1vqeZbfW9yy7jb61OAKuVsg6XRzSqaHqE3DV1xmBrgv4YQNtCbjqs04Xh8Y5NTSvR326clq9WiHrQhKyYgDr6zME+BLSt+7e02cI8GV6n6DHj64HkAT64iaKPlcYWBRyMb9EPxaOSYIO+tNPn0RISeaPmEvOUY1Rv/jz/6F9UI4KEsNQAAAAAElFTkSuQmCC",k={goblin:{type:"goblin",maxHp:25,spritePosition:[0,2],imageSrc:P,baseAttack:"1d8+5",baseAC:8,aggroRange:6,spawnNumber:2,traits:[]},rat:{type:"rat",maxHp:10,spritePosition:[0,1],imageSrc:P,baseAttack:"2d4",baseAC:10,aggroRange:10,spawnNumber:5,traits:["keenSmell"]}},B=function(e){var t=e.center,n=e.position,i=e.radius,r=t[0]-n[0],a=t[1]-n[1];return r*r+a*a<=i*i},M=function(e,t,n){return e+n*(t-e)},S=function(e,t,n){return[M(e[0],t[0],n),M(e[1],t[1],n)]},R=function(e,t){for(var n,i=[],r=function(e,t){var n=t[0]-e[0],i=t[1]-e[1];return Math.max(Math.abs(n),Math.abs(i))}(e,t),a=0;a<=r;a++){var o=0===r?0:a/r;i.push((n=S(e,t,o),[Math.round(n[0]),Math.round(n[1])]))}return i},T=function(e){var t=e.currentMap[0].length,n=e.currentMap.length;Object.entries(e.creatures).forEach((function(i){var r=Object(c.a)(i,2)[1],a=y(r.position,t,n),o=k[r.type];a.map((function(e){return JSON.stringify(e)})).includes(JSON.stringify(e.playerPreviousPosition))?function(e,t){console.log("hit create");var n=new E.DiceRoll("d20");if(n.total<13)e.eventLogs.push("The ".concat(t.type," misses you."));else{var i=20===n.total,r=i?"".concat(t.baseAttack,"*2"):t.baseAttack,a=new E.DiceRoll(r).total;e.hitsLastRound.push({creatureId:"player",damage:a}),e.hp=Math.max(e.hp-a,0),e.waitStreak=0,e.eventLogs.push("".concat(i?"[CRIT] ":"","The ").concat(t.type," hits you for ").concat(a," damage!")),e.sounds.push("".concat(t.type,"Attack")),0===e.hp&&(e.eventLogs.push("You died."),e.deathText="Killed by a ".concat(t.type," on depth ").concat(e.depth,"."),e.gameStatus="gameover")}}(e,o):function(e,t,n,i){if(B({center:e.playerPosition,position:t.position,radius:n.aggroRange})){if((n.traits.includes("keenSmell")||0===R(t.position,e.playerPosition).filter((function(t){return"#"===e.currentMap[t[1]][t[0]].tile})).length)&&(t.status="hostile"),"idle"!==t.status){var r=i.sort((function(){return Math.random()-.5})).filter((function(t){return!e.currentMap[t[1]][t[0]].creature})),a=r.map((function(t){return"#"===e.dijkstraMap[t[1]][t[0]]?1/0:Number(e.dijkstraMap[t[1]][t[0]])})),o=Math.min.apply(Math,Object(C.a)(a));if(0!==o&&o!==1/0){var c=r[a.findIndex((function(e){return e===o}))],s=Number(e.dijkstraMap[t.position[1]][t.position[0]]);a.filter((function(e){return e===1/0})).length>=2&&o>s||e.deathPositionsThisRound.map(String).includes(String(c))||(e.currentMap[c[1]][c[0]].creature={id:t.id,type:t.type},delete e.currentMap[t.position[1]][t.position[0]].creature,t.position=c,t.walkingDistanceToPlayer=o)}}}else t.status="idle"}(e,r,o,a)}))},D=function(e,t,n){var i=n||Math.random;return e=Math.ceil(e),t=Math.floor(t),Math.floor(i()*(t-e+1)+e)},I={duration:10},Q=n(21),L="rgb(0,0,0,1)",H="#5C606A",F=[{type:" ",name:"void",nameInSentence:"the void",clearBackgroundColor:"rgb(0,0,0,1)",dimBackgroundColor:"rgb(0,0,0,1)",clearFontColor:H,dimFontColor:"#555564",canWalkThrough:!0,flammability:0},{type:"#",name:"wall",nameInSentence:"a wall",clearBackgroundColor:"#BEB5C4",dimBackgroundColor:"#6E6E6E",clearFontColor:"black",dimFontColor:"black",canWalkThrough:!1,flammability:0},{type:".",name:"ground",nameInSentence:"the ground",clearBackgroundColor:"#131226",dimBackgroundColor:"#020211",clearFontColor:H,dimFontColor:"#555564",canWalkThrough:!0,flammability:0},{type:"@",name:"spawn",nameInSentence:"where you come from",clearBackgroundColor:"#131226",dimBackgroundColor:"#020211",clearFontColor:H,dimFontColor:"#555564",canWalkThrough:!0,flammability:0},{type:"+",name:"woodenDoor",nameInSentence:"a wooden door",clearBackgroundColor:"#732e1d",dimBackgroundColor:"#511E12",clearFontColor:"#EB833D",dimFontColor:"#EB833D",canWalkThrough:!0,flammability:.12},{type:'"',name:"grass",nameInSentence:"some grass",clearBackgroundColor:"#131226",dimBackgroundColor:"#020211",clearFontColor:"#548419",dimFontColor:"#245702",canWalkThrough:!0,flammability:.55},{type:"'",name:"ashes",nameInSentence:"a pile of ashes",clearBackgroundColor:"#131226",dimBackgroundColor:"#020211",clearFontColor:"grey",dimFontColor:"#808080",canWalkThrough:!0,flammability:0},{type:">",name:"downwardStaircase",nameInSentence:"a downward staircase",clearBackgroundColor:"#131226",dimBackgroundColor:"#020211",clearFontColor:"#D0CC00",dimFontColor:"#D0CC00",canWalkThrough:!0,flammability:0}],Y=function(e){return F.find((function(t){return t.type===e}))},U=function(e){for(var t=e.position,n=e.radius,i=e.mapWidth,r=e.mapHeight,a=[],o=Math.floor(t[1]-n),c=Math.ceil(t[1]+n),s=Math.floor(t[0]-n),u=Math.ceil(t[0]+n),d=o;d<=c;d++)for(var l=s;l<=u;l++)B({center:t,position:[l,d],radius:n})&&l>=0&&d>=0&&l<i&&d<r&&a.push([l,d]);return a},G=function(e){e.round++,function(e){if(e.playerConditions.burning)if(1===e.playerConditions.burning.activeRounds)e.eventLogs.push("You are no longer on fire"),delete e.playerConditions.burning;else{var t=D(Math.min(0,4),11),n=Math.ceil(e.maxHp*(t/100));e.hp=Math.max(e.hp-n,0),e.eventLogs.push("You suffer ".concat(n," points of fire damage.")),0===e.hp&&(e.eventLogs.push("You burnt to death..."),e.deathText="Burnt to death on depth ".concat(e.depth,"."),e.gameStatus="gameover"),e.playerConditions.burning.activeRounds--}}(e),e.currentMap=function(e){var t=[],n=e.map((function(e){return e.slice()})),i=n.length,r=n[0].length;return n.forEach((function(e,a){e.forEach((function(e,o){e.burningRounds>0&&!t.some((function(e){return e[0]===o&&e[1]===a}))&&U({position:[o,a],radius:1,mapWidth:r,mapHeight:i}).forEach((function(e){if(JSON.stringify(e)!==JSON.stringify([o,a])&&0===n[e[1]][e[0]].burningRounds){var i=Y(n[e[1]][e[0]].tile);i&&i.flammability>0&&Math.random()<i.flammability&&(t.push(e),n[e[1]][e[0]].burningRounds=31)}}))}))})),n.forEach((function(e,t){e.forEach((function(e,i){if(e.burningRounds>0){var r=e.burningRounds-1,a=0===r?"'":e.tile;n[t][i]=Object(Q.a)(Object(Q.a)({},e),{},{burningRounds:r,tile:a})}}))})),n}(e.currentMap),function(e){e.currentMap[e.playerPosition[1]][e.playerPosition[0]].burningRounds>0&&(e.playerConditions.burning||e.eventLogs.push("You start burning!"),e.playerConditions.burning={activeRounds:I.duration})}(e),function(e){for(var t=0,n=Object.entries(e.creatures);t<n.length;t++){var i=Object(c.a)(n[t],2),r=i[0],a=i[1];a.hp<=0&&(e.eventLogs.push("The ".concat(a.type," dies!")),e.deathPositionsThisRound.push(a.position),delete e.creatures[r],delete e.currentMap[a.position[1]][a.position[0]].creature,e.sounds.push("".concat(a.type,"Death")))}}(e),T(e),function(e){e.hp<e.maxHp?(1===e.waitStreak&&e.eventLogs.push("You catch your breath."),2===e.waitStreak&&e.eventLogs.push("You take a deep breathe."),e.waitStreak>=3&&(3===e.waitStreak&&e.eventLogs.push("You feel a little bit better."),e.hp++)):1===e.waitStreak&&e.eventLogs.push("You start waiting.")}(e)},N=function(e,t){!1!==e.playerActions.includes(t)&&"wait"===t&&(w(e),e.waitStreak++,G(e))},J=n.p+"static/media/roguelikeitems.1cd93c68.png",W=[{type:"Sword",spritePosition:[2,7],imageSrc:J,nameInSentence:"a sword"},{type:"Ruby",spritePosition:[3,3],imageSrc:J,nameInSentence:"a ruby"},{type:"Key",spritePosition:[11,3],imageSrc:J,nameInSentence:"a key"},{type:"Coins",spritePosition:[8,3],imageSrc:J,nameInSentence:"small coins"},{type:"ManyCoins",spritePosition:[7,3],imageSrc:J,nameInSentence:"a lot of coins"}],X=function(e){return W.find((function(t){return t.type===e}))},z=function(e,t){var n=t.tileType,i=t.visibility,r=t.revealed,a=t.content,o=t.burning,c=t.creature,s=t.creatureDiedThisRound;if("Player"===a)return e.interactionText="This is you.",void(e.hoveredCreatureId="Player");if(!1!==r||"dark"!==i){if(c&&"dark"!==i){if(e.hoveredCreatureId=c.id,"dim"===i)return void(e.interactionText="You see something standing in the shadows.");if("clear"===i)return void(e.interactionText="You see a ".concat(c.type,"!"))}if("dim"!==i||r||0===a){var u,d,l,p="see",h="";if("dark"===i&&r&&(p="remember seeing"),"dim"===i&&r&&(p="remember seeing"),"dim"===i&&(p="get a glimpse of"),0!==a)u=null===(d=X(a))||void 0===d?void 0:d.nameInSentence;else u=null===(l=Y(n))||void 0===l?void 0:l.nameInSentence;s&&(u="a very much dead creature"),"remember seeing"===p&&(h=" over there");var f="You ".concat(p," ").concat(u).concat(o&&"dark"!==i?" burning":"").concat(h,".");e.interactionText=f}else e.interactionText="You discern something on the ground."}},K=n(333),V=function(e){e.currentMap.forEach((function(t,n){return t.forEach((function(t,i){var r=t.creature;if(r){var a=Object(K.a)(),o=k[r.type],c={id:a,type:r.type,position:[i,n],hp:o.maxHp,maxHp:o.maxHp,conditions:{},status:"idle",walkingDistanceToPlayer:Number(e.dijkstraMap[n][i])};e.creatures[a]=c,e.currentMap[n][i].creature={id:a,type:r.type}}}))}))},q=function(e,t){var n=t,i=n.length,r=n[0].length;return n.forEach((function(e){e.forEach((function(e){e.visibility="dark"}))})),U({position:e,radius:8.5,mapWidth:r,mapHeight:i}).forEach((function(t){if(n[t[1]]&&n[t[1]][t[0]]){var i=function(e){var t=e.position,n=e.playerPosition,i=e.gameMap,r=e.maxClearVisibility,a=e.maxVisibility,o=Object(c.a)(t,2),s=o[0],u=o[1];if("+"===i[t[1]][t[0]].tile&&n===t)return"clear";var d=R([s,u],n).filter((function(e){return"#"===i[e[1]][e[0]].tile||"+"===i[e[1]][e[0]].tile&&JSON.stringify(e)!==JSON.stringify(n)})).length;return d>=1&&("#"!==i[t[1]][t[0]].tile&&"+"!==i[t[1]][t[0]].tile||("#"===i[t[1]][t[0]].tile||"+"===i[t[1]][t[0]].tile)&&d>=2)?"dark":B({center:n,position:t,radius:r})?"clear":B({center:n,position:t,radius:a})?"dim":"dark"}({position:t,playerPosition:e,gameMap:n,maxClearVisibility:6.5,maxVisibility:8.5});n[t[1]][t[0]].visibility=i,"clear"===i&&!1===n[t[1]][t[0]].revealed&&(n[t[1]][t[0]].revealed=!0)}})),n},Z=function(e,t){e.currentMap[e.playerPosition[1]][e.playerPosition[0]].content=0,function(e,t){var n=e.currentMap[t[1]][t[0]].content;if(n&&"Player"!==n){var i=X(n);if(console.log("get item"),i)if("Coins"===i.type){var r=D(8,32);e.gold=e.gold+r,e.eventLogs.push("You found ".concat(r," gold.")),e.sounds.push("lootCoins")}else if("ManyCoins"===i.type){var a=D(50,150);e.gold=e.gold+a,e.eventLogs.push("You found ".concat(a," gold!")),e.sounds.push("lootManyCoins")}else e.inventory.push(n),e.eventLogs.push("You found ".concat(i.nameInSentence,"."))}}(e,t),e.currentMap[t[1]][t[0]].content="Player",e.playerPosition=t,e.currentMap=q(t,e.currentMap),e.dijkstraMap=O(e.currentMap.map((function(e){return e.map((function(e){return e.tile}))})),t)},_=function(e,t){w(e),e.moveDirection=t,e.waitStreak=0;var n=function(e,t){var n,i;switch(t){case"Left":n=e.playerPosition[0]>0?e.playerPosition[0]-1:e.playerPosition[0],i=e.playerPosition[1];break;case"Right":n=e.playerPosition[0]<m?e.playerPosition[0]+1:e.playerPosition[0],i=e.playerPosition[1];break;case"Up":n=e.playerPosition[0],i=e.playerPosition[1]>0?e.playerPosition[1]-1:e.playerPosition[1];break;case"Down":n=e.playerPosition[0],i=e.playerPosition[1]<37?e.playerPosition[1]+1:e.playerPosition[1]}return[n,i]}(e,t),i=e.currentMap[n[1]][n[0]].tile,r=Y(i),a=e.currentMap[n[1]][n[0]].creature;if(a)!function(e,t,n){var i=k[n].baseAC,r=new E.DiceRoll("d20");if(r.total<i)return e.eventLogs.push("You miss the ".concat(n,".")),void e.sounds.push("miss");var a=20===r.total,o=a?"".concat(v,"*2"):v,c=new E.DiceRoll(o).total;e.creatures[t].hp=e.creatures[t].hp-c,e.hitsLastRound.push({creatureId:t,damage:c}),e.eventLogs.push("".concat(a?"[CRIT] ":"","You hit the ").concat(n," for ").concat(c," damage!")),a?e.sounds.push("crit"):e.sounds.push("attack"),e.creatures[t].hp>0&&e.sounds.push("".concat(n,"Pain"))}(e,a.id,a.type);else{if(">"===(null===r||void 0===r?void 0:r.type))return e.eventLogs.push("You reached depth ".concat(e.depth+1,"!")),e.sounds.push("stairs"),void e.depth++;!function(e,t,n){switch(t){case"Left":return e.playerPosition[0]>0&&!0===(null===n||void 0===n?void 0:n.canWalkThrough);case"Right":return e.playerPosition[0]<59&&!0===(null===n||void 0===n?void 0:n.canWalkThrough);case"Up":return e.playerPosition[1]>0&&!0===(null===n||void 0===n?void 0:n.canWalkThrough);case"Down":return e.playerPosition[1]<37&&!0===(null===n||void 0===n?void 0:n.canWalkThrough)}}(e,t,r)?function(e,t){e.interactionText="You hit ".concat(t||"",".")}(e,null===r||void 0===r?void 0:r.nameInSentence):Z(e,n)}G(e)},$=function(e,t){var n=t.position,i=t.cellData;e.currentMap[n[1]][n[0]]=i},ee=function(e){return{type:"@@GAME/MOVE_PLAYER",direction:e}},te=function(e){return{type:"@@GAME/SET_CURRENT_MAP",currentMap:e}},ne=function(e){return{type:"@@GAME/SET_SEED",seed:e}},ie=function(e){return{type:"@@GAME/INIT_PLAYER_SPAWN",playerSpawn:e}},re=function(e){return{type:"@@GAME/UPDATE_CELL",payload:e}},ae=function(){return{type:"@@GAME/INIT_VISIBILITY"}},oe=function(){return{type:"@@GAME/INIT_CREATURES"}},ce=function(e){return{type:"@@GAME/HOVER_CELL",payload:e}},se=function(){return{type:"@@GAME/HOVER_AWAY_FROM_CELL"}},ue=function(e){return{type:"@@GAME/HOVER_CREATURE_BLOCK",creatureId:e}},de=function(){return{type:"@@GAME/HOVER_AWAY_FROM_CREATURE_BLOCK"}},le=function(e){return{type:"@@GAME/DO_PLAYER_ACTION",playerAction:e}},pe={currentMap:[],dijkstraMap:[],seed:"",gameStatus:"playing",depth:1,round:0,deathText:"",moveDirection:"Right",characterName:"Kerhebos",interactionText:"You enter the dungeon.",eventLogs:[],creatures:{},playerPosition:[0,0],playerPreviousPosition:[0,0],hp:125,maxHp:125,equipedItems:[],inventory:[],gold:0,playerConditions:{},hitsLastRound:[],deathPositionsThisRound:[],hoveredCreatureId:"",sounds:[],waitStreak:0,playerActions:["wait"]},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"@@GAME/MOVE_PLAYER":return _(e,t.direction);case"@@GAME/SET_CURRENT_MAP":return void(e.currentMap=t.currentMap);case"@@GAME/SET_SEED":return void(e.seed=t.seed);case"@@GAME/INIT_PLAYER_SPAWN":return e.dijkstraMap=O(e.currentMap.map((function(e){return e.map((function(e){return e.tile}))})),t.playerSpawn),e.playerPreviousPosition=t.playerSpawn,void(e.playerPosition=t.playerSpawn);case"@@GAME/UPDATE_CELL":return $(e,t.payload);case"@@GAME/INIT_VISIBILITY":return void(e.currentMap=q(e.playerPosition,e.currentMap));case"@@GAME/INIT_CREATURES":return V(e);case"@@GAME/HOVER_CELL":return z(e,t.payload);case"@@GAME/HOVER_AWAY_FROM_CELL":return e.hoveredCreatureId="",void(e.interactionText="");case"@@GAME/HOVER_CREATURE_BLOCK":return void(e.hoveredCreatureId=t.creatureId);case"@@GAME/HOVER_AWAY_FROM_CREATURE_BLOCK":return void(e.hoveredCreatureId="");case"@@GAME/DO_PLAYER_ACTION":return N(e,t.playerAction)}},fe=n(37),ge=n.n(fe),be=function(e){for(var t=e.area,n=e.map,i=e.cellTile,r=[],a=t.origin.y;a<=t.end.y;a++)for(var o=t.origin.x;o<=t.end.x;o++)n[a][o]===i&&r.push([o,a]);return r},Ae=function(e,t){for(var n,i=e.length,r=t||Math.random;0!==i;){n=Math.floor(r()*i),i--;var a=[e[n],e[i]];e[i]=a[0],e[n]=a[1]}return e},je=function(e){return[{origin:{x:e.origin.x,y:e.origin.y},end:{x:e.end.x,y:Math.floor((e.end.y+e.origin.y)/2)}},{origin:{x:e.origin.x,y:Math.floor((e.end.y+e.origin.y)/2)},end:{x:e.end.x,y:e.end.y}}]},me=function(e){return[{origin:{x:e.origin.x,y:e.origin.y},end:{x:Math.floor((e.end.x+e.origin.x)/2),y:e.end.y}},{origin:{x:Math.floor((e.end.x+e.origin.x)/2),y:e.origin.y},end:{x:e.end.x,y:e.end.y}}]},xe={origin:{x:0,y:0},end:{x:59,y:37}},ve=function(e,t,n,i){var r=n,a=be({area:e,map:n,cellTile:"."}),o=a[Math.floor(i()*a.length)],c=be({area:t,map:n,cellTile:"."});return function(e,t){for(var n=t[0]-e[0],i=t[1]-e[1],r=Math.abs(n),a=Math.abs(i),o=n>0?1:-1,c=i>0?1:-1,s={x:e[0],y:e[1]},u=[[s.x,s.y]],d=0,l=0;d<r||l<a;)(.5+d)/r<(.5+l)/a?(s.x+=o,d++):(s.y+=c,l++),u.push([s.x,s.y]);return u}(o,c[Math.floor(i()*c.length)]).forEach((function(e){return r[e[1]][e[0]]="."})),r},ye=function(e){var t=e.leavesArray,n=e.map,i=e.index,r=e.leavesDepth,a=e.rng;return ve(t[r][t[r].length-(i-1)],t[r][t[r].length-i],n,a)},Oe=function(e){return e.map((function(e,t){return e.map((function(e,n){return"."===e?[n,t]:null}))})).flat().filter((function(e){return null!==e}))},we=function(e){var t=function(e,t){for(var n=[],i=0;i<t;i++){n[i]=[];for(var r=0;r<e;r++)n[i][r]="#"}return n}(m,x),n=function(e){for(var t=[xe],n=[],i=e()>.5,r=function(e){var r=i?je:me;i=!i,t=Object(C.a)(t.map((function(e){return r(e)}))).flat(),n[e]=t},a=0;a<=3;a++)r(a);return n}(e),i=n[3].map((function(t){return function(e,t){var n=e.end.x-e.origin.x,i=e.end.y-e.origin.y,r=D(3,n-1,t),a=D(3,i-1,t),o=D(e.origin.x,e.origin.x+n-r,t),c=D(e.origin.y,e.origin.y+i-a,t);return{origin:{x:o,y:c},end:{x:o+r,y:c+a}}}(t,e)})),r=t;return i.forEach((function(e){r=function(e,t){for(var n=e,i=t.origin.x;i<=t.end.x;i++)for(var r=t.origin.y;r<=t.end.y;r++)i===t.origin.x||i===t.end.x||r===t.origin.y||r===t.end.y?n[r][i]="#":n[r][i]=".";return n}(r,e)})),r=function(e,t){var n=e,i=Oe(n),r=i[D(0,i.length-1,t)];return n[r[1]][r[0]]=">",n}(r=function(e,t,n){for(var i=t,r=0;r<=3;r++)for(var a=1;a<=Math.pow(2,3-r);a++){var o={leavesArray:e,map:i,index:2*a,leavesDepth:3-r,rng:n};i=ye(o),3===r&&(i=ye(o),i=ye(o),i=ye(o))}return i}(n,r,e),e)},Ce=function(e){var t=we(e),n=be({area:xe,map:t,cellTile:"."}),i=n[Math.floor(e()*n.length)];return t[i[1]][i[0]]="@",{gameMap:function(e,t,n,i,r){var a=Oe(e),o=Ae(a,r),c=D(3,10,r),s=o.splice(0,c).map((function(e){return String(e)})),u=D(5,10,r),d=o.splice(0,u),l=[];r&&d.forEach((function(e){var t,n=function(e){return e()>.5?"goblin":"rat"}(r),i=U({position:e,radius:3,mapHeight:x,mapWidth:m}).filter((function(e){return o.map((function(e){return String(e)})).includes(String(e))})),a=Ae(i,r);l=(t=l).concat.apply(t,Object(C.a)(a.splice(0,Math.min(k[n].spawnNumber,a.length)).map((function(e){return{position:e,creatureType:n}}))))}));for(var p=[],h=function(i){p[i]=[];for(var a=function(n){var a=0,o=void 0;if(r){a=s.includes(String([n,i]))?function(e){return e()>.5?"ManyCoins":"Coins"}(r):0;var c=l.map((function(e){return{position:String(e.position),creatureType:e.creatureType}})).find((function(e){return e.position===String([n,i])}));o=c?{type:c.creatureType,id:"temp_id"}:void 0}p[i][n]={content:a,tile:e[i][n],revealed:!1,visibility:"clear",burningRounds:0,creature:o,position:"".concat(n,",").concat(i)},n===t[0]&&i===t[1]&&(p[i][n].content="Player")},o=0;o<n;o+=1)a(o)},f=0;f<i;f+=1)h(f);return p}(t,i,m,x,e),playerSpawn:i}},Ee=function(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)},Pe=n(17),ke=n(75),Be=n.n(ke),Me=n(38),Se=n.n(Me),Re=n(0),Te=function(e){var t=e.position,n=e.flameImage,i=e.opacity;return Object(Re.jsx)(Pe.f,{ref:function(e){e&&!e.isRunning()&&e.start()},x:t[0]*A+6.5,y:t[1]*A,animation:"burning",animations:{burning:[0,0,16,24,16,0,16,24,32,0,16,24,48,0,16,24,0,24,16,24,16,24,16,24,32,24,16,24,48,24,16,24,0,48,16,24,16,48,16,24,32,48,16,24,48,48,16,24]},image:n||new window.Image,frameRate:8,frameIndex:D(0,11),opacity:i})},De=function(e){var t=e.content,n=e.tileType,i=e.visibility,a=e.revealed,o=e.dispatch,s=e.position,u=e.itemsImage,d=e.flameImage,l=e.burning,p=e.creature,h=e.creaturesImage,f=e.hitsLastRound,g=e.round,b=e.highlighted,j=e.creatureDiedThisRound,m=r.a.useState(!1),x=Object(c.a)(m,2),v=x[0],y=x[1],O=r.a.useRef(null),w=0!==t&&"Player"!==t?X(t):"",C=Y(n),E=0!==f.filter((function(e){return e.creatureId===(null===p||void 0===p?void 0:p.id)})).length,P=E&&!v,B=function(){return a||"dark"!==i?"clear"===i?(null===C||void 0===C?void 0:C.clearBackgroundColor)||L:("dim"===i||a)&&(null===C||void 0===C?void 0:C.dimBackgroundColor)||L:L};r.a.useEffect((function(){y(!1)}),[g]),r.a.useEffect((function(){if(O.current&&p&&P){var e=new Se.a.Tween({node:O.current,duration:.2,easing:Se.a.Easings.BounceEaseInOut,fill:B(),onFinish:function(){return y(!0)}});return e.play(),function(){e.pause()}}}),[p,g,P]);var M=function(){if(0!==t&&"Player"!==t){if("dark"===i&&!a)return null;if("dim"===i&&!a)return Object(Re.jsx)(Pe.a,{x:s[0]*A+14.5,y:s[1]*A+14.5,radius:5,fill:H,opacity:.3});var e=0;return"clear"===i?e=1:("dim"===i||a)&&(e=.3),w?Object(Re.jsx)(Pe.c,{x:s[0]*A+6.5,y:s[1]*A+6.5,image:u,width:16,height:16,opacity:e,crop:{x:16*w.spritePosition[0],y:16*w.spritePosition[1],width:16,height:16}}):null}return null},S=function(){if(p){if("dark"===i)return null;if("dim"===i)return Object(Re.jsx)(Pe.a,{x:s[0]*A+14.5,y:s[1]*A+14.5,radius:5,fill:"orange",opacity:.3});var e=0;"clear"===i?e=1:"dim"===i&&(e=.3);var t=k[p.type].spritePosition;return Object(Re.jsx)(Pe.c,{ref:O,x:s[0]*A+1,y:s[1]*A+1,image:h,width:26,height:26,opacity:e,fill:P?"red":B(),crop:{x:16*t[0],y:16*t[1],width:16,height:16}})}return null};return Object(Re.jsxs)(Pe.b,{onMouseEnter:function(){return o(ce({tileType:n,visibility:i,revealed:a,content:t,burning:l,creature:p,creatureDiedThisRound:j}))},onMouseLeave:function(){return o(se())},children:[Object(Re.jsx)(Pe.e,{width:28,height:28,fill:B(),x:s[0]*A,y:s[1]*A,stroke:b?"white":"rgba(0, 0, 0, 0.1)",strokeWidth:2}),j?function(){var e=0;return"clear"===i?e=1:"dim"===i&&(e=.3),Object(Re.jsx)(Pe.c,{ref:O,x:s[0]*A+1,y:s[1]*A+1,image:u,width:27,height:27,opacity:e,fill:E?"red":B(),crop:{x:192,y:144,width:16,height:16}})}():"dark"!==i&&p?Object(Re.jsx)(S,{}):"dark"!==i&&l?Object(Re.jsx)(Te,{flameImage:d,position:s,opacity:"dim"===i?.3:1}):0!==t&&"Player"!==t?Object(Re.jsx)(M,{}):function(){if("dark"!==i||a)return Object(Re.jsx)(Pe.h,{x:s[0]*A+7,y:s[1]*A+8,text:n,fontFamily:"UglyTerminal",fontSize:16,fill:l&&"dark"!==i?"white":"clear"===i?(null===C||void 0===C?void 0:C.clearFontColor)||H:("dim"===i||a)&&(null===C||void 0===C?void 0:C.dimFontColor)||H})}()]})},Ie=function(e){var t,n,i=e.moveDirection,a=e.dispatch,o=e.hitsLastRound,s=e.round,u=r.a.useRef(null),d=r.a.useState(!1),l=Object(c.a)(d,2),p=l[0],h=l[1],f=17.4,g=8.7,b=0!==o.filter((function(e){return"player"===e.creatureId})).length&&!p;switch(r.a.useEffect((function(){h(!1)}),[s]),r.a.useEffect((function(){if(u.current&&b){var e=new Se.a.Tween({node:u.current,duration:.126,easing:Se.a.Easings.BounceEaseInOut,fill:"blue",onFinish:function(){return h(!0)}});return e.play(),function(){e.pause()}}}),[s,b]),i){case"Up":t=4.35,n=8.7;break;case"Down":t=4.35,n=0;break;case"Left":t=8.7,n=4.35;break;case"Right":t=0,n=4.35}return Object(Re.jsxs)(Pe.b,{onMouseEnter:function(){return a(ce({tileType:".",visibility:"clear",revealed:!0,content:"Player",burning:!1}))},onMouseLeave:function(){return a(se())},children:[Object(Re.jsx)(Pe.e,{ref:u,width:f,height:f,fill:b?"red":"blue",x:440.8,y:295.8,_useStrictMode:!0}),Object(Re.jsx)(Pe.e,{width:g,height:g,fill:"black",x:449.5-t,y:304.5-n})]})},Qe=function(e,t,n,i,r,a,o,c,s,u){var d=Math.floor(15.5),l=Math.floor(10.5);return e.filter((function(e,t){return t>=r[1]-l&&t<=r[1]+l})).map((function(e,l){return e.filter((function(e,t){return t>=r[0]-d&&t<=r[0]+d})).map((function(e,r){var d,p="".concat(r,"-").concat(l),h=e.visibility,f=!1;o.includes(e.position)&&(f=!0);var g=(null===(d=e.creature)||void 0===d?void 0:d.id)===s&&"clear"===e.visibility||"Player"===e.content&&"Player"===s;return Object(Re.jsx)(De,{visibility:h,revealed:e.revealed,content:e.content,tileType:e.tile,position:[r,l],creaturesImage:i,itemsImage:t,flameImage:n,dispatch:u,burning:e.burningRounds>0,creature:e.creature,hitsLastRound:a,round:c,creatureDiedThisRound:f,highlighted:g},p)}))}))},Le=r.a.memo((function(e){var t,n,i=Be()(J),r=Object(c.a)(i,1)[0],a=Be()(P),o=Object(c.a)(a,1)[0],s=Be()("data:image/png;base64,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"),u=Object(c.a)(s,1)[0],d=(t=e.playerPosition[0])<Math.floor(15.5)?-(Math.floor(15.5)-t)*A:0,l=(n=e.playerPosition[1])<Math.floor(10.5)?-(Math.floor(10.5)-n)*A:0;return Object(Re.jsx)(Pe.g,{width:900,height:610,children:Object(Re.jsxs)(Pe.d,{imageSmoothingEnabled:!1,children:[Object(Re.jsx)(Pe.b,{offsetX:d,offsetY:l,children:Qe(e.gameMap,r,u,o,e.playerPosition,e.hitsLastRound,e.deathPositionsThisRound.map(String),e.round,e.hoveredCreatureId,e.dispatch)}),Object(Re.jsx)(Ie,{moveDirection:e.moveDirection,dispatch:e.dispatch,hitsLastRound:e.hitsLastRound,round:e.round})]})})}));Le.displayName="Canvas";var He,Fe,Ye,Ue,Ge,Ne,Je,We,Xe,ze,Ke,Ve,qe,Ze,_e,$e,et,tt,nt,it,rt,at,ot,ct,st,ut,dt,lt,pt,ht,ft,gt,bt,At=n(170),jt=n.n(At),mt=[{type:"wait",gameKey:"w"}],xt=mt.map((function(e){return e.gameKey})),vt=["ArrowLeft","ArrowUp","ArrowRight","ArrowDown"].concat(Object(C.a)(xt)),yt=function(e,t){var n=r.a.useRef(Date.now());r.a.useEffect((function(){var i=function(i){var r=i.key;if(vt.includes(r)&&(i.preventDefault(),!(Date.now()-n.current<126)&&"gameover"!==t)){n.current=Date.now();var a=mt.find((function(e){return e.gameKey===r}));if(a)return e(le(a.type));var o=function(e){if(vt.includes(e))switch(e){case"ArrowLeft":return"Left";case"ArrowRight":return"Right";case"ArrowUp":return"Up";case"ArrowDown":return"Down"}}(r);o&&e(ee(o))}};return document.addEventListener("keydown",i),function(){document.removeEventListener("keydown",i)}}),[t])},Ot=n.p+"static/media/attack.a3dfc39e.wav",wt=n.p+"static/media/crit.d7aa0535.wav",Ct=n.p+"static/media/goblin_attack.d9be07a5.wav",Et=n.p+"static/media/goblin_death.7d1b8ece.wav",Pt=n.p+"static/media/goblin_pain.584fefc2.wav",kt=n.p+"static/media/lootBigGold.5d9d28bf.ogg",Bt=n.p+"static/media/lootSmallGold.6fe614b6.ogg",Mt=n.p+"static/media/miss.d3279d33.wav",St=n.p+"static/media/rat_attack.7941f90a.ogg",Rt=n.p+"static/media/rat_death.11af7280.ogg",Tt=n.p+"static/media/rat_pain.b89a9e15.ogg",Dt=n.p+"static/media/stairs.79b1bf44.ogg",It=function(){var e=r.a.useState(!1),t=Object(c.a)(e,2),n=t[0],i=t[1],a=function e(){i(!0),window.removeEventListener("mousedown",e),window.removeEventListener("keydown",e)};return r.a.useEffect((function(){return window.addEventListener("mousedown",a),window.addEventListener("keydown",a),function(){window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a)}}),[]),n},Qt=l.a.div(He||(He=Object(s.a)(["\n  border: 3px solid #6e6e6e;\n  border-radius: 5px;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 3px;\n  box-sizing: border-box;\n"]))),Lt=l.a.div(Fe||(Fe=Object(s.a)(["\n  border: 3px solid #6e6e6e;\n  border-radius: 3px;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  box-sizing: border-box;\n"]))),Ht=function(e){return Object(Re.jsx)(Qt,{children:Object(Re.jsx)(Lt,{children:e.children})})},Ft=l.a.div(Ye||(Ye=Object(s.a)(["\n  width: ","px;\n  height: ","px;\n  background: url(",") no-repeat;\n  image-rendering: pixelated;\n  background-position: ","px\n    ","px;\n"])),(function(e){return e.pixelDimensions}),(function(e){return e.pixelDimensions}),(function(e){return e.imageSrc}),(function(e){return-e.position[0]*e.pixelDimensions}),(function(e){return-e.position[1]*e.pixelDimensions})),Yt=function(e){return Object(Re.jsx)(Ft,Object(Q.a)({},e))},Ut=l.a.div(Ue||(Ue=Object(s.a)(["\n  margin-top: 10px;\n  height: 576px;\n  overflow-y: scroll;\n  ::-webkit-scrollbar {\n    /*Chrome, Safari and Opera */\n    display: none;\n  }\n  -ms-overflow-style: none; /* IE and Edge */\n  scrollbar-width: none; /* Firefox */\n"]))),Gt=function(e){var t=e.entity,n=e.index,i=e.handleMouseEnter,r=e.handleMouseLeave,a=e.highlighted,o=k[t.type],c=o.imageSrc,s=o.spritePosition,u=t.hp/t.maxHp*100;return Object(Re.jsx)("div",{style:{marginTop:0!==n?10:void 0},children:Object(Re.jsx)(Ht,{children:Object(Re.jsxs)("div",{onMouseEnter:i,onMouseLeave:r,style:{paddingLeft:20,paddingRight:20,paddingTop:17,paddingBottom:17,background:a?"radial-gradient(#555454, #030303)":void 0},children:[Object(Re.jsx)("div",{style:{width:164},children:Object(Re.jsxs)("div",{style:{display:"flex"},children:[Object(Re.jsx)("span",{children:Object(Re.jsx)(Yt,{imageSrc:c,position:s,pixelDimensions:16})}),Object(Re.jsxs)("div",{style:{width:125},children:[Object(Re.jsxs)("div",{style:{marginLeft:20,height:20},children:[t.hp,"/",t.maxHp]}),Object(Re.jsx)("div",{style:{marginLeft:20,backgroundColor:"#FF4847",width:"".concat(u,"%"),height:3}})]})]})}),Object(Re.jsx)("div",{style:{marginTop:13},children:Object(Re.jsxs)("div",{style:{display:"flex"},children:[Object(Re.jsx)("span",{children:"*"}),Object(Re.jsx)("span",{style:{marginLeft:20},children:t.status})]})})]})})})},Nt=function(e){var t=function(){return e.dispatch(de())};return Object(Re.jsx)(Ut,{children:e.entities.map((function(n,i){return Object(Re.jsx)(Gt,{entity:n,index:i,handleMouseEnter:(r=n.id,function(){return e.dispatch(ue(r))}),handleMouseLeave:t,highlighted:n.id===e.hoveredCreatureId},n.id);var r}))})},Jt=l.a.div(Ge||(Ge=Object(s.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  width: 85%;\n  margin-left: auto;\n  margin-right: auto;\n  margin-top: 10px;\n"]))),Wt=l.a.div(Ne||(Ne=Object(s.a)(["\n  height: 50px;\n  width: 50px;\n  background-color: black;\n  margin-bottom: 10px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: solid 2px #6e6e6e;\n  border-radius: 10px;\n  box-sizing: border-box;\n"]))),Xt=l.a.div(Je||(Je=Object(s.a)(["\n  box-sizing: border-box;\n  width: 25px;\n  height: 25px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: #131226;\n  border-radius: 6px;\n"]))),zt=l.a.div(We||(We=Object(s.a)(["\n  height: 50px;\n  width: 50px;\n  background-color: black;\n  margin-bottom: 10px;\n"]))),Kt=function(e){return Object(Re.jsxs)(Jt,{children:[Object(Re.jsx)(zt,{}),Object(Re.jsx)(Wt,{children:Object(Re.jsx)(Xt,{})})," ",Object(Re.jsx)(zt,{}),e.equipedItems.some((function(e){return"Sword"===e}))?Object(Re.jsx)(Wt,{children:Object(Re.jsx)(Xt,{children:Object(Re.jsx)(Yt,{imageSrc:J,position:[3,8],pixelDimensions:16})})}):Object(Re.jsx)(Wt,{children:Object(Re.jsx)(Xt,{})}),Object(Re.jsx)(Wt,{children:Object(Re.jsx)(Xt,{})})," ",Object(Re.jsx)(Wt,{children:Object(Re.jsx)(Xt,{})})," ",Object(Re.jsx)(Wt,{children:Object(Re.jsx)(Xt,{})})," ",Object(Re.jsx)(Wt,{children:Object(Re.jsx)(Xt,{})})," ",Object(Re.jsx)(Wt,{children:Object(Re.jsx)(Xt,{})})," "]})},Vt=l.a.div(Xe||(Xe=Object(s.a)(["\n  height: 80px;\n  background-color: #131226;\n  border-radius: 10px;\n  color: white;\n  margin-bottom: 10px;\n  box-sizing: border-box;\n  width: 100%;\n  font-family: Ubuntu Mono;\n  font-size: 16px;\n  padding: 5px 12px 5px 12px;\n  font-weight: 400;\n"]))),qt=l.a.div(ze||(ze=Object(s.a)(["\n  height: 23px;\n  display: flex;\n  align-items: center;\n"]))),Zt=function(e){return Object(Re.jsx)(Vt,{children:e.eventLogs.slice(Math.max(0,e.eventLogs.length-3),e.eventLogs.length).map((function(e,t){return Object(Re.jsx)(qt,{children:e},t)}))})},_t=l.a.div(Ke||(Ke=Object(s.a)(["\n  width: 100%;\n  height: 100%;\n  color: white;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]))),$t=function(e){var t=e.deathText;return Object(Re.jsxs)(_t,{children:[Object(Re.jsx)("div",{style:{marginBottom:35},children:"GAME OVER"}),Object(Re.jsx)("div",{children:t})]})},en=l.a.div(Ve||(Ve=Object(s.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 32px;\n  width: ","px;\n  background-color: black;\n  color: white;\n  padding: 5px;\n  box-sizing: border-box;\n  margin-left: auto;\n  margin-right: auto;\n  font-family: Ubuntu Mono;\n  font-size: 22px;\n"])),900),tn=function(e){return Object(Re.jsx)(en,{children:e.interactionText})},nn=l.a.div(qe||(qe=Object(s.a)(["\n  box-sizing: border-box;\n  width: 25px;\n  height: 25px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: #131226;\n  border-radius: 6px;\n"]))),rn=l.a.div(Ze||(Ze=Object(s.a)(["\n  width: 100%;\n  padding-right: 5px;\n  padding-left: 5px;\n  box-sizing: border-box;\n  margin-top: 10px;\n"]))),an=l.a.div(_e||(_e=Object(s.a)(["\n  width: 85%;\n  display: flex;\n  flex-wrap: wrap;\n  margin-left: auto;\n  margin-right: auto;\n  padding-top: 20px;\n  padding-bottom: 20px;\n  justify-content: center;\n"]))),on=l.a.div($e||($e=Object(s.a)(["\n  box-sizing: border-box;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),cn=function(e,t){var n;return e?Object(Re.jsx)(on,{children:Object(Re.jsx)(nn,{children:Object(Re.jsx)(Yt,{imageSrc:J,position:(null===(n=X(e))||void 0===n?void 0:n.spritePosition)||[0,0],pixelDimensions:16})},e)},"slot-".concat(t)):Object(Re.jsx)(on,{children:Object(Re.jsx)(nn,{})},"slot-".concat(t))},sn=function(e){return Object(Re.jsx)(rn,{children:Object(Re.jsx)("div",{children:Object(Re.jsx)(Ht,{children:Object(Re.jsx)(an,{children:function(){for(var t=[],n=0;n<8;n++)e.inventory[n]?t.push(cn(e.inventory[n],n)):t.push(cn(null,n));return t}()})})})})},un=l.a.div(et||(et=Object(s.a)(["\n  height: 380px;\n"]))),dn=l.a.div(tt||(tt=Object(s.a)(["\n  cursor: pointer;\n"]))),ln=function(e){var t=!1;return e.type.split("").map((function(n,i){return n!==e.gameKey||t?n:(t=!0,Object(Re.jsx)("span",{style:{color:"yellow"},children:n},i))}))},pn=function(e){return Object(Re.jsx)(un,{children:e.actions.map((function(t){var n=mt.find((function(e){return e.type===t}));if(n)return Object(Re.jsx)(dn,{onClick:function(){return e.dispatch(le(t))},children:ln(n)},t)}))})},hn="data:image/png;base64,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",fn=l.a.div(nt||(nt=Object(s.a)(["\n  /* height: 100%; */\n  display: flex;\n  /* flex-direction: column;\n  justify-content: space-between; */\n"]))),gn=function(e){var t,n=e.hp/e.maxHp*100,i=void 0===e.playerConditions.burning?0:(null===(t=e.playerConditions.burning)||void 0===t?void 0:t.activeRounds)/I.duration*100,r="Player"===e.hoveredCreatureId;return Object(Re.jsx)(fn,{onMouseEnter:function(){return e.dispatch(ue("Player"))},onMouseLeave:function(){return e.dispatch(de())},children:Object(Re.jsx)("div",{children:Object(Re.jsx)(Ht,{children:Object(Re.jsxs)("div",{style:{paddingLeft:20,paddingRight:20,paddingTop:17,paddingBottom:17,background:r?"radial-gradient(#555454, #030303)":void 0},children:[Object(Re.jsx)("div",{style:{width:164},children:Object(Re.jsxs)("div",{style:{display:"flex"},children:[Object(Re.jsx)("span",{children:Object(Re.jsx)(Yt,{imageSrc:hn,position:[0,2],pixelDimensions:16})}),Object(Re.jsx)("span",{style:{marginLeft:20},children:e.characterName})]})}),Object(Re.jsx)("div",{style:{marginTop:13},children:Object(Re.jsxs)("div",{style:{display:"flex"},children:[Object(Re.jsx)("span",{children:Object(Re.jsx)(Yt,{imageSrc:hn,position:[0,0],pixelDimensions:16})}),Object(Re.jsxs)("div",{style:{width:125},children:[Object(Re.jsxs)("div",{style:{marginLeft:20,height:20},children:[e.hp,"/",e.maxHp]}),Object(Re.jsx)("div",{style:{marginLeft:20,backgroundColor:"#FF4847",width:"".concat(n,"%"),height:3}})]})]})}),Object(Re.jsx)("div",{style:{marginTop:13},children:Object(Re.jsxs)("div",{style:{display:"flex"},children:[Object(Re.jsx)("span",{children:Object(Re.jsx)(Yt,{imageSrc:hn,position:[1,0],pixelDimensions:16})}),Object(Re.jsx)("span",{style:{marginLeft:20},children:e.gold})]})}),e.playerConditions.burning&&Object(Re.jsx)("div",{style:{marginTop:13,backgroundColor:"orange",width:"".concat(i,"%"),height:25,display:"flex",alignItems:"center",paddingLeft:10},children:"BURNING"})]})})})})},bn=(n(323),function(e){var t=r.a.useState(""),n=Object(c.a)(t,2),i=n[0],a=n[1];return r.a.useEffect((function(){if(e.shake){a("shake");var t=setTimeout((function(){return a("")}),200);return function(){clearTimeout(t)}}a("")}),[e.shake,e.round]),Object(Re.jsx)("div",{className:i,children:e.children})}),An=(n(324),l.a.div(it||(it=Object(s.a)(["\n  overflow: hidden;\n  width: ",";\n  height: ",";\n  background-color: black;\n"])),(function(){return"".concat(900,"px")}),(function(){return"".concat(610,"px")}))),jn=function(e){var t=r.a.useState(0),n=Object(c.a)(t,2),i=n[0],a=n[1],o=r.a.useState(""),s=Object(c.a)(o,2),u=s[0],d=s[1],l=r.a.useState(""),p=Object(c.a)(l,2),h=p[0],f=p[1];return r.a.useEffect((function(){d("fadein");var e=setTimeout((function(){d(""),a(1)}),1e3);return function(){clearTimeout(e)}}),[e.depth]),r.a.useEffect((function(){if("gameover"===e.gameStatus){f("fadeout");var t=setTimeout((function(){f("fadein")}),b);return function(){clearTimeout(t)}}}),[e.gameStatus]),Object(Re.jsx)(An,{style:{opacity:i},className:"".concat(u," ").concat(h),children:e.children})},mn=l.a.div(rt||(rt=Object(s.a)(["\n  height: 789px;\n  user-select: none;\n  width: 100%;\n"]))),xn=l.a.div(at||(at=Object(s.a)(["\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n  min-width: 1200px;\n  max-width: 1400px;\n  margin-top: 10px;\n  margin-left: auto;\n  margin-right: auto;\n"]))),vn=l.a.div(ot||(ot=Object(s.a)(["\n  width: 230px;\n  background-color: black;\n  color: white;\n"]))),yn=l.a.div(ct||(ct=Object(s.a)(["\n  height: 18px;\n  padding-left: 25px;\n  padding-right: 25px;\n  width: 100%;\n  min-width: 1200px;\n  max-width: 1400px;\n  margin-left: auto;\n  margin-right: auto;\n"]))),On=function(e){var t=function(){var e=r.a.useState(!1),t=Object(c.a)(e,2),n=t[0],i=t[1];return r.a.useEffect((function(){var e=new jt.a("UglyTerminal");Promise.all([e.load()]).then((function(){i(!0)}))}),[]),n}();yt(e.dispatch,e.state.gameStatus),function(e){var t=e.sounds,n=e.round,i=It(),a=Object(h.a)(wt),o=Object(c.a)(a,1)[0],s=Object(h.a)(Ot,{volume:3}),u=Object(c.a)(s,1)[0],d=Object(h.a)(Mt,{volume:.6}),l=Object(c.a)(d,1)[0],p=Object(h.a)(Bt),f=Object(c.a)(p,1)[0],g=Object(h.a)(kt),b=Object(c.a)(g,1)[0],A=Object(h.a)(Dt),j=Object(c.a)(A,1)[0],m=Object(h.a)(St,{volume:.3}),x=Object(c.a)(m,1)[0],v=Object(h.a)(Tt,{volume:.3}),y=Object(c.a)(v,1)[0],O=Object(h.a)(Rt,{volume:.3}),w=Object(c.a)(O,1)[0],C=Object(h.a)(Ct,{volume:.3}),E=Object(c.a)(C,1)[0],P=Object(h.a)(Pt,{volume:.3}),k=Object(c.a)(P,1)[0],B=Object(h.a)(Et,{volume:.3}),M={crit:o,attack:u,miss:l,lootCoins:f,lootManyCoins:b,stairs:j,ratAttack:x,ratPain:y,ratDeath:w,goblinAttack:E,goblinPain:k,goblinDeath:Object(c.a)(B,1)[0]};r.a.useEffect((function(){i&&t.forEach((function(e){M[e]()}))}),[i,n,t])}({sounds:e.state.sounds,round:e.state.round});var n=r.a.useState(!1),i=Object(c.a)(n,2),a=i[0],o=i[1],s=function(){var t=e.state.seed?e.state.seed.concat(String(e.state.depth)):Ee(),n=ge()(t),i=Ce(n);e.dispatch(ne(t)),e.dispatch(te(i.gameMap)),e.dispatch(ie(i.playerSpawn))},u=function(){e.dispatch(ae()),e.dispatch(oe())};if(r.a.useEffect((function(){0===e.state.currentMap.length&&s(),u()}),[]),r.a.useEffect((function(){e.state.depth>1&&(s(),u())}),[e.state.depth]),r.a.useEffect((function(){if("gameover"===e.state.gameStatus){var t=setTimeout((function(){o(!0)}),b);return function(){clearTimeout(t)}}}),[e.state.gameStatus]),!t)return null;var d,l=(d={creatures:e.state.creatures,currentMap:e.state.currentMap,hitsLastRound:e.state.hitsLastRound},Object.keys(d.creatures).map((function(e){return d.creatures[e]})).filter((function(e){var t=e.position;return"clear"===d.currentMap[t[1]][t[0]].visibility})).sort((function(e,t){return e.walkingDistanceToPlayer-t.walkingDistanceToPlayer})).sort((function(e,t){return d.hitsLastRound.map((function(e){return e.creatureId})).includes(e.id)&&!d.hitsLastRound.map((function(e){return e.creatureId})).includes(t.id)?-1:0})));return Object(Re.jsxs)(mn,{children:[Object(Re.jsxs)(xn,{children:[Object(Re.jsxs)(vn,{style:{marginRight:"15px",paddingRight:5,paddingLeft:5,boxSizing:"border-box",display:"flex",flexDirection:"column"},children:[Object(Re.jsx)(gn,{characterName:e.state.characterName,hp:e.state.hp,maxHp:e.state.maxHp,gold:e.state.gold,withBackgroundMusic:e.withBackgroundMusic,setWithBackgroundMusic:e.setWithBackgroundMusic,playerConditions:e.state.playerConditions,dispatch:e.dispatch,hoveredCreatureId:e.state.hoveredCreatureId}),Object(Re.jsx)(Nt,{entities:l,dispatch:e.dispatch,hoveredCreatureId:e.state.hoveredCreatureId})]}),Object(Re.jsxs)("div",{children:[Object(Re.jsx)(Zt,{eventLogs:e.state.eventLogs}),Object(Re.jsx)(bn,{shake:0!==e.state.hitsLastRound.filter((function(e){return"player"!==e.creatureId})).length,round:e.state.round,children:Object(Re.jsx)(Ht,{children:Object(Re.jsxs)(jn,{depth:e.state.depth,gameStatus:e.state.gameStatus,children:[!a&&Object(Re.jsx)(Le,{playerPosition:e.state.playerPosition,gameMap:e.state.currentMap,moveDirection:e.state.moveDirection,hitsLastRound:e.state.hitsLastRound,deathPositionsThisRound:e.state.deathPositionsThisRound,round:e.state.round,dispatch:e.dispatch,hoveredCreatureId:e.state.hoveredCreatureId}),a&&Object(Re.jsx)($t,{deathText:e.state.deathText})]})})})]}),Object(Re.jsxs)(vn,{style:{marginLeft:"15px",boxSizing:"border-box",display:"flex",flexDirection:"column"},children:[Object(Re.jsx)(pn,{actions:e.state.playerActions,dispatch:e.dispatch}),Object(Re.jsx)(Kt,{equipedItems:e.state.equipedItems}),Object(Re.jsx)(sn,{inventory:e.state.inventory})]})]}),Object(Re.jsx)(tn,{interactionText:"playing"===e.state.gameStatus?e.state.interactionText:""}),Object(Re.jsx)(yn,{children:Object(Re.jsxs)("div",{style:{color:"white"},children:["-- Depth ",e.state.depth," --"]})})]})},wn=l.a.div(st||(st=Object(s.a)(["\n  width: ","px;\n  height: ","px;\n  background-color: blue;\n"])),12,12),Cn=l.a.div(ut||(ut=Object(s.a)(["\n  width: ","px;\n  height: ","px;\n  background-color: black;\n  margin-left: auto;\n  margin-right: auto;\n"])),6,6),En=function(){return Object(Re.jsx)(wn,{children:Object(Re.jsx)(Cn,{})})},Pn=l.a.div(dt||(dt=Object(s.a)(["\n  border: solid 1px rgba(0, 0, 0, 0.1);\n  box-sizing: border-box;\n  width: ",";\n  height: ",";\n  min-width: ",";\n  min-height: ",";\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: ",";\n  font-size: 8px;\n  color: ",";\n"])),(function(e){return"".concat(e.cellWidth,"px")}),(function(e){return"".concat(e.cellWidth,"px")}),(function(e){return"".concat(e.cellWidth,"px")}),(function(e){return"".concat(e.cellWidth,"px")}),(function(e){return e.backgroundColor}),(function(e){return e.color})),kn=function(e){var t=e.burning,n=e.content,i=e.tileType,r=e.cellWidth,a=e.handleClick,o=e.creature,c=Y(i);return Object(Re.jsx)(Pn,{onClick:a,backgroundColor:(null===c||void 0===c?void 0:c.clearBackgroundColor)||L,cellWidth:r,color:o?"orange":(null===c||void 0===c?void 0:c.clearFontColor)||H,children:t?"^":"Player"===n?Object(Re.jsx)(En,{}):o?function(e){var t=k[e],n=t.imageSrc,i=t.spritePosition;return Object(Re.jsx)(Yt,{imageSrc:n,position:i,pixelDimensions:16})}(o):0!==n?function(){if(0!==n&&"Player"!==n){var e=X(n);return e&&Object(Re.jsx)(Yt,{imageSrc:e.imageSrc,position:e.spritePosition,pixelDimensions:16})}}():i})},Bn=l.a.div(lt||(lt=Object(s.a)(["\n  width: ",";\n  height: ",";\n  min-width: ",";\n  min-height: ",";\n  display: flex;\n  flex-wrap: wrap;\n  border: solid 1px black;\n  background-color: white;\n"])),(function(e){return"".concat(e.cellWidth*m,"px")}),(function(e){return"".concat(e.cellWidth*x,"px")}),(function(e){return"".concat(e.cellWidth*m,"px")}),(function(e){return"".concat(e.cellWidth*x,"px")})),Mn=function(e){var t=e.gameMap,n=e.handleCellClick;return Object(Re.jsx)(Bn,{cellWidth:j,children:t.map((function(e,t){return e.map((function(e,i){var r,a="".concat(i,"-").concat(t);return Object(Re.jsx)(kn,{creature:null===(r=e.creature)||void 0===r?void 0:r.type,content:e.content,moveDirection:"Up",tileType:e.tile,cellWidth:j,handleClick:function(){return n([i,t],e)},burning:e.burningRounds>0},a)}))}))})},Sn=l.a.div(pt||(pt=Object(s.a)(["\n  background-color: grey;\n  width: 170px;\n  height: 94%;\n  padding: 10px 10px;\n"]))),Rn=l.a.div(ht||(ht=Object(s.a)(["\n  display: flex;\n  align-items: center;\n  margin-bottom: 10px;\n  border: ",";\n  cursor: pointer;\n  height: 27px;\n  width: 128px;\n  padding: 3px 3px 3px 3px;\n"])),(function(e){return e.selected?"solid 2px blue":"solid 2px grey"})),Tn=l.a.div(ft||(ft=Object(s.a)(["\n  font-size: 12px;\n  margin-left: 10px;\n"]))),Dn={content:0,moveDirection:"Up",tileType:".",cellWidth:A,handleClick:function(){return!1},burning:!1},In=function(e){var t=Object(d.f)();return Object(i.useEffect)((function(){var n=new URLSearchParams(t.search).get("seed");if(n){var i=n.replace(/^0x/,"");e.setSeed(i),e.load()}}),[t.search,e.setSeed,e.load]),Object(Re.jsxs)(Sn,{children:[Object(Re.jsxs)("div",{style:{height:"80%",overflowY:"scroll"},children:[Object(Re.jsx)("p",{children:"Tiles"}),F.map((function(t){return Object(Re.jsxs)(Rn,{selected:e.selectedTile===t.type,onClick:function(){return e.handleSelectedTile(t.type)},children:[Object(Re.jsx)(kn,Object(Q.a)(Object(Q.a)({},Dn),{},{tileType:t.type})),Object(Re.jsx)(Tn,{children:t.name})]},t.name)})),Object(Re.jsx)("p",{children:"Contents"}),Object(Re.jsxs)(Rn,{selected:"Player"===e.selectedContent,onClick:function(){return e.handleSelectedContent("Player")},children:[Object(Re.jsx)(kn,Object(Q.a)(Object(Q.a)({},Dn),{},{tileType:".",content:"Player"})),Object(Re.jsx)(Tn,{children:"Player"})]}),W.map((function(t){return Object(Re.jsxs)(Rn,{selected:e.selectedContent===t.type,onClick:function(){return e.handleSelectedContent(t.type)},children:[Object(Re.jsx)(kn,Object(Q.a)(Object(Q.a)({},Dn),{},{tileType:".",content:t.type})),Object(Re.jsx)(Tn,{children:t.type})]},t.type)})),Object(Re.jsx)("p",{children:"Creatures"}),Object.keys(k).map((function(t){var n=t;return Object(Re.jsxs)(Rn,{selected:e.selectedCreature===n,onClick:function(){return e.handleSelectedCreature(n)},children:[Object(Re.jsx)(kn,Object(Q.a)(Object(Q.a)({},Dn),{},{tileType:".",creature:n})),Object(Re.jsx)(Tn,{children:n})]},n)})),Object(Re.jsx)("p",{children:"Effects"}),Object(Re.jsx)(Rn,{selected:"burn"===e.selectedEffect,onClick:function(){return e.handleSelectedEffect("burn")},children:Object(Re.jsx)(Tn,{children:"Burn"})})]}),Object(Re.jsxs)("div",{style:{height:"20%"},children:[Object(Re.jsx)(u.b,{to:"/play",children:"PLAY"}),Object(Re.jsx)("br",{}),Object(Re.jsx)("button",{style:{marginTop:15},onClick:function(){var t="".concat("https://map-nft.rootmud.xyz/","?seed=").concat(e.seed);window.open(t,"_blank")},children:"Mint as NFT"}),Object(Re.jsx)("br",{}),Object(Re.jsx)("button",{style:{marginTop:15},onClick:e.load,children:"See NFTs Gallery"}),Object(Re.jsx)("input",{style:{marginTop:15},value:e.seed,onChange:function(t){return e.setSeed(t.target.value.replace(/^0x/,""))},placeholder:"Enter seed or use URL param"}),Object(Re.jsx)("button",{style:{marginTop:15},onClick:e.load,children:"Load from seed"})]})]})},Qn=l.a.div(gt||(gt=Object(s.a)(["\n  display: flex;\n  width: 100%;\n  height: 100%;\n  align-items: center;\n  user-select: none;\n"]))),Ln=function(e){var t=r.a.useState(null),n=Object(c.a)(t,2),i=n[0],a=n[1],o=r.a.useState(null),s=Object(c.a)(o,2),u=s[0],d=s[1],l=r.a.useState(null),p=Object(c.a)(l,2),h=p[0],f=p[1],g=r.a.useState(null),b=Object(c.a)(g,2),A=b[0],j=b[1],m=r.a.useState(""),x=Object(c.a)(m,2),v=x[0],y=x[1],O=function(t){var n=ge()(t),i=Ce(n);e.dispatch(ne(t)),e.dispatch(te(i.gameMap)),e.dispatch(ie(i.playerSpawn))};if(r.a.useEffect((function(){var e=Ee();y(e),O(e)}),[]),0===e.state.currentMap.length)return Object(Re.jsx)("div",{children:"loading..."});var w=function(){a(null),d(null),f(null),j(null)};return Object(Re.jsxs)(Qn,{children:[Object(Re.jsx)(In,{selectedTile:i,handleSelectedTile:function(e){w(),a(e)},selectedContent:u,handleSelectedContent:function(e){w(),d(e)},selectedCreature:h,handleSelectedCreature:function(e){w(),f(e)},selectedEffect:A,handleSelectedEffect:function(e){w(),j(e)},seed:v,setSeed:y,load:function(){return O(v)}}),Object(Re.jsx)(Mn,{gameMap:e.state.currentMap,handleCellClick:function(t,n){var r=Object(Q.a)({},n);i&&(r.tile=i),u&&(r.content?r.content=0:r.content=u),h&&(r.creature?delete r.creature:r.creature={id:"temp_id",type:h}),A&&(0===r.burningRounds?r.burningRounds=30:r.burningRounds=0),e.dispatch(re({position:t,cellData:r}))}})]})},Hn=l.a.div(bt||(bt=Object(s.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: black;\n  height: 100%;\n  width: 100%;\n  font-family: UglyTerminal;\n"]))),Fn=function(){var e=Object(p.a)(he,pe),t=Object(c.a)(e,2),n=t[0],i=t[1],a=Object(h.a)(f,{src:f,loop:!0,volume:.1}),o=Object(c.a)(a,2),s=o[0],l=o[1],A=l.stop,j=l.sound,m=Object(h.a)(g,{volume:.6}),x=Object(c.a)(m,1)[0],v=It(),y=r.a.useState(true),O=Object(c.a)(y,2),w=O[0],C=O[1];return r.a.useEffect((function(){v&&w&&s()}),[v]),r.a.useEffect((function(){!1===w?A():s()}),[w]),r.a.useEffect((function(){if("gameover"===n.gameStatus&&(j&&j.fade(.1,0,b),w)){var e=setTimeout((function(){x()}),b);return function(){clearTimeout(e)}}}),[n.gameStatus,w]),Object(Re.jsx)(Hn,{children:Object(Re.jsx)(u.a,{children:Object(Re.jsxs)(d.c,{children:[Object(Re.jsx)(d.a,{exact:!0,path:"/map-editor",children:Object(Re.jsx)(Ln,{state:n,dispatch:i})}),Object(Re.jsx)(d.a,{exact:!0,path:"/",children:Object(Re.jsx)(On,{state:n,dispatch:i,withBackgroundMusic:w,setWithBackgroundMusic:C})})]})})})};o.a.render(Object(Re.jsx)(Fn,{}),document.getElementById("root"))}},[[329,1,2]]]);
//# sourceMappingURL=main.edd4c1f0.chunk.js.map