{"version":3,"sources":["assets/music/crystal-cave-song.mp3","assets/music/no-hope.mp3","constants/config.ts","utils/getAdjacentPositions.ts","utils/getDijkstraMap.ts","game-logic/initRound.ts","assets/images/roguelikecreatures.png","constants/creatures.ts","utils/isInsideCircle.ts","utils/line.ts","game-logic/performCreaturesActions.ts","utils/getRandomIntInclusive.ts","constants/conditions.ts","constants/tiles.ts","utils/getSurroundingPositions.ts","game-logic/tick.ts","game-logic/resolveConditions.ts","game-logic/updateBurningTiles.ts","game-logic/resolveStartingAndEndingConditions.ts","game-logic/checkCreaturesDeath.ts","game-logic/checkWaitStreak.ts","game-logic/reduceDoPlayerAction.ts","assets/images/roguelikeitems.png","constants/items.ts","game-logic/reduceHoverCell.ts","game-logic/reduceInitCreatures.ts","game-logic/updateVisibility.ts","utils/getVisibility.ts","game-logic/reduceMovePlayer.ts","game-logic/lootItem.ts","game-logic/reduceUpdateCell.ts","game-logic/game.ts","utils/findCellsInArea.ts","utils/shuffleArray.ts","pcg/horizontalSplitArea.ts","pcg/verticalSplitArea.ts","pcg/generateLevel.ts","utils/walkGrid.ts","pcg/getRandomAreaWithinArea.ts","utils/getRandomString.ts","game-ui/Canvas/Flame.tsx","game-ui/Canvas/CanvasCell.tsx","game-ui/Canvas/Player.tsx","game-ui/Canvas/Canvas.tsx","assets/images/flames.png","constants/playerActions.ts","game-ui/hooks/useGameKeys.ts","assets/sounds/attack.wav","assets/sounds/crit.wav","assets/sounds/goblin_attack.wav","assets/sounds/goblin_death.wav","assets/sounds/goblin_pain.wav","assets/sounds/lootBigGold.ogg","assets/sounds/lootSmallGold.ogg","assets/sounds/miss.wav","assets/sounds/rat_attack.ogg","assets/sounds/rat_death.ogg","assets/sounds/rat_pain.ogg","assets/sounds/stairs.ogg","game-ui/hooks/useDetectUserInput.ts","game-ui/Shared/DoubleBorders.tsx","game-ui/Shared/Sprite.tsx","game-ui/Game/CreatureBlocks.tsx","game-ui/Game/EquipedItems.tsx","game-ui/Game/EventLogs.tsx","game-ui/Game/GameOver.tsx","game-ui/Game/InteractionText.tsx","game-ui/Game/Inventory.tsx","game-ui/Game/PlayerActions.tsx","assets/images/rpgicons.png","game-ui/Game/PlayerStats.tsx","game-ui/Game/ShakeLayer.tsx","game-ui/Game/Viewport.tsx","game-ui/Game/Game.tsx","game-ui/hooks/useAreFontsLoaded.ts","game-ui/hooks/useSoundsManager.ts","utils/sortCreatures.ts","game-ui/MapGenerator/Player.tsx","game-ui/MapGenerator/Cell.tsx","game-ui/MapGenerator/Map.tsx","game-ui/MapGenerator/Toolbar.tsx","game-ui/MapGenerator/MapGenerator.tsx","App.tsx","index.tsx"],"names":["GAMEOVER_FADEOUT_DURATION","CELL_WIDTH_IN_PIXELS","CELL_WIDTH_MAP_GENERATOR","GRID_WIDTH","GRID_HEIGHT","PLAYER_BASE_ATTACK","getAdjacentPositions","p","mapWidth","mapHeight","Math","max","min","getDijkstraMap","map","target","length","result","row","cell","frontier","distance","newFrontier","forEach","position","String","obj","JSON","stringify","includes","push","initRound","draft","interactionText","hitsLastRound","deathPositionsThisRound","sounds","playerPreviousPosition","playerPosition","CREATURES","goblin","type","maxHp","spritePosition","imageSrc","roguelikecreatures","baseAttack","baseAC","aggroRange","spawnNumber","traits","rat","isInsideCircle","center","radius","dx","dy","lerp","start","end","t","lerpPoint","p0","p1","line","positions","N","abs","diagonalDistance","step","round","performCreaturesActions","currentMap","Object","entries","creatures","entity","adjacentPositions","template","console","log","hitRoll","DiceRoll","total","eventLogs","isCriticalHit","dice","damage","creatureId","hp","waitStreak","deathText","depth","gameStatus","attackPlayer","filter","tile","status","shuffledEmptyAdjacentPositions","sort","random","creature","distances","dijkstraMap","Infinity","Number","nextDistance","nextPosition","findIndex","d","currentDistance","id","walkingDistanceToPlayer","tryMove","getRandomIntInclusive","rng","getRandom","ceil","floor","CONDITIONS","duration","NON_REVEALED_BACKGROUND_COLOR","DEFAULT_FONT_COLOR","TILES","name","nameInSentence","clearBackgroundColor","dimBackgroundColor","clearFontColor","dimFontColor","canWalkThrough","flammability","getTile","tileType","find","getSurroundingPositions","options","top","bottom","left","right","y","x","tick","playerConditions","burning","activeRounds","damagePercentage","BURNING_DAMAGE_PERCENTAGE","fireDamage","resolveConditions","startedBurningTiles","nextMap","arr","slice","j","cellData","i","burningRounds","some","NUMBER_OF_ROUNDS_BURNING","nextBurningRounds","updateBurningTiles","resolveStartingAndEndingConditions","key","value","checkCreaturesDeath","checkWaitStreak","reduceDoPlayerAction","playerAction","playerActions","ITEMS","roguelikeitems","getItem","itemType","item","reduceHoverCell","payload","visibility","revealed","content","creatureDiedThisRound","hoveredCreatureId","object","verb","location","reduceInitCreatures","creatureData","uuid","conditions","updateVisibility","gameMap","newGameMap","maxClearVisibility","maxVisibility","posX","posY","numberOfInBetweenOpaqueTiles","getVisibility","moveToNewPosition","amount","SMALL_GOLD_AMOUNT","gold","BIG_GOLD_AMOUNT","inventory","lootItem","reduceMovePlayer","moveDirection","nextTileX","nextTileY","getNextPosition","nextTileType","nextTile","creatureAC","attackCreature","getCanWalkToNextPosition","tileNameInSentence","moveAndStayAtSamePosition","reduceUpdateCell","gameActions","direction","seed","playerSpawn","INITIAL_STATE","characterName","equipedItems","game","action","findCellsInArea","area","cellTile","origin","shuffleArray","array","randomIndex","currentIndex","horizontalSplitArea","verticalSplitArea","fullMap","connectLeaves","leafA","leafB","newMap","candidatesA","positionA","candidatesB","nx","ny","signX","signY","ix","iy","walkGrid","connectAdjacentLeaves","leavesArray","index","leavesDepth","findGroundPositions","flat","generateMap","emptyMap","width","height","createEmptyMap","leaves","toggle","split","leaf","getLeavesArray","rooms","originalWidth","originalHeight","MINIMUM_ROOM_DIMENSION","originX","originY","getRandomAreaWithinArea","resultMap","room","placeRectangleOnMap","candidatePositions","placeDownwardStaircase","connectAllLeaves","generateLevel","candidatesSpawn","spawn","shuffledCandidatePositions","goldSpawnNumber","goldPositions","splice","hordesNumber","hordesPositions","spawnPositions","creatureType","pickCreatureType","surroundingCandidatePositions","shuffledSurroundingCandidatePositions","concat","undefined","getGoldSize","spawnType","createGameMap","getRandomString","toString","substring","Flame","flameImage","opacity","ref","node","isRunning","animation","animations","image","window","Image","frameRate","frameIndex","CanvasCell","dispatch","itemsImage","creaturesImage","highlighted","React","useState","hasBlinked","setHasBlinked","imageRef","useRef","wasHitLastRound","h","shouldBlink","getBackgroundColor","useEffect","current","tween","Konva","Tween","ANIMATIONS_DURATION","easing","Easings","BounceEaseInOut","fill","onFinish","play","pause","Item","crop","Creature","onMouseEnter","onMouseLeave","stroke","strokeWidth","renderDeadCreature","text","fontFamily","fontSize","renderTile","Player","frontXModifier","frontYModifier","rectRef","playerWidth","frontWidth","PAUSE_TIME_BETWEEN_MOVES","_useStrictMode","renderCells","cellsToSideX","NUMBER_OF_CELLS_IN_VIEWPORT_X","cellsToSideY","NUMBER_OF_CELLS_IN_VIEWPORT_Y","_row","_cellData","Canvas","memo","props","playerPositionX","playerPositionY","useImage","offsetX","offsetY","imageSmoothingEnabled","displayName","PLAYER_ACTIONS","gameKey","PLAYER_ACTION_SHORTCUTS","a","GAME_KEYS","useGameKeys","lastRoundDate","Date","now","handleKeyDown","event","preventDefault","mapKeyCodeToDirection","document","addEventListener","removeEventListener","useDetectUserInput","didUserInput","setDidUserInput","handleKeyPress","BorderA","styled","div","BorderB","DoubleBorders","children","Wrapper","pixelDimensions","Sprite","Block","handleMouseEnter","handleMouseLeave","hpPercentage","style","marginTop","paddingLeft","paddingRight","paddingTop","paddingBottom","background","display","marginLeft","backgroundColor","CreatureBlocks","entities","EquipedWrapper","Slot","ItemWrapper","PlaceholderSlot","EquipedItems","Log","EventLogs","GameOver","marginBottom","InteractionText","Items","SingleItemWrapper","renderItemSlot","Inventory","itemSlots","renderItemSlots","ActionWrapper","renderActionLabel","hasColoredLetter","char","color","Actions","actions","onClick","PlayerStats","burningPercentage","rpgicons","alignItems","ShakeLayer","shakeClass","setShakeClass","shake","timer","setTimeout","clearTimeout","className","Viewport","setOpacity","nextDepthClass","setNextDepthClass","gameoverClass","setGameoverClass","InnerWrapper","SideWrapper","BottomBar","Game","areFontsLoaded","setAreFontsLoaded","font","FontFaceObserver","Promise","all","load","then","useAreFontLoaded","state","useSound","crit","playCrit","attack","volume","playAttack","miss","playMiss","lootCoins","playLootCoins","lootManyCoins","playLootManyCoins","stairs","playStairs","ratAttack","playRatAttack","ratPain","playRatPain","ratDeath","playRatDeath","goblinAttack","playGoblinAttack","goblinPain","playGoblinPain","goblinDeath","soundPlayer","sound","useSoundsManager","showGameOver","setShowGameover","initMap","seedrandom","level","initGameState","visibleEntities","keys","v","b","hit","marginRight","boxSizing","flexDirection","withBackgroundMusic","setWithBackgroundMusic","Front","cellWidth","Cell","handleClick","renderCreature","renderItem","Map","handleCellClick","col","CellWrapper","selected","Label","defaultCellProps","Toolbar","useLocation","seedFromUrl","URLSearchParams","search","get","trimmedSeed","replace","setSeed","overflowY","selectedTile","handleSelectedTile","selectedContent","handleSelectedContent","selectedCreature","handleSelectedCreature","selectedEffect","handleSelectedEffect","to","url","open","onChange","placeholder","MapGenerator","setSelectedTile","setSelectedContent","setSelectedCreature","setSelectedEffect","currentSeed","setCurrentSeed","resetSelected","effect","updatedCellData","App","useImmerReducer","crystalCaveSong","src","loop","stop","gameoverSong","playGameover","fade","exact","path","ReactDOM","render","getElementById"],"mappings":"ogBAAe,MAA0B,8CCA1B,MAA0B,oCCS5BA,EAA4B,IAE5BC,EAAuB,GAMvBC,EAA2B,GAE3BC,EAAa,GACbC,EAAc,GAkBdC,EAAqB,QCpCrBC,EAAuB,SAClCC,EACAC,EACAC,GAMA,MAAO,CAJc,CAACF,EAAE,GAAIG,KAAKC,IAAI,EAAGJ,EAAE,GAAK,IACxB,CAACA,EAAE,GAAIG,KAAKE,IAAIH,EAAY,EAAGF,EAAE,GAAK,IACtC,CAACG,KAAKC,IAAI,EAAGJ,EAAE,GAAK,GAAIA,EAAE,IACzB,CAACG,KAAKE,IAAIL,EAAE,GAAK,EAAGC,EAAW,GAAID,EAAE,MCGlDM,EAAiB,SAACC,EAAmBC,GAWhD,IATA,IAAMP,EAAWM,EAAI,GAAGE,OAClBP,EAAYK,EAAIE,OAChBC,EAAqBH,EAAIA,KAAI,SAACI,GAAD,OAASA,EAAIJ,KAAI,SAACK,GAAD,MAAoB,MAATA,EAAe,IAAM,SAEhFC,EAAuB,CAACL,GAExBM,EAAW,EARkE,aAY/E,IAAMC,EAA0B,GAEhCF,EAASG,SAAQ,SAACC,GAChBP,EAAOO,EAAS,IAAIA,EAAS,IAAMC,OANbJ,GAOIf,EAAqBkB,EAAUhB,EAAUC,GACjDc,SAAQ,SAAChB,GACD,MAApBO,EAAIP,EAAE,IAAIA,EAAE,KAAsC,KAAvBU,EAAOV,EAAE,IAAIA,EAAE,MAGvCe,EAAYR,KAAI,SAACY,GAAD,OAASC,KAAKC,UAAUF,MAAMG,SAASF,KAAKC,UAAUrB,KACzEe,EAAYQ,KAAKvB,UAKzBc,IACAD,EAAQ,UAAOE,IAjBU,IAApBF,EAASJ,QAAe,IAqB/B,OAAOC,GC3CIc,EAAY,SAACC,GACxBA,EAAMC,gBAAkB,GACxBD,EAAME,cAAgB,GACtBF,EAAMG,wBAA0B,GAChCH,EAAMI,OAAS,GACfJ,EAAMK,uBAAyBL,EAAMM,gB,gBCPxB,m6TCiCFC,EAA+C,CAE1DC,OAAQ,CACNC,KAAM,SACNC,MAAO,GACPC,eAAgB,CAAC,EAAG,GACpBC,SAAUC,EACVC,WAAY,QACZC,OAAQ,EACRC,WAAY,EACZC,YAAa,EACbC,OAAQ,IAGVC,IAAK,CACHV,KAAM,MACNC,MAAO,GACPC,eAAgB,CAAC,EAAG,GACpBC,SAAUC,EACVC,WAAY,MACZC,OAAQ,GACRC,WAAY,GACZC,YAAa,EACbC,OAAQ,CAAC,eChDAE,EAAiB,SAAC,GAAoD,IAAlDC,EAAiD,EAAjDA,OAAQ7B,EAAyC,EAAzCA,SAAU8B,EAA+B,EAA/BA,OAC3CC,EAAKF,EAAO,GAAK7B,EAAS,GAC1BgC,EAAKH,EAAO,GAAK7B,EAAS,GAEhC,OADwB+B,EAAKA,EAAKC,EAAKA,GACbF,EAASA,GCE/BG,EAAO,SAACC,EAAeC,EAAaC,GACxC,OAAOF,EAAQE,GAAKD,EAAMD,IAGtBG,EAAY,SAACC,EAAcC,EAAcH,GAC7C,MAAO,CAACH,EAAKK,EAAG,GAAIC,EAAG,GAAIH,GAAIH,EAAKK,EAAG,GAAIC,EAAG,GAAIH,KAGvCI,EAAO,SAACF,EAAcC,GAGjC,IAFA,IAbqBxD,EAaf0D,EAAwB,GACxBC,EApBiB,SAACJ,EAAcC,GACtC,IAAMR,EAAKQ,EAAG,GAAKD,EAAG,GAChBN,EAAKO,EAAG,GAAKD,EAAG,GACtB,OAAOpD,KAAKC,IAAID,KAAKyD,IAAIZ,GAAK7C,KAAKyD,IAAIX,IAiB7BY,CAAiBN,EAAIC,GACtBM,EAAO,EAAGA,GAAQH,EAAGG,IAAQ,CACpC,IAAMT,EAAU,IAANM,EAAU,EAAMG,EAAOH,EACjCD,EAAUnC,MAjBSvB,EAiBUsD,EAAUC,EAAIC,EAAIH,GAhB1C,CAAClD,KAAK4D,MAAM/D,EAAE,IAAKG,KAAK4D,MAAM/D,EAAE,OAkBvC,OAAO0D,GCyFIM,EAA0B,SAACvC,GACtC,IAAMxB,EAAWwB,EAAMwC,WAAW,GAAGxD,OAC/BP,EAAYuB,EAAMwC,WAAWxD,OAEnCyD,OAAOC,QAAQ1C,EAAM2C,WAAWpD,SAAQ,YAAiB,IAAbqD,EAAY,oBAChDC,EAAoBvE,EAAqBsE,EAAOpD,SAAUhB,EAAUC,GACpEqE,EAAWvC,EAAUqC,EAAOnC,MAEhCoC,EACG/D,KAAI,SAACP,GAAD,OAAOoB,KAAKC,UAAUrB,MAC1BsB,SAASF,KAAKC,UAAUI,EAAMK,yBArHlB,SAACL,EAAkB8C,GAGtCC,QAAQC,IAAI,cACZ,IAAMC,EAAU,IAAIC,WAAS,OAC7B,GAAID,EAAQE,MRuBgB,GQtB1BnD,EAAMoD,UAAUtD,KAAhB,cAA4BgD,EAASrC,KAArC,qBADF,CAKA,IAAM4C,EAAkC,KAAlBJ,EAAQE,MACxBG,EAAOD,EAAa,UAAMP,EAAShC,WAAf,MAAgCgC,EAAShC,WAE7DyC,EADa,IAAIL,WAASI,GACNH,MAC1BnD,EAAME,cAAcJ,KAAK,CAAE0D,WAAY,SAAUD,WACjDvD,EAAMyD,GAAK/E,KAAKC,IAAIqB,EAAMyD,GAAKF,EAAQ,GACvCvD,EAAM0D,WAAa,EACnB1D,EAAMoD,UAAUtD,KAAhB,UACKuD,EAAgB,UAAY,GADjC,eAC0CP,EAASrC,KADnD,yBACwE8C,EADxE,aAGAvD,EAAMI,OAAON,KAAb,UAAqBgD,EAASrC,KAA9B,WACiB,IAAbT,EAAMyD,KACRzD,EAAMoD,UAAUtD,KAAK,aACrBE,EAAM2D,UAAN,sBAAiCb,EAASrC,KAA1C,qBAA2DT,EAAM4D,MAAjE,KACA5D,EAAM6D,WAAa,aA+FjBC,CAAa9D,EAAO8C,GA3FV,SACd9C,EACA4C,EACAE,EACAD,GASA,GANuBzB,EAAe,CACpCC,OAAQrB,EAAMM,eACdd,SAAUoD,EAAOpD,SACjB8B,OAAQwB,EAAS9B,cAwBnB,IAfK8B,EAAS5B,OAAOrB,SAAS,cAOoB,IANnBmC,EAAKY,EAAOpD,SAAUQ,EAAMM,gBAAgByD,QACvE,SAACxF,GAAD,MAA6C,MAAtCyB,EAAMwC,WAAWjE,EAAE,IAAIA,EAAE,IAAIyF,QAIoBhF,UAM1D4D,EAAOqB,OAAS,WAGI,SAAlBrB,EAAOqB,OAAX,CAIA,IAGMC,EAH4BrB,EAAkBsB,MAAK,kBAAMzF,KAAK0F,SAAW,MAGdL,QAAO,SAACvE,GACvE,OAAQQ,EAAMwC,WAAWhD,EAAS,IAAIA,EAAS,IAAI6E,YAI/CC,EAAYJ,EAA+BpF,KAAI,SAACP,GACpD,MAAyC,MAAlCyB,EAAMuE,YAAYhG,EAAE,IAAIA,EAAE,IAAciG,IAAWC,OAAOzE,EAAMuE,YAAYhG,EAAE,IAAIA,EAAE,QAGvFmG,EAAehG,KAAKE,IAAL,MAAAF,KAAI,YAAQ4F,IACjC,GAAqB,IAAjBI,GAAsBA,IAAiBF,IAA3C,CAIA,IACMG,EAAeT,EADKI,EAAUM,WAAU,SAACC,GAAD,OAAOA,IAAMH,MAIrDI,EAAkBL,OAAOzE,EAAMuE,YAAY3B,EAAOpD,SAAS,IAAIoD,EAAOpD,SAAS,KACjF8E,EAAUP,QAAO,SAACc,GAAD,OAAOA,IAAML,OAAUxF,QAAU,GAAK0F,EAAeI,GAItE9E,EAAMG,wBAAwBrB,IAAIW,QAAQI,SAASJ,OAAOkF,MAM9D3E,EAAMwC,WAAWmC,EAAa,IAAIA,EAAa,IAAIN,SAAW,CAC5DU,GAAInC,EAAOmC,GACXtE,KAAMmC,EAAOnC,aAERT,EAAMwC,WAAWI,EAAOpD,SAAS,IAAIoD,EAAOpD,SAAS,IAAI6E,SAChEzB,EAAOpD,SAAWmF,EAClB/B,EAAOoC,wBAA0BN,UA9D/B9B,EAAOqB,OAAS,OA+EdgB,CAAQjF,EAAO4C,EAAQE,EAAUD,OCpI1BqC,EAAwB,SAACtG,EAAaD,EAAawG,GAC9D,IAAMC,EAAYD,GAAYzG,KAAK0F,OAGnC,OAFAxF,EAAMF,KAAK2G,KAAKzG,GAChBD,EAAMD,KAAK4G,MAAM3G,GACVD,KAAK4G,MAAMF,KAAezG,EAAMC,EAAM,GAAKA,ICMvC2G,EACF,CACPC,SAAU,I,QCZDC,EAAgC,eAChCC,EAAqB,UAmBrBC,EAAgB,CAC3B,CACElF,KAAM,IACNmF,KAAM,OACNC,eAAgB,WAChBC,qBAAsB,eACtBC,mBAAoB,eACpBC,eAAgBN,EAChBO,aAAc,UACdC,gBAAgB,EAChBC,aAAc,GAEhB,CACE1F,KAAM,IACNmF,KAAM,OACNC,eAAgB,SAChBC,qBAAsB,UACtBC,mBAAoB,UACpBC,eAAgB,QAChBC,aAAc,QACdC,gBAAgB,EAChBC,aAAc,GAEhB,CACE1F,KAAM,IACNmF,KAAM,SACNC,eAAgB,aAChBC,qBAAsB,UACtBC,mBAAoB,UACpBC,eAAgBN,EAChBO,aAAc,UACdC,gBAAgB,EAChBC,aAAc,GAEhB,CACE1F,KAAM,IACNmF,KAAM,QACNC,eAAgB,sBAChBC,qBAAsB,UACtBC,mBAAoB,UACpBC,eAAgBN,EAChBO,aAAc,UACdC,gBAAgB,EAChBC,aAAc,GAEhB,CACE1F,KAAM,IACNmF,KAAM,aACNC,eAAgB,gBAChBC,qBAAsB,UACtBC,mBAAoB,UACpBC,eAAgB,UAChBC,aAAc,UACdC,gBAAgB,EAChBC,aAAc,KAEhB,CACE1F,KAAM,IACNmF,KAAM,QACNC,eAAgB,aAChBC,qBAAsB,UACtBC,mBAAoB,UACpBC,eAAgB,UAChBC,aAAc,UACdC,gBAAgB,EAChBC,aAAc,KAEhB,CACE1F,KAAM,IACNmF,KAAM,QACNC,eAAgB,kBAChBC,qBAAsB,UACtBC,mBAAoB,UACpBC,eAAgB,OAChBC,aAAc,UACdC,gBAAgB,EAChBC,aAAc,GAEhB,CACE1F,KAAM,IACNmF,KAAM,oBACNC,eAAgB,uBAChBC,qBAAsB,UACtBC,mBAAoB,UACpBC,eAAgB,UAChBC,aAAc,UACdC,gBAAgB,EAChBC,aAAc,IAILC,EAAU,SAACC,GACtB,OAAOV,EAAMW,MAAK,SAACtC,GAAD,OAAUA,EAAKvD,OAAS4F,MCpG/BE,EAA0B,SAACC,GAUtC,IAV+F,IACvFhH,EAA0CgH,EAA1ChH,SAAU8B,EAAgCkF,EAAhClF,OAAQ9C,EAAwBgI,EAAxBhI,SAAUC,EAAc+H,EAAd/H,UAC9BwD,EAAwB,GAExBwE,EAAM/H,KAAK4G,MAAM9F,EAAS,GAAK8B,GAC/BoF,EAAShI,KAAK2G,KAAK7F,EAAS,GAAK8B,GACjCqF,EAAOjI,KAAK4G,MAAM9F,EAAS,GAAK8B,GAChCsF,EAAQlI,KAAK2G,KAAK7F,EAAS,GAAK8B,GAG7BuF,EAAIJ,EAAKI,GAAKH,EAAQG,IAC7B,IAAK,IAAIC,EAAIH,EAAMG,GAAKF,EAAOE,IACzB1F,EAAe,CAAEC,OAAQ7B,EAAUA,SAAU,CAACsH,EAAGD,GAAIvF,YACnDwF,GAAK,GAAKD,GAAK,GAAKC,EAAItI,GAAYqI,EAAIpI,GAC1CwD,EAAUnC,KAAK,CAACgH,EAAGD,IAM3B,OAAO5E,GCxBI8E,EAAO,SAAC/G,GACnBA,EAAMsC,QCLyB,SAACtC,GAChC,GAAIA,EAAMgH,iBAAiBC,QACzB,GAAoD,IAAhDjH,EAAMgH,iBAAiBC,QAAQC,aACjClH,EAAMoD,UAAUtD,KAAK,oCACdE,EAAMgH,iBAAiBC,YACzB,CACL,IAAME,EAAmBjC,EACvBxG,KAAKE,IAAI,EAAGwI,GACZA,IAEIC,EAAa3I,KAAK2G,KAAKrF,EAAMU,OAASyG,EAAmB,MAC/DnH,EAAMyD,GAAK/E,KAAKC,IAAIqB,EAAMyD,GAAK4D,EAAY,GAC3CrH,EAAMoD,UAAUtD,KAAhB,qBAAmCuH,EAAnC,4BACiB,IAAbrH,EAAMyD,KACRzD,EAAMoD,UAAUtD,KAAK,yBACrBE,EAAM2D,UAAN,kCAA6C3D,EAAM4D,MAAnD,KACA5D,EAAM6D,WAAa,YAErB7D,EAAMgH,iBAAiBC,QAAQC,gBDZnCI,CAAkBtH,GAClBA,EAAMwC,WEF0B,SAAC1D,GACjC,IAAMyI,EAAkC,GAClCC,EAAU1I,EAAIA,KAAI,SAAC2I,GAAD,OAASA,EAAIC,WAC/BjJ,EAAY+I,EAAQxI,OACpBR,EAAWgJ,EAAQ,GAAGxI,OA2C5B,OAxCAwI,EAAQjI,SAAQ,SAACL,EAAKyI,GACpBzI,EAAIK,SAAQ,SAACqI,EAAUC,GAEnBD,EAASE,cAAgB,IACxBP,EAAoBQ,MAAK,SAACvI,GAAD,OAAcA,EAAS,KAAOqI,GAAKrI,EAAS,KAAOmI,MAQhDpB,EANmB,CAC9C/G,SAAU,CAACqI,EAAGF,GACdrG,OAAQ,EACR9C,WACAC,cAGmBc,SAAQ,SAAChB,GAC5B,GAAIoB,KAAKC,UAAUrB,KAAOoB,KAAKC,UAAU,CAACiI,EAAGF,KACD,IAAtCH,EAAQjJ,EAAE,IAAIA,EAAE,IAAIuJ,cAAqB,CAC3C,IAAM9D,EAAOoC,EAAQoB,EAAQjJ,EAAE,IAAIA,EAAE,IAAIyF,MACrCA,GAAQA,EAAKmC,aAAe,GAC1BzH,KAAK0F,SAAWJ,EAAKmC,eACvBoB,EAAoBzH,KAAKvB,GACzBiJ,EAAQjJ,EAAE,IAAIA,EAAE,IAAIuJ,cAAgBE,cAWpDR,EAAQjI,SAAQ,SAACL,EAAKyI,GACpBzI,EAAIK,SAAQ,SAACqI,EAAUC,GACrB,GAAID,EAASE,cAAgB,EAAG,CAC9B,IAAMG,EAAoBL,EAASE,cAAgB,EAC7CzB,EAAiC,IAAtB4B,EAA0B,IAAML,EAAS5D,KAC1DwD,EAAQG,GAAGE,GAAX,2BAAqBD,GAArB,IAA+BE,cAAeG,EAAmBjE,KAAMqC,WAItEmB,EF7CYU,CAAmBlI,EAAMwC,YGRI,SAACxC,GAC7CA,EAAMwC,WAAWxC,EAAMM,eAAe,IAAIN,EAAMM,eAAe,IAAIwH,cAAgB,IAChF9H,EAAMgH,iBAAiBC,SAC1BjH,EAAMoD,UAAUtD,KAAK,sBAEvBE,EAAMgH,iBAAiBC,QAAU,CAAEC,aAAc3B,EAAmBC,WHItE2C,CAAmCnI,GITF,SAACA,GAClC,cAA2ByC,OAAOC,QAAQ1C,EAAM2C,WAAhD,eAA4D,CAAC,IAAD,sBAAhDyF,EAAgD,KAA3CC,EAA2C,KACtDA,EAAM5E,IAAM,IACdzD,EAAMoD,UAAUtD,KAAhB,cAA4BuI,EAAM5H,KAAlC,WACAT,EAAMG,wBAAwBL,KAAKuI,EAAM7I,iBAClCQ,EAAM2C,UAAUyF,UAChBpI,EAAMwC,WAAW6F,EAAM7I,SAAS,IAAI6I,EAAM7I,SAAS,IAAI6E,SAC9DrE,EAAMI,OAAON,KAAb,UAAqBuI,EAAM5H,KAA3B,YJGJ6H,CAAoBtI,GACpBuC,EAAwBvC,GKZK,SAACA,GAC1BA,EAAMyD,GAAKzD,EAAMU,OACM,IAArBV,EAAM0D,YACR1D,EAAMoD,UAAUtD,KAAK,0BAEE,IAArBE,EAAM0D,YACR1D,EAAMoD,UAAUtD,KAAK,4BAEnBE,EAAM0D,YAAc,IACG,IAArB1D,EAAM0D,YACR1D,EAAMoD,UAAUtD,KAAK,iCAEvBE,EAAMyD,OAGiB,IAArBzD,EAAM0D,YACR1D,EAAMoD,UAAUtD,KAAK,sBLHzByI,CAAgBvI,IMXLwI,EAAuB,SAACxI,EAAkByI,IACF,IAA/CzI,EAAM0I,cAAc7I,SAAS4I,IAIZ,SAAjBA,IACF1I,EAAUC,GACVA,EAAM0D,aACNqD,EAAK/G,KCZM,MAA0B,2CCc5B2I,EAAgB,CAC3B,CACElI,KAAM,QACNE,eAAgB,CAAC,EAAG,GACpBC,SAAUgI,EACV/C,eAAgB,WAElB,CACEpF,KAAM,OACNE,eAAgB,CAAC,EAAG,GACpBC,SAAUgI,EACV/C,eAAgB,UAElB,CACEpF,KAAM,MACNE,eAAgB,CAAC,GAAI,GACrBC,SAAUgI,EACV/C,eAAgB,SAElB,CACEpF,KAAM,QACNE,eAAgB,CAAC,EAAG,GACpBC,SAAUgI,EACV/C,eAAgB,eAElB,CACEpF,KAAM,YACNE,eAAgB,CAAC,EAAG,GACpBC,SAAUgI,EACV/C,eAAgB,mBAIPgD,EAAU,SAACC,GACtB,OAAOH,EAAMrC,MAAK,SAACyC,GAAD,OAAUA,EAAKtI,OAASqI,MChC/BE,EAAkB,SAAChJ,EAAkBiJ,GAAqC,IAEnF5C,EAOE4C,EAPF5C,SACA6C,EAMED,EANFC,WACAC,EAKEF,EALFE,SACAC,EAIEH,EAJFG,QACAnC,EAGEgC,EAHFhC,QACA5C,EAEE4E,EAFF5E,SACAgF,EACEJ,EADFI,sBAGF,GAAgB,WAAZD,EAGF,OAFApJ,EAAMC,gBAAkB,oBACxBD,EAAMsJ,kBAAoB,UAI5B,IAAiB,IAAbH,GAAqC,SAAfD,EAA1B,CAIA,GAAI7E,GAA2B,SAAf6E,EAAuB,CAGrC,GAFAlJ,EAAMsJ,kBAAoBjF,EAASU,GAEhB,QAAfmE,EAEF,YADAlJ,EAAMC,gBAAkB,8CAG1B,GAAmB,UAAfiJ,EAEF,YADAlJ,EAAMC,gBAAN,oBAAqCoE,EAAS5D,KAA9C,MAKJ,GAAmB,QAAfyI,GAAyBC,GAAwB,IAAZC,EAAzC,CAKA,IAeIG,EAEe,EAEZ,EAnBHC,EAAO,MACPC,EAAW,GAgBf,GAdmB,SAAfP,GAAyBC,IAC3BK,EAAO,mBAGU,QAAfN,GAAwBC,IAC1BK,EAAO,mBAGU,QAAfN,IACFM,EAAO,oBAKO,IAAZJ,EACFG,EAAM,UAAGV,EAAQO,UAAX,aAAG,EAAkBvD,oBAE3B0D,EAAM,UAAGnD,EAAQC,UAAX,aAAG,EAAmBR,eAG1BwD,IACFE,EAAS,6BAGE,oBAATC,IACFC,EAAW,eAGb,IAAMxJ,EAAe,cAAUuJ,EAAV,YAAkBD,GAAlB,OACnBtC,GAA0B,SAAfiC,EAAwB,WAAa,IAD7B,OAElBO,EAFkB,KAIrBzJ,EAAMC,gBAAkBA,OAvCtBD,EAAMC,gBAAkB,yC,SC9CfyJ,EAAsB,SAAC1J,GAClCA,EAAMwC,WAAWjD,SAAQ,SAACL,EAAKyI,GAAN,OACvBzI,EAAIK,SAAQ,SAACqI,EAAUC,GACrB,IAAM8B,EAAe/B,EAASvD,SAC9B,GAAIsF,EAAc,CAChB,IAAM5E,EAAK6E,cACL9G,EAAWvC,EAAUoJ,EAAalJ,MAClC4D,EAA2B,CAC/BU,KACAtE,KAAMkJ,EAAalJ,KACnBjB,SAAU,CAACqI,EAAGF,GACdlE,GAAIX,EAASpC,MACbA,MAAOoC,EAASpC,MAChBmJ,WAAY,GACZ5F,OAAQ,OACRe,wBAAyBP,OAAOzE,EAAMuE,YAAYoD,GAAGE,KAEvD7H,EAAM2C,UAAUoC,GAAMV,EACtBrE,EAAMwC,WAAWmF,GAAGE,GAAGxD,SAAW,CAAEU,KAAItE,KAAMkJ,EAAalJ,cCjBtDqJ,EAAmB,SAACtK,EAAoBuK,GACnD,IAAMC,EAAaD,EACbtL,EAAYuL,EAAWhL,OACvBR,EAAWwL,EAAW,GAAGhL,OAoC/B,OAhCAgL,EAAWzK,SAAQ,SAACL,GAClBA,EAAIK,SAAQ,SAACJ,GACXA,EAAK+J,WAAa,aAMO3C,EADb,CAAE/G,WAAU8B,OxBKA,IwBLwB9C,WAAUC,cAIzCc,SAAQ,SAAChB,GAC5B,GAAKyL,EAAWzL,EAAE,KAAQyL,EAAWzL,EAAE,IAAIA,EAAE,IAA7C,CAIA,IAAM2K,ECfmB,SAAC,GAMF,IAL1B1J,EAKyB,EALzBA,SACAc,EAIyB,EAJzBA,eACAyJ,EAGyB,EAHzBA,QACAE,EAEyB,EAFzBA,mBACAC,EACyB,EADzBA,cACyB,cACJ1K,EADI,GAClB2K,EADkB,KACZC,EADY,KAIzB,GAA+C,MAA3CL,EAAQvK,EAAS,IAAIA,EAAS,IAAIwE,MAAgB1D,IAAmBd,EACvE,MAAO,QAIT,IAOM6K,EAPuBrI,EAAK,CAACmI,EAAMC,GAAO9J,GAAgByD,QAC9D,SAACxF,GAAD,MAC+B,MAA7BwL,EAAQxL,EAAE,IAAIA,EAAE,IAAIyF,MAEU,MAA7B+F,EAAQxL,EAAE,IAAIA,EAAE,IAAIyF,MAAgBrE,KAAKC,UAAUrB,KAAOoB,KAAKC,UAAUU,MAGpBtB,OAE1D,OAAIqL,GAAgC,IAEY,MAA3CN,EAAQvK,EAAS,IAAIA,EAAS,IAAIwE,MACU,MAA3C+F,EAAQvK,EAAS,IAAIA,EAAS,IAAIwE,OACS,MAA3C+F,EAAQvK,EAAS,IAAIA,EAAS,IAAIwE,MACS,MAA3C+F,EAAQvK,EAAS,IAAIA,EAAS,IAAIwE,OAClCqG,GAAgC,GAE3B,OAIPjJ,EAAe,CAAEC,OAAQf,EAAgBd,WAAU8B,OAAQ2I,IACtD,QAGL7I,EAAe,CAAEC,OAAQf,EAAgBd,WAAU8B,OAAQ4I,IACtD,MAGF,OD7BcI,CAAc,CAC/B9K,SAAUjB,EACV+B,eAAgBd,EAChBuK,QAASC,EACTC,mBxBT8B,IwBU9BC,cxBTwB,MwBW1BF,EAAWzL,EAAE,IAAIA,EAAE,IAAI2K,WAAaA,EAGL,UAAfA,IACmC,IAApCc,EAAWzL,EAAE,IAAIA,EAAE,IAAI4K,WACpCa,EAAWzL,EAAE,IAAIA,EAAE,IAAI4K,UAAW,OAI/Ba,GEmBHO,EAAoB,SAACvK,EAAkBR,GAC3CQ,EAAMwC,WAAWxC,EAAMM,eAAe,IAAIN,EAAMM,eAAe,IAAI8I,QAAU,ECtDvD,SAACpJ,EAAkBR,GACzC,IAAM4J,EAAUpJ,EAAMwC,WAAWhD,EAAS,IAAIA,EAAS,IAAI4J,QAC3D,GAAIA,GAAuB,WAAZA,EAAsB,CACnC,IAAML,EAAOF,EAAQO,GAGrB,GADArG,QAAQC,IAAI,YACR+F,EACF,GAAkB,UAAdA,EAAKtI,KAAkB,CACzB,IAAM+J,EAAStF,EACbuF,EACAA,IAEFzK,EAAM0K,KAAO1K,EAAM0K,KAAOF,EAC1BxK,EAAMoD,UAAUtD,KAAhB,oBAAkC0K,EAAlC,WACAxK,EAAMI,OAAON,KAAK,kBACb,GAAkB,cAAdiJ,EAAKtI,KAAsB,CACpC,IAAM+J,EAAStF,EACbyF,GACAA,KAEF3K,EAAM0K,KAAO1K,EAAM0K,KAAOF,EAC1BxK,EAAMoD,UAAUtD,KAAhB,oBAAkC0K,EAAlC,WACAxK,EAAMI,OAAON,KAAK,sBAElBE,EAAM4K,UAAU9K,KAAKsJ,GACrBpJ,EAAMoD,UAAUtD,KAAhB,oBAAkCiJ,EAAKlD,eAAvC,OD8BNgF,CAAS7K,EAAOR,GAChBQ,EAAMwC,WAAWhD,EAAS,IAAIA,EAAS,IAAI4J,QAAU,SACrDpJ,EAAMM,eAAiBd,EACvBQ,EAAMwC,WAAasH,EAAiBtK,EAAUQ,EAAMwC,YACpDxC,EAAMuE,YAAc1F,EAClBmB,EAAMwC,WAAW1D,KAAI,SAACI,GAAD,OAASA,EAAIJ,KAAI,SAAC8I,GAAD,OAAcA,EAAS5D,WAC7DxE,IAqCSsL,EAAmB,SAAC9K,EAAkB+K,GACjDhL,EAAUC,GAEVA,EAAM+K,cAAgBA,EACtB/K,EAAM0D,WAAa,EAEnB,IAAMiB,EAnGgB,SAAC3E,EAAkB+K,GACzC,IAAIC,EACAC,EACJ,OAAQF,GACN,IAAK,OACHC,EACEhL,EAAMM,eAAe,GAAK,EAAIN,EAAMM,eAAe,GAAK,EAAIN,EAAMM,eAAe,GACnF2K,EAAYjL,EAAMM,eAAe,GACjC,MACF,IAAK,QACH0K,EACEhL,EAAMM,eAAe,GAAKnC,EACtB6B,EAAMM,eAAe,GAAK,EAC1BN,EAAMM,eAAe,GAC3B2K,EAAYjL,EAAMM,eAAe,GACjC,MACF,IAAK,KACH0K,EAAYhL,EAAMM,eAAe,GACjC2K,EACEjL,EAAMM,eAAe,GAAK,EAAIN,EAAMM,eAAe,GAAK,EAAIN,EAAMM,eAAe,GACnF,MACF,IAAK,OACH0K,EAAYhL,EAAMM,eAAe,GACjC2K,EACEjL,EAAMM,eAAe,GAAKlC,GACtB4B,EAAMM,eAAe,GAAK,EAC1BN,EAAMM,eAAe,GAE/B,MAAO,CAAC0K,EAAWC,GAuEEC,CAAgBlL,EAAO+K,GACtCI,EAAenL,EAAMwC,WAAWmC,EAAa,IAAIA,EAAa,IAAIX,KAClEoH,EAAWhF,EAAQ+E,GACnB9G,EAAWrE,EAAMwC,WAAWmC,EAAa,IAAIA,EAAa,IAAIN,SAEpE,GAAIA,GAxCiB,SAACrE,EAAkB+E,EAAYtE,GAEpD,IAAM4K,EAAa9K,EAAUE,GAAMM,OAC7BkC,EAAU,IAAIC,WAAS,OAC7B,GAAID,EAAQE,MAAQkI,EAGlB,OAFArL,EAAMoD,UAAUtD,KAAhB,uBAAqCW,EAArC,WACAT,EAAMI,OAAON,KAAK,QAIpB,IAAMuD,EAAkC,KAAlBJ,EAAQE,MACxBG,EAAOD,EAAa,UAAMhF,EAAN,MAA+BA,EAEnDkF,EADa,IAAIL,WAASI,GACNH,MAC1BnD,EAAM2C,UAAUoC,GAAItB,GAAKzD,EAAM2C,UAAUoC,GAAItB,GAAKF,EAClDvD,EAAME,cAAcJ,KAAK,CAAE0D,WAAYuB,EAAIxB,WAC3CvD,EAAMoD,UAAUtD,KAAhB,UACKuD,EAAgB,UAAY,GADjC,uBACkD5C,EADlD,gBAC8D8C,EAD9D,aAGIF,EACFrD,EAAMI,OAAON,KAAK,QAElBE,EAAMI,OAAON,KAAK,UAEhBE,EAAM2C,UAAUoC,GAAItB,GAAK,GAC3BzD,EAAMI,OAAON,KAAb,UAAqBW,EAArB,SAgBA6K,CAAetL,EAAOqE,EAASU,GAAIV,EAAS5D,UACvC,IAAuB,OAAX,OAAR2K,QAAQ,IAARA,OAAA,EAAAA,EAAU3K,MAGnB,OAFAT,EAAMoD,UAAUtD,KAAhB,4BAA0CE,EAAM4D,MAAQ,EAAxD,MACA5D,EAAMI,OAAON,KAAK,eACNE,EAAM4D,SA9EW,SAC/B5D,EACA+K,EACAK,GAEA,OAAQL,GACN,IAAK,OACH,OAAO/K,EAAMM,eAAe,GAAK,IAAkC,KAArB,OAAR8K,QAAQ,IAARA,OAAA,EAAAA,EAAUlF,gBAClD,IAAK,QACH,OAAOlG,EAAMM,eAAe,GAAKnC,KAA+C,KAArB,OAARiN,QAAQ,IAARA,OAAA,EAAAA,EAAUlF,gBAC/D,IAAK,KACH,OAAOlG,EAAMM,eAAe,GAAK,IAAkC,KAArB,OAAR8K,QAAQ,IAARA,OAAA,EAAAA,EAAUlF,gBAClD,IAAK,OACH,OAAOlG,EAAMM,eAAe,GAAKlC,KAAgD,KAArB,OAARgN,QAAQ,IAARA,OAAA,EAAAA,EAAUlF,iBAkEvDqF,CAAyBvL,EAAO+K,EAAeK,GAlD1B,SAACpL,EAAkBwL,GACnDxL,EAAMC,gBAAN,kBAAmCuL,GAAsB,GAAzD,KAoDEC,CAA0BzL,EAAD,OAAQoL,QAAR,IAAQA,OAAR,EAAQA,EAAUvF,gBAF3C0E,EAAkBvK,EAAO2E,GAK3BoC,EAAK/G,IE3HM0L,EAAmB,SAAC1L,EAAkBiJ,GAAsC,IAC/EzJ,EAAuByJ,EAAvBzJ,SAAUoI,EAAaqB,EAAbrB,SAClB5H,EAAMwC,WAAWhD,EAAS,IAAIA,EAAS,IAAMoI,GC+ElC+D,GAxDM,SAACC,GAAD,MAA2C,CAC5DnL,KAAM,qBACNmL,cAsDWD,GAnDS,SAACnJ,GAAD,MAA2C,CAC/D/B,KAAM,yBACN+B,eAiDWmJ,GA9CG,SAACE,GAAD,MAA+B,CAC7CpL,KAAM,kBACNoL,SA4CWF,GAzCW,SAACG,GAAD,MAAwC,CAC9DrL,KAAM,2BACNqL,gBAuCWH,GApCM,SAAC1C,GAAD,MAA6C,CAC9DxI,KAAM,qBACNwI,YAkCW0C,GA/BU,iBAAmB,CACxClL,KAAM,2BA8BKkL,GA3BS,iBAAmB,CACvClL,KAAM,0BA0BKkL,GAvBK,SAAC1C,GAAD,MAA4C,CAC5DxI,KAAM,oBACNwI,YAqBW0C,GAlBa,iBAAmB,CAC3ClL,KAAM,gCAiBKkL,GAdc,SAACnI,GAAD,MAAqC,CAC9D/C,KAAM,8BACN+C,eAYWmI,GATsB,iBAAmB,CACpDlL,KAAM,0CAQKkL,GALU,SAAClD,GAAD,MAAuC,CAC5DhI,KAAM,0BACNgI,iBAiDWsD,GAA2B,CACtCvJ,WAAY,GACZ+B,YAAa,GACbsH,KAAM,GACNhI,WAAY,UACZD,MAAO,EACPtB,MAAO,EACPqB,UAAW,GACXoH,cAAe,QACfiB,cAAe,WACf/L,gBAAiB,yBACjBmD,UAAW,GACXT,UAAW,GACXrC,eAAgB,CAAC,EAAG,GACpBD,uBAAwB,CAAC,EAAG,GAC5BoD,G7B5H4B,I6B6H5B/C,M7B7H4B,I6B8H5BuL,aAAc,GACdrB,UAAW,GACXF,KAAM,EACN1D,iBAAkB,GAClB9G,cAAe,GACfC,wBAAyB,GACzBmJ,kBAAmB,GACnBlJ,OAAQ,GACRsD,WAAY,EACZgF,cAAe,CAAC,SAKLwD,GAAO,WAAkE,IAAjElM,EAAgE,uDAAxD+L,GAAeI,EAAyC,uCACnF,OAAQA,EAAO1L,MACb,IAAK,qBACH,OAAOqK,EAAiB9K,EAAOmM,EAAOP,WACxC,IAAK,yBACH,YAAa5L,EAAMwC,WAAa2J,EAAO3J,YACzC,IAAK,kBACH,YAAaxC,EAAM6L,KAAOM,EAAON,MACnC,IAAK,2BAMH,OALA7L,EAAMuE,YAAc1F,EAClBmB,EAAMwC,WAAW1D,KAAI,SAACI,GAAD,OAASA,EAAIJ,KAAI,SAAC8I,GAAD,OAAcA,EAAS5D,WAC7DmI,EAAOL,aAET9L,EAAMK,uBAAyB8L,EAAOL,iBACzB9L,EAAMM,eAAiB6L,EAAOL,aAC7C,IAAK,qBACH,OAAOJ,EAAiB1L,EAAOmM,EAAOlD,SACxC,IAAK,yBACH,YAAajJ,EAAMwC,WAAasH,EAAiB9J,EAAMM,eAAgBN,EAAMwC,aAC/E,IAAK,wBACH,OAAOkH,EAAoB1J,GAC7B,IAAK,oBACH,OAAOgJ,EAAgBhJ,EAAOmM,EAAOlD,SACvC,IAAK,8BAEH,OADAjJ,EAAMsJ,kBAAoB,QACbtJ,EAAMC,gBAAkB,IACvC,IAAK,8BACH,YAAaD,EAAMsJ,kBAAoB6C,EAAO3I,YAChD,IAAK,wCACH,YAAaxD,EAAMsJ,kBAAoB,IACzC,IAAK,0BACH,OAAOd,EAAqBxI,EAAOmM,EAAO1D,gB,oBC5LnC2D,GAAkB,SAAC,GAG9B,IAHgF,IAAhDC,EAA+C,EAA/CA,KAAMvN,EAAyC,EAAzCA,IAAKwN,EAAoC,EAApCA,SACrCrK,EAAwB,GAErB0F,EAAI0E,EAAKE,OAAO1F,EAAGc,GAAK0E,EAAK1K,IAAIkF,EAAGc,IAC3C,IAAK,IAAIE,EAAIwE,EAAKE,OAAOzF,EAAGe,GAAKwE,EAAK1K,IAAImF,EAAGe,IACvC/I,EAAI6I,GAAGE,KAAOyE,GAChBrK,EAAUnC,KAAK,CAAC+H,EAAGF,IAIzB,OAAO1F,GCpBIuK,GAAe,SAACC,EAActH,GAMzC,IALA,IACIuH,EADAC,EAAeF,EAAMzN,OAEnBoF,EAASe,GAAYzG,KAAK0F,OAGzB,IAAMuI,GAAc,CAEzBD,EAAchO,KAAK4G,MAAMlB,IAAWuI,GACpCA,IAHyB,MAMmB,CAACF,EAAMC,GAAcD,EAAME,IAAtEF,EAAME,GANkB,KAMHF,EAAMC,GANH,KAS3B,OAAOD,GCbIG,GAAsB,SAACP,GASlC,MAAO,CARW,CAChBE,OAAQ,CAAEzF,EAAGuF,EAAKE,OAAOzF,EAAGD,EAAGwF,EAAKE,OAAO1F,GAC3ClF,IAAK,CAAEmF,EAAGuF,EAAK1K,IAAImF,EAAGD,EAAGnI,KAAK4G,OAAO+G,EAAK1K,IAAIkF,EAAIwF,EAAKE,OAAO1F,GAAK,KAElD,CACjB0F,OAAQ,CAAEzF,EAAGuF,EAAKE,OAAOzF,EAAGD,EAAGnI,KAAK4G,OAAO+G,EAAK1K,IAAIkF,EAAIwF,EAAKE,OAAO1F,GAAK,IACzElF,IAAK,CAAEmF,EAAGuF,EAAK1K,IAAImF,EAAGD,EAAGwF,EAAK1K,IAAIkF,MCPzBgG,GAAoB,SAACR,GAShC,MAAO,CARW,CAChBE,OAAQ,CAAEzF,EAAGuF,EAAKE,OAAOzF,EAAGD,EAAGwF,EAAKE,OAAO1F,GAC3ClF,IAAK,CAAEmF,EAAGpI,KAAK4G,OAAO+G,EAAK1K,IAAImF,EAAIuF,EAAKE,OAAOzF,GAAK,GAAID,EAAGwF,EAAK1K,IAAIkF,IAEnD,CACjB0F,OAAQ,CAAEzF,EAAGpI,KAAK4G,OAAO+G,EAAK1K,IAAImF,EAAIuF,EAAKE,OAAOzF,GAAK,GAAID,EAAGwF,EAAKE,OAAO1F,GAC1ElF,IAAK,CAAEmF,EAAGuF,EAAK1K,IAAImF,EAAGD,EAAGwF,EAAK1K,IAAIkF,MCmBhCiG,GAAgB,CACpBP,OAAQ,CAAEzF,EAAG,EAAGD,EAAG,GACnBlF,IAAK,CAAEmF,EAAG3I,GAAgB0I,EAAGzI,KA6CzB2O,GAAgB,SAACC,EAAaC,EAAanO,EAAmBqG,GAClE,IAAM+H,EAASpO,EAGTqO,EAAcf,GAAgB,CAAEC,KAAMW,EAAOlO,MAAKwN,SAAU,MAC5Dc,EAAYD,EAAYzO,KAAK4G,MAAMH,IAAQgI,EAAYnO,SAEvDqO,EAAcjB,GAAgB,CAAEC,KAAMY,EAAOnO,MAAKwN,SAAU,MAQlE,OCtFsB,SAACxK,EAAcC,GAUrC,IATA,IAAMR,EAAKQ,EAAG,GAAKD,EAAG,GAChBN,EAAKO,EAAG,GAAKD,EAAG,GAChBwL,EAAK5O,KAAKyD,IAAIZ,GACdgM,EAAK7O,KAAKyD,IAAIX,GACdgM,EAAQjM,EAAK,EAAI,GAAK,EACtBkM,EAAQjM,EAAK,EAAI,GAAK,EAEtBjD,EAAI,CAAEuI,EAAGhF,EAAG,GAAI+E,EAAG/E,EAAG,IACtBG,EAAwB,CAAC,CAAC1D,EAAEuI,EAAGvI,EAAEsI,IAC9B6G,EAAK,EAAGC,EAAK,EAAGD,EAAKJ,GAAMK,EAAKJ,IAClC,GAAMG,GAAMJ,GAAM,GAAMK,GAAMJ,GAEjChP,EAAEuI,GAAK0G,EACPE,MAGAnP,EAAEsI,GAAK4G,EACPE,KAEF1L,EAAUnC,KAAK,CAACvB,EAAEuI,EAAGvI,EAAEsI,IAEzB,OAAO5E,ED4DW2L,CAASR,EAHTC,EAAY3O,KAAK4G,MAAMH,IAAQkI,EAAYrO,UAMnDO,SAAQ,SAACC,GAAD,OAAe0N,EAAO1N,EAAS,IAAIA,EAAS,IAAM,OAC7D0N,GAWHW,GAAwB,SAAC,GAMM,IALnCC,EAKkC,EALlCA,YACAhP,EAIkC,EAJlCA,IACAiP,EAGkC,EAHlCA,MACAC,EAEkC,EAFlCA,YACA7I,EACkC,EADlCA,IAEA,OAAO4H,GACLe,EAAYE,GAAaF,EAAYE,GAAahP,QAAU+O,EAAQ,IACpED,EAAYE,GAAaF,EAAYE,GAAahP,OAAS+O,GAC3DjP,EACAqG,IA+BE8I,GAAsB,SAACnP,GAC3B,OAAOA,EACJA,KAAI,SAACI,EAAKyI,GAAN,OAAYzI,EAAIJ,KAAI,SAACkF,EAAM6D,GAAP,MAAuB,MAAT7D,EAAgB,CAAC6D,EAAGF,GAAkB,WAC5EuG,OACAnK,QAAO,SAACxF,GAAD,OAAa,OAANA,MAYb4P,GAAc,SAAChJ,GAEnB,IAAMiJ,EAhIe,SAACC,EAAeC,GAErC,IADA,IAAMxP,EAAoB,GACjB6I,EAAI,EAAGA,EAAI2G,EAAQ3G,IAAK,CAC/B7I,EAAI6I,GAAK,GACT,IAAK,IAAIE,EAAI,EAAGA,EAAIwG,EAAOxG,IACzB/I,EAAI6I,GAAGE,GAAK,IAGhB,OAAO/I,EAwHUyP,CAAepQ,EAAYC,GAGtC0P,EA1Ge,SAAC3I,GAOtB,IAJA,IAAIqJ,EAAiB,CAAC1B,IAChBgB,EAAwB,GAC1BW,EAAStJ,IAAQ,GALuB,WAOnC0C,GACP,IAAM6G,EAAQD,EAAS7B,GAAsBC,GAC7C4B,GAAUA,EACVD,EAAS,YAAIA,EAAO1P,KAAI,SAAC6P,GAAD,OAAUD,EAAMC,OAAQT,OAChDJ,EAAYjG,GAAK2G,GAJV3G,EAAI,EAAGA,GAvCO,EAuCgBA,IAAM,EAApCA,GAOT,OAAOiG,EA4Fac,CAAezJ,GAG7B0J,EAAQf,EA7IS,GA6IqBhP,KAAI,SAAC6P,GAAD,OElKX,SAACtC,EAAYlH,GAClD,IAAM2J,EAAgBzC,EAAK1K,IAAImF,EAAIuF,EAAKE,OAAOzF,EACzCiI,EAAiB1C,EAAK1K,IAAIkF,EAAIwF,EAAKE,OAAO1F,EAE1CwH,EAAQnJ,EAAsB8J,EAA4BF,EAAgB,EAAG3J,GAC7EmJ,EAASpJ,EAAsB8J,EAA4BD,EAAiB,EAAG5J,GAE/E8J,EAAU/J,EAAsBmH,EAAKE,OAAOzF,EAAGuF,EAAKE,OAAOzF,EAAIgI,EAAgBT,EAAOlJ,GACtF+J,EAAUhK,EACdmH,EAAKE,OAAO1F,EACZwF,EAAKE,OAAO1F,EAAIkI,EAAiBT,EACjCnJ,GAMF,MAAO,CAAEoH,OAHM,CAAEzF,EAAGmI,EAASpI,EAAGqI,GAGfvN,IAFL,CAAEmF,EAAGmI,EAAUZ,EAAOxH,EAAGqI,EAAUZ,IFmJWa,CAAwBR,EAAMxJ,MAGpFiK,EAAYhB,EAWhB,OAVAS,EAAMtP,SAAQ,SAAC8P,GACbD,EAhIwB,SAACtQ,EAAmBuN,GAE9C,IADA,IAAMa,EAASpO,EACN+I,EAAIwE,EAAKE,OAAOzF,EAAGe,GAAKwE,EAAK1K,IAAImF,EAAGe,IAC3C,IAAK,IAAIF,EAAI0E,EAAKE,OAAO1F,EAAGc,GAAK0E,EAAK1K,IAAIkF,EAAGc,IACvCE,IAAMwE,EAAKE,OAAOzF,GAAKe,IAAMwE,EAAK1K,IAAImF,GAAKa,IAAM0E,EAAKE,OAAO1F,GAAKc,IAAM0E,EAAK1K,IAAIkF,EACnFqG,EAAOvF,GAAGE,GAAK,IAEfqF,EAAOvF,GAAGE,GAAK,IAIrB,OAAOqF,EAqHOoC,CAAoBF,EAAWC,MAO7CD,EA7B6B,SAACtQ,EAAmBqG,GACjD,IAAM+H,EAASpO,EACTyQ,EAAqBtB,GAAoBf,GAEzC1N,EAAW+P,EADKrK,EAAsB,EAAGqK,EAAmBvQ,OAAS,EAAGmG,IAG9E,OADA+H,EAAO1N,EAAS,IAAIA,EAAS,IAAM,IAC5B0N,EAuBKsC,CAHZJ,EA5DuB,SACvBtB,EACAhP,EACAqG,GAGA,IADA,IAAI+H,EAASpO,EACJ+I,EAAI,EAAGA,GAhGO,EAgGgBA,IACrC,IAAK,IAAIF,EAAI,EAAGA,GAAC,SAAI,EAjGA,EAiGyBE,GAAIF,IAAK,CACrD,IAAMnB,EAAU,CACdsH,cACAhP,IAAKoO,EACLa,MAAW,EAAJpG,EACPqG,YAtGiB,EAsGenG,EAChC1C,OAEF+H,EAASW,GAAsBrH,GAzGZ,IA0GfqB,IAEFqF,EAASW,GAAsBrH,GAC/B0G,EAASW,GAAsBrH,GAC/B0G,EAASW,GAAsBrH,IAIrC,OAAO0G,EAoCKuC,CAAiB3B,EAAasB,EAAWjK,GAGPA,IA2FnCuK,GAAgB,SAACvK,GAC5B,IAAMrG,EAAMqP,GAAYhJ,GAGlBwK,EAAkBvD,GAAgB,CAAEC,KAAMS,GAAShO,MAAKwN,SAAU,MAClEsD,EAAQD,EAAgBjR,KAAK4G,MAAMH,IAAQwK,EAAgB3Q,SAQjE,OALAF,EAAI8Q,EAAM,IAAIA,EAAM,IAAM,IAKnB,CAAE7F,QAxFkB,SAC3BjL,EACA8Q,EACAvB,EACAC,EACAnJ,GAEA,IAAMoK,EAAqBtB,GAAoBnP,GACzC+Q,EAA6BrD,GAAa+C,EAAoBpK,GAE9D2K,EAAkB5K,ElCpKW,EACA,GkCmKyDC,GACtF4K,EAAgBF,EAA2BG,OAAO,EAAGF,GAAiBhR,KAAI,SAACP,GAAD,OAAOkB,OAAOlB,MAExF0R,EAAe/K,ElCpKU,EACA,GkCmKkDC,GAC3E+K,EAAkBL,EAA2BG,OAAO,EAAGC,GAEzDE,EAAkC,GAElChL,GAEF+K,EAAgB3Q,SAAQ,SAACC,GAAc,IAAD,EAC9B4Q,EA5Ba,SAACjL,GAAD,OAAsCA,IAAQ,GAAM,SAAW,MA4B7DkL,CAAiBlL,GAGhCmL,EADuB/J,EADb,CAAE/G,WAAU8B,OAAQ,EAAG7C,UAAWL,EAAaI,SAAUL,IAEd4F,QAAO,SAACsE,GAAD,OAChEwH,EAA2B/Q,KAAI,SAACP,GAAD,OAAOkB,OAAOlB,MAAIsB,SAASJ,OAAO4I,OAE7DkI,EAAwC/D,GAC5C8D,EACAnL,GAEFgL,GAAiB,EAAAA,GAAeK,OAAf,oBACZD,EACAP,OACC,EACAtR,KAAKE,IACH2B,EAAU6P,GAAcnP,YACxBsP,EAAsCvR,SAGzCF,KAAI,SAACP,GAAD,MAAQ,CAAEiB,SAAUjB,EAAG6R,wBAMpC,IADA,IAAMrG,EAAwB,GAvCb,WAwCRpC,GACPoC,EAAQpC,GAAK,GACb,IA1Ce,eA0CNE,GACP,IAAIuB,EAAqC,EACrC/E,OAAWoM,EACf,GAAItL,EAAK,CACPiE,EAAU2G,EAAclQ,SAASJ,OAAO,CAACoI,EAAGF,KA/DhC,SAACxC,GACnB,OAAOA,IAAQ,GAAM,YAAc,QA8DsBuL,CAAYvL,GAAO,EACtE,IAAMwL,EAAYR,EACfrR,KAAI,SAACP,GAAD,MAAQ,CAAEiB,SAAUC,OAAOlB,EAAEiB,UAAW4Q,aAAc7R,EAAE6R,iBAC5D9J,MAAK,SAAC/H,GAAD,OAAOA,EAAEiB,WAAaC,OAAO,CAACoI,EAAGF,OACzCtD,EAAWsM,EAAY,CAAElQ,KAAMkQ,EAAUP,aAAcrL,GAAI,gBAAc0L,EAE3E1G,EAAQpC,GAAGE,GAAK,CACduB,UACApF,KAAMlF,EAAI6I,GAAGE,GACbsB,UAAU,EACVD,WAAY,QACZpB,cAAe,EACfzD,WACA7E,SAAS,GAAD,OAAKqI,EAAL,YAAUF,IAEhBE,IAAM+H,EAAM,IAAMjI,IAAMiI,EAAM,KAChC7F,EAAQpC,GAAGE,GAAGuB,QAAU,WApBnBvB,EAAI,EAAGA,EAAIwG,EAAOxG,GAAK,EAAI,EAA3BA,IAFFF,EAAI,EAAGA,EAAI2G,EAAQ3G,GAAK,EAAI,EAA5BA,GA0BT,OAAOoC,EAcS6G,CAAc9R,EAAK8Q,EAAOzR,EAAYC,EAAa+G,GAEjD2G,YAAa8D,IGzRpBiB,GAAkB,WAC7B,OAAOnS,KAAK0F,SAAS0M,SAAS,IAAIC,UAAU,EAAG,IAAMrS,KAAK0F,SAAS0M,SAAS,IAAIC,UAAU,EAAG,K,yDCUlFC,GAAyB,SAAC,GAAuC,IAArCxR,EAAoC,EAApCA,SAAUyR,EAA0B,EAA1BA,WAAYC,EAAc,EAAdA,QAqD7D,OACE,eAAC,KAAD,CACEC,IAAK,SAACC,GACAA,IAASA,EAAKC,aAAaD,EAAK1P,SAEtCoF,EAAGtH,EAAS,GAAKvB,EAAuB,IACxC4I,EAAGrH,EAAS,GAAKvB,EACjBqT,UAAU,UACVC,WA5De,CACjBtK,QAAS,CACP,EACA,EACA,GACA,GACA,GACA,EACA,GACA,GACA,GACA,EACA,GACA,GACA,GACA,EACA,GACA,GACA,EACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,KAYAuK,MAAOP,GAAc,IAAIQ,OAAOC,MAChCC,UAAW,EACXC,WAAY1M,EAAsB,EAAG,IACrCgM,QAASA,KCtCFW,GAAkC,SAAC,GAgBzC,IAfLzI,EAeI,EAfJA,QACA/C,EAcI,EAdJA,SACA6C,EAaI,EAbJA,WACAC,EAYI,EAZJA,SACA2I,EAWI,EAXJA,SACAtS,EAUI,EAVJA,SACAuS,EASI,EATJA,WACAd,EAQI,EARJA,WACAhK,EAOI,EAPJA,QACA5C,EAMI,EANJA,SACA2N,EAKI,EALJA,eACA9R,EAII,EAJJA,cACAoC,EAGI,EAHJA,MACA2P,EAEI,EAFJA,YACA5I,EACI,EADJA,sBACI,EACgC6I,IAAMC,UAAS,GAD/C,mBACGC,EADH,KACeC,EADf,KAEEC,EAAWJ,IAAMK,OAAoB,MACrCxJ,EAAmB,IAAZK,GAA6B,WAAZA,EAAuBP,EAAQO,GAAW,GAClEpF,EAAOoC,EAAQC,GAEfmM,EAAwF,IAAtEtS,EAAc6D,QAAO,SAAC0O,GAAD,OAAOA,EAAEjP,cAAF,OAAiBa,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAUU,OAAI/F,OAC7E0T,EAAcF,IAAoBJ,EAElCO,EAAqB,WACzB,OAAKxJ,GAA2B,SAAfD,EAGE,UAAfA,GACS,OAAJlF,QAAI,IAAJA,OAAA,EAAAA,EAAM8B,uBAAwBL,GAEpB,QAAfyD,GAAwBC,KACf,OAAJnF,QAAI,IAAJA,OAAA,EAAAA,EAAM+B,qBAERN,EAREA,GAWXyM,IAAMU,WAAU,WACdP,GAAc,KACb,CAAC/P,IAEJ4P,IAAMU,WAAU,WAEd,GAAIN,EAASO,SACPxO,GACEqO,EAAa,CACf,IAAMI,EAAQ,IAAIC,KAAMC,MAAM,CAC5B5B,KAAMkB,EAASO,QACfrN,SAAUyN,GACVC,OAAQH,KAAMI,QAAQC,gBACtBC,KAAMV,IACNW,SAAU,kBAAMjB,GAAc,MAGhC,OADAS,EAAMS,OACC,WACLT,EAAMU,YAKb,CAACnP,EAAU/B,EAAOoQ,IAErB,IAiBMe,EAAO,WAEX,GAAgB,IAAZrK,GAA6B,WAAZA,EAAsB,CACzC,GAAmB,SAAfF,IAA0BC,EAC5B,OAAO,KAET,GAAmB,QAAfD,IAAyBC,EAC3B,OACE,eAAC,KAAD,CACErC,EAAGtH,EAAS,GAAKvB,EAAuBA,KACxC4I,EAAGrH,EAAS,GAAKvB,EAAuBA,KACxCqD,OAAQ,EACR+R,KAAM3N,EACNwL,QAAS,KAKf,IAAIA,EAAU,EAMd,MALmB,UAAfhI,EACFgI,EAAU,GACc,QAAfhI,GAAwBC,KACjC+H,EAAU,IAELnI,EACL,eAAC,KAAD,CACEjC,EAAGtH,EAAS,GAAKvB,EAAuB,IACxC4I,EAAGrH,EAAS,GAAKvB,EAAuB,IACxCuT,MAAOO,EACP1D,MAAO,GACPC,OAAQ,GACR4C,QAASA,EACTwC,KAAM,CACJ5M,EAA4B,GAAzBiC,EAAKpI,eAAe,GACvBkG,EAA4B,GAAzBkC,EAAKpI,eAAe,GACvB0N,MAAO,GACPC,OAAQ,MAGV,KAEN,OAAO,MAGHqF,EAAW,WAGf,GAAItP,EAAU,CACZ,GAAmB,SAAf6E,EACF,OAAO,KAET,GAAmB,QAAfA,EACF,OACE,eAAC,KAAD,CACEpC,EAAGtH,EAAS,GAAKvB,EAAuBA,KACxC4I,EAAGrH,EAAS,GAAKvB,EAAuBA,KACxCqD,OAAQ,EACR+R,KAAM,SACNnC,QAAS,KAKf,IAAIA,EAAU,EACK,UAAfhI,EACFgI,EAAU,EACc,QAAfhI,IACTgI,EAAU,IAEZ,IAAMvQ,EAAiBJ,EAAU8D,EAAS5D,MAAME,eAChD,OACE,eAAC,KAAD,CACEwQ,IAAKmB,EACLxL,EAAGtH,EAAS,GAAKvB,EAAuB,EACxC4I,EAAGrH,EAAS,GAAKvB,EAAuB,EACxCuT,MAAOQ,EACP3D,MAAOpQ,GACPqQ,OAAQrQ,GACRiT,QAASA,EACTmC,KAAMX,EAAc,MAAQC,IAC5Be,KAAM,CACJ5M,EAAuB,GAApBnG,EAAe,GAClBkG,EAAuB,GAApBlG,EAAe,GAClB0N,MAAO,GACPC,OAAQ,MAKhB,OAAO,MAyET,OACE,gBAAC,KAAD,CACEsF,aAAc,kBATT9B,EAASnG,GAUK,CACftF,WACA6C,aACAC,WACAC,UACAnC,UACA5C,WACAgF,4BAGJwK,aAAc,kBAhBT/B,EAASnG,OAIhB,UAcE,eAAC,KAAD,CACE0C,MAAOpQ,GACPqQ,OAAQrQ,GACRoV,KAAMV,IACN7L,EAAGtH,EAAS,GAAKvB,EACjB4I,EAAGrH,EAAS,GAAKvB,EACjB6V,OAAQ7B,EAAc,QAAU,qBAChC8B,YAAa,IAhDb1K,EA7BqB,WACzB,IAAI6H,EAAU,EAOd,MANmB,UAAfhI,EACFgI,EAAU,EACc,QAAfhI,IACTgI,EAAU,IAIV,eAAC,KAAD,CACEC,IAAKmB,EACLxL,EAAGtH,EAAS,GAAKvB,EAAuB,EACxC4I,EAAGrH,EAAS,GAAKvB,EAAuB,EACxCuT,MAAOO,EACP1D,MAAOpQ,GACPqQ,OAAQrQ,GACRiT,QAASA,EACTmC,KAAMb,EAAkB,MAAQG,IAChCe,KAAM,CACJ5M,EAAG,IACHD,EAAG,IACHwH,MAAO,GACPC,OAAQ,MAQL0F,GAGU,SAAf9K,GAAyB7E,EACpB,eAACsP,EAAD,IAGU,SAAfzK,GAAyBjC,EAhK7B,eAAC,GAAD,CAAOgK,WAAYA,EAAYzR,SAAUA,EAAU0R,QAAwB,QAAfhI,EAAuB,GAAM,IAoKzE,IAAZE,GAA6B,WAAZA,EACZ,eAACqK,EAAD,IAzDQ,WACjB,GAAmB,SAAfvK,GAAyBC,EAC3B,OACE,eAAC,KAAD,CACErC,EAAGtH,EAAS,GAAKvB,EAAuB,EACxC4I,EAAGrH,EAAS,GAAKvB,EAAuB,EACxCgW,KAAM5N,EACN6N,WAAW,eACXC,SAAU,GACVd,KAjHFpM,GAA0B,SAAfiC,EACN,QAEU,UAAfA,GACS,OAAJlF,QAAI,IAAJA,OAAA,EAAAA,EAAMgC,iBAAkBN,GAEd,QAAfwD,GAAwBC,KACf,OAAJnF,QAAI,IAAJA,OAAA,EAAAA,EAAMiC,eAERP,IA0JA0O,OC1PEC,GAA0B,SAAC,GAAuD,IAKzFC,EACAC,EANoCxJ,EAAoD,EAApDA,cAAe+G,EAAqC,EAArCA,SAAU5R,EAA2B,EAA3BA,cAAeoC,EAAY,EAAZA,MAC1EkS,EAAUtC,IAAMK,OAAmB,MADmD,EAExDL,IAAMC,UAAS,GAFyC,mBAErFC,EAFqF,KAEzEC,EAFyE,KAGtFoC,EAAc,KACdC,EAAa,IAKbhC,EADoF,IAAlExS,EAAc6D,QAAO,SAAC0O,GAAD,MAAwB,WAAjBA,EAAEjP,cAAyBxE,SACvCoT,EAyBxC,OAvBAF,IAAMU,WAAU,WACdP,GAAc,KACb,CAAC/P,IAEJ4P,IAAMU,WAAU,WAEd,GAAI4B,EAAQ3B,SACNH,EAAa,CACf,IAAMI,EAAQ,IAAIC,KAAMC,MAAM,CAC5B5B,KAAMoD,EAAQ3B,QACdrN,SAAUmP,KACVzB,OAAQH,KAAMI,QAAQC,gBACtBC,KAAM,OACNC,SAAU,kBAAMjB,GAAc,MAGhC,OADAS,EAAMS,OACC,WACLT,EAAMU,YAIX,CAAClR,EAAOoQ,IAEH3H,GACN,IAAK,KACHuJ,EAAiBI,KACjBH,EAAiBE,IACjB,MACF,IAAK,OACHH,EAAiBI,KACjBH,EAAiB,EACjB,MACF,IAAK,OACHD,EAAiBG,IACjBF,EAAiBG,KACjB,MACF,IAAK,QACHJ,EAAiB,EACjBC,EAAiBG,KAiBrB,OACE,gBAAC,KAAD,CAAOd,aAdgB,kBACvB9B,EACEnG,GAAsB,CACpBtF,SAAU,IACV6C,WAAY,QACZC,UAAU,EACVC,QAAS,SACTnC,SAAS,MAO0B4M,aAHhB,kBAAM/B,EAASnG,OAGtC,UACE,eAAC,KAAD,CACEwF,IAAKqD,EACLnG,MAAOoG,EACPnG,OAAQmG,EACRpB,KAAMX,EAAc,MAAQ,OAC5B5L,EAAI7I,MACJ4I,EAAI5I,MACJ2W,gBAAc,IAEhB,eAAC,KAAD,CACEvG,MAAOqG,EACPpG,OAAQoG,EACRrB,KAAM,QACNvM,EAAI7I,MAA4DqW,EAChEzN,EAAI5I,MAA4DsW,QCrElEM,GAAc,SAClB9K,EACAgI,EACAd,EACAe,EACA1R,EACAJ,EACAC,EACAmC,EACAgH,EACAwI,GAEA,IAAMgD,EAAepW,KAAK4G,MAAMyP,MAC1BC,EAAetW,KAAK4G,MAAM2P,MAGhC,OAAOlL,EACJhG,QACC,SAACmR,EAAMnH,GAAP,OACEA,GAASzN,EAAe,GAAK0U,GAAgBjH,GAASzN,EAAe,GAAK0U,KAE7ElW,KAAI,SAACI,EAAKkL,GACT,OAAOlL,EACJ6E,QACC,SAACoR,EAAWpH,GAAZ,OACEA,GAASzN,EAAe,GAAKwU,GAAgB/G,GAASzN,EAAe,GAAKwU,KAE7EhW,KAAI,SAAC8I,EAAUuC,GAAU,IAAD,EACjB3K,EAAQ,UAAM2K,EAAN,YAAcC,GACtBlB,EAAatB,EAASsB,WACxBG,GAAwB,EAExBlJ,EAAwBN,SAAS+H,EAASpI,YAC5C6J,GAAwB,GAG1B,IAAM4I,GACH,UAAArK,EAASvD,gBAAT,eAAmBU,MAAOuE,GAA6C,UAAxB1B,EAASsB,YACnC,WAArBtB,EAASwB,SAA8C,WAAtBE,EAEpC,OACE,eAAC,GAAD,CACEJ,WAAYA,EACZC,SAAUvB,EAASuB,SAEnBC,QAASxB,EAASwB,QAClB/C,SAAUuB,EAAS5D,KACnBxE,SAAU,CAAC2K,EAAMC,GACjB4H,eAAgBA,EAChBD,WAAYA,EACZd,WAAYA,EACZa,SAAUA,EACV7K,QAASW,EAASE,cAAgB,EAClCzD,SAAUuD,EAASvD,SACnBnE,cAAeA,EACfoC,MAAOA,EACP+G,sBAAuBA,EACvB4I,YAAaA,GAbRzS,UAiCN4V,GAA0BlD,IAAMmD,MAAK,SAACC,GAAW,IAzF1CC,EAMAC,EAmFyC,EACtCC,KAAS7M,GAAvBmJ,EADoD,sBAElC0D,KAAS5U,GAA3BmR,EAFoD,sBAGtCyD,KClHR,0zEDkHNxE,EAHoD,oBAKrDyE,GA9FYH,EA8FSD,EAAMhV,eAAe,IA7FvB5B,KAAK4G,MAAMyP,QAC9BrW,KAAK4G,MAAMyP,MAAqCQ,GAAmBtX,EACrE,EA4FE0X,GAzFYH,EAyFSF,EAAMhV,eAAe,IAxFvB5B,KAAK4G,MAAM2P,QAC9BvW,KAAK4G,MAAM2P,MAAqCO,GAAmBvX,EACrE,EAwFJ,OACE,eAAC,KAAD,CAAOoQ,MzC1G6B0G,IyC0GIzG,OzCzGH2G,IyCyGrC,SACE,gBAAC,KAAD,CAAOW,uBAAuB,EAA9B,UACE,eAAC,KAAD,CAAOF,QAASA,EAASC,QAASA,EAAlC,SACGd,GACCS,EAAMvL,QACNgI,EACAd,EACAe,EACAsD,EAAMhV,eACNgV,EAAMpV,cACNoV,EAAMnV,wBAAwBrB,IAAIW,QAClC6V,EAAMhT,MACNgT,EAAMhM,kBACNgM,EAAMxD,YAGV,eAAC,GAAD,CACE/G,cAAeuK,EAAMvK,cACrB+G,SAAUwD,EAAMxD,SAChB5R,cAAeoV,EAAMpV,cACrBoC,MAAOgT,EAAMhT,gBAOvB8S,GAAOS,YAAc,S,4HE9IRC,GAAiC,CAC5C,CACErV,KAAM,OACNsV,QAAS,MAIAC,GAA0BF,GAAehX,KAAI,SAACmX,GAAD,OAAOA,EAAEF,WCJ7DG,GAAS,CAAI,YAAa,UAAW,aAAc,aAA1C,mBAA0DF,KAkB5DG,GAAc,SAACrE,EAAsCjO,GAChE,IAAMuS,EAAgBlE,IAAMK,OAAO8D,KAAKC,OAExCpE,IAAMU,WAAU,WACd,IAAM2D,EAAgB,SAACC,GACrB,IAAMpO,EAAcoO,EAAMpO,IAG1B,GAAK8N,GAAUrW,SAASuI,KAIxBoO,EAAMC,mBAGFJ,KAAKC,MAAQF,EAAcvD,Q5ClCG,M4CsCf,aAAfhP,GAAJ,CAKAuS,EAAcvD,QAAUwD,KAAKC,MAE7B,IAAM7N,EAAeqN,GAAexP,MAAK,SAAC2P,GAAD,OAAOA,EAAEF,UAAY3N,KAC9D,GAAIK,EACF,OAAOqJ,EAASnG,GAA2BlD,EAAahI,OAG1D,IAAMmL,EA/CkB,SAACxD,GAC7B,GAAK8N,GAAUrW,SAASuI,GAGxB,OAAQA,GACN,IAAK,YACH,MAAO,OACT,IAAK,aACH,MAAO,QACT,IAAK,UACH,MAAO,KACT,IAAK,YACH,MAAO,QAmCWsO,CAAsBtO,GACpCwD,GACFkG,EAASnG,GAAuBC,MAKpC,OADA+K,SAASC,iBAAiB,UAAWL,GAC9B,WACLI,SAASE,oBAAoB,UAAWN,MAEzC,CAAC1S,KCnES,OAA0B,mCCA1B,OAA0B,iCCA1B,OAA0B,0CCA1B,OAA0B,yCCA1B,OAA0B,wCCA1B,OAA0B,wCCA1B,OAA0B,0CCA1B,OAA0B,iCCA1B,OAA0B,uCCA1B,OAA0B,sCCA1B,OAA0B,qCCA1B,OAA0B,mCCK5BiT,GAAqB,WAAgB,IAAD,EACP5E,IAAMC,UAAS,GADR,mBACxC4E,EADwC,KAC1BC,EAD0B,KAGzCC,EAAiB,SAAjBA,IACJD,GAAgB,GAChBvF,OAAOoF,oBAAoB,YAAaI,GACxCxF,OAAOoF,oBAAoB,UAAWI,IAYxC,OATA/E,IAAMU,WAAU,WAGd,OAFAnB,OAAOmF,iBAAiB,YAAaK,GACrCxF,OAAOmF,iBAAiB,UAAWK,GAC5B,WACLxF,OAAOoF,oBAAoB,YAAaI,GACxCxF,OAAOoF,oBAAoB,UAAWI,MAEvC,IAEIF,GCpBHG,GAAUC,IAAOC,IAAV,sOAYPC,GAAUF,IAAOC,IAAV,qNAWAE,GAA0B,SAAChC,GACtC,OACE,eAAC4B,GAAD,UACE,eAACG,GAAD,UAAU/B,EAAMiC,cClBhBC,GAAUL,IAAOC,IAAV,6KACF,SAAC7Y,GAAD,OAAOA,EAAEkZ,mBACR,SAAClZ,GAAD,OAAOA,EAAEkZ,mBACD,SAAClZ,GAAD,OAAOA,EAAEqC,YAEJ,SAACrC,GAAD,OAAQA,EAAEiB,SAAS,GAAKjB,EAAEkZ,mBAC7C,SAAClZ,GAAD,OAAQA,EAAEiB,SAAS,GAAKjB,EAAEkZ,mBAGnBC,GAA0B,SAACpC,GACtC,OAAO,eAACkC,GAAD,eAAalC,KCbhBkC,GAAUL,IAAOC,IAAV,wQAoBPO,GAA8B,SAAC,GAM9B,IALL/U,EAKI,EALJA,OACAmL,EAII,EAJJA,MACA6J,EAGI,EAHJA,iBACAC,EAEI,EAFJA,iBACA5F,EACI,EADJA,YACI,EACiC1R,EAAUqC,EAAOnC,MAA9CG,EADJ,EACIA,SAAUD,EADd,EACcA,eACZmX,EAAgBlV,EAAOa,GAAKb,EAAOlC,MAAS,IAClD,OACE,sBAAKqX,MAAO,CAAEC,UAAqB,IAAVjK,EAAc,QAAK0C,GAA5C,SACE,eAAC,GAAD,UACE,uBACEmD,aAAcgE,EACd/D,aAAcgE,EACdE,MAAO,CACLE,YAAa,GACbC,aAAc,GACdC,WAAY,GACZC,cAAe,GACfC,WAAYpG,EAAc,yCAAsCxB,GARpE,UAWE,sBAAKsH,MAAO,CAAE1J,MAAO,KAArB,SACE,uBAAK0J,MAAO,CAAEO,QAAS,QAAvB,UACE,gCACE,eAAC,GAAD,CAAQ1X,SAAUA,EAAUpB,SAAUmB,EAAgB8W,gBAAiB,OAEzE,uBAAKM,MAAO,CAAE1J,MAAO,KAArB,UACE,uBACE0J,MAAO,CACLQ,WAAY,GACZjK,OAAQ,IAHZ,UAMG1L,EAAOa,GANV,IAMeb,EAAOlC,SAEtB,sBACEqX,MAAO,CACLQ,WAAY,GACZC,gBAAiB,UACjBnK,MAAM,GAAD,OAAKyJ,EAAL,KACLxJ,OAAQ,aAMlB,sBAAKyJ,MAAO,CAAEC,UAAW,IAAzB,SACE,uBAAKD,MAAO,CAAEO,QAAS,QAAvB,UACE,sCACA,uBAAMP,MAAO,CAAEQ,WAAY,IAA3B,SAAkC3V,EAAOqB,sBAe1CwU,GAAkC,SAACnD,GAC9C,IAGMuC,EAAmB,kBAAMvC,EAAMxD,SAASnG,OAE9C,OACE,eAAC,GAAD,UACG2J,EAAMoD,SAAS5Z,KAAI,SAAC8D,EAAQmL,GAC3B,OACE,eAAC,GAAD,CAEEnL,OAAQA,EACRmL,MAAOA,EACP6J,kBAboBpU,EAamBZ,EAAOmC,GAbH,kBACnDuQ,EAAMxD,SAASnG,GAA+BnI,MAatCqU,iBAAkBA,EAClB5F,YAAarP,EAAOmC,KAAOuQ,EAAMhM,mBAL5B1G,EAAOmC,IAVO,IAACvB,QCxF1BmV,GAAiBxB,IAAOC,IAAV,wLAUdwB,GAAOzB,IAAOC,IAAV,0QAaJyB,GAAc1B,IAAOC,IAAV,qNAWX0B,GAAkB3B,IAAOC,IAAV,mHAWR2B,GAAgC,SAACzD,GAC5C,OACE,gBAACqD,GAAD,WACE,eAACG,GAAD,IACA,eAACF,GAAD,UACE,eAACC,GAAD,MACM,IACR,eAACC,GAAD,IACCxD,EAAMrJ,aAAalE,MAAK,SAACgB,GAAD,MAAmB,UAATA,KACjC,eAAC6P,GAAD,UACE,eAACC,GAAD,UACE,eAAC,GAAD,CAAQjY,SAAUgI,EAAgBpJ,SAAU,CAAC,EAAG,GAAIiY,gBAAiB,SAIzE,eAACmB,GAAD,UACE,eAACC,GAAD,MAGJ,eAACD,GAAD,UACE,eAACC,GAAD,MACM,IACR,eAACD,GAAD,UACE,eAACC,GAAD,MACM,IACR,eAACD,GAAD,UACE,eAACC,GAAD,MACM,IACR,eAACD,GAAD,UACE,eAACC,GAAD,MACM,IACR,eAACD,GAAD,UACE,eAACC,GAAD,MACM,QClFRrB,GAAUL,IAAOC,IAAV,8RAcP4B,GAAM7B,IAAOC,IAAV,yFAYI6B,GAA6B,SAAC3D,GACzC,OACE,eAAC,GAAD,UACGA,EAAMlS,UACJsE,MACChJ,KAAKC,IAAI,EAAG2W,EAAMlS,UAAUpE,OAPL,GAQvBsW,EAAMlS,UAAUpE,QAEjBF,KAAI,SAACkE,EAAK+K,GAAN,OACH,eAACiL,GAAD,UAAkBhW,GAAR+K,SCnCdyJ,GAAUL,IAAOC,IAAV,iLAcA8B,GAA4B,SAAC,GAAmB,IAAjBvV,EAAgB,EAAhBA,UAC1C,OACE,gBAAC,GAAD,WACE,sBAAKoU,MAAO,CAAEoB,aAAc,IAA5B,uBACA,+BAAMxV,QChBN6T,GAAUL,IAAOC,IAAV,4ThES2BrC,KgEW3BqE,GAAmC,SAAC9D,GAC/C,OAAO,eAAC,GAAD,UAAUA,EAAMrV,mBCjBnB4Y,GAAc1B,IAAOC,IAAV,qNAWXI,GAAUL,IAAOC,IAAV,2IAQPiC,GAAQlC,IAAOC,IAAV,2MAWLkC,GAAoBnC,IAAOC,IAAV,gKAajBmC,GAAiB,SAACzQ,EAA2BiF,GAClC,IAAD,EAAd,OAAIjF,EAEA,eAACwQ,GAAD,UACE,eAAC,GAAD,UACE,eAAC,GAAD,CACE1Y,SAAUgI,EACVpJ,UAAU,UAAAqJ,EAAQC,UAAR,eAAmBnI,iBAAkB,CAAC,EAAG,GACnD8W,gBAAiB,MAJH3O,IADpB,eAAgCiF,IAYlC,eAACuL,GAAD,UACE,eAAC,GAAD,KADF,eAAgCvL,KAMvByL,GAA6B,SAAClE,GAczC,OACE,eAAC,GAAD,UACE,+BACE,eAAC,GAAD,UACE,eAAC+D,GAAD,UAjBgB,WAEtB,IADA,IAAMI,EAAyB,GACtB5R,EAAI,EAAGA,EjEhDqB,EiEgDUA,IACzCyN,EAAM1K,UAAU/C,GAClB4R,EAAU3Z,KAAKyZ,GAAejE,EAAM1K,UAAU/C,GAAIA,IAElD4R,EAAU3Z,KAAKyZ,GAAe,KAAM1R,IAIxC,OAAO4R,EAOOC,YCrFZlC,GAAUL,IAAOC,IAAV,gDAIPuC,GAAgBxC,IAAOC,IAAV,kDASbwC,GAAoB,SAACnR,GACzB,IAAIoR,GAAmB,EACvB,OAAOpR,EAAahI,KAAKiO,MAAM,IAAI5P,KAAI,SAACgb,EAAM/L,GAC5C,OAAI+L,IAASrR,EAAasN,SAAY8D,EAQ/BC,GAPLD,GAAmB,EAEjB,uBAAkB9B,MAAO,CAAEgC,MAAO,UAAlC,SACGD,GADQ/L,QASNiM,GAA2B,SAAC1E,GAgBvC,OAAO,eAAC,GAAD,UAdLA,EAAM2E,QAAQnb,KAAI,SAACqN,GACjB,IAAM1D,EAAeqN,GAAexP,MAAK,SAAC2P,GAAD,OAAOA,EAAExV,OAAS0L,KAC3D,GAAI1D,EACF,OACE,eAACkR,GAAD,CAEEO,QAAS,kBAAM5E,EAAMxD,SAASnG,GAA2BQ,KAF3D,SAIGyN,GAAkBnR,IAHd0D,SCzCF,o4ECUTqL,GAAUL,IAAOC,IAAV,2IA6BA+C,GAA+B,SAAC7E,GAAW,IAAD,EAC/CwC,EAAgBxC,EAAM7R,GAAK6R,EAAM5U,MAAS,IAC1C0Z,OAC+B3J,IAAnC6E,EAAMtO,iBAAiBC,QACnB,GACC,UAAAqO,EAAMtO,iBAAiBC,eAAvB,eAAgCC,cAAe3B,EAAmBC,SAAY,IAK/EyM,EAA0C,WAA5BqD,EAAMhM,kBAE1B,OACE,eAAC,GAAD,CAASsK,aANc,kBAAM0B,EAAMxD,SAASnG,GAA+B,YAMlCkI,aALlB,kBAAMyB,EAAMxD,SAASnG,OAK5C,SACE,+BACE,eAAC,GAAD,UACE,uBACEoM,MAAO,CACLE,YAAa,GACbC,aAAc,GACdC,WAAY,GACZC,cAAe,GACfC,WAAYpG,EAAc,yCAAsCxB,GANpE,UASE,sBAAKsH,MAAO,CAAE1J,MAAO,KAArB,SACE,uBAAK0J,MAAO,CAAEO,QAAS,QAAvB,UACE,gCACE,eAAC,GAAD,CAAQ1X,SAAUyZ,GAAU7a,SAAU,CAAC,EAAG,GAAIiY,gBAAiB,OAEjE,uBAAMM,MAAO,CAAEQ,WAAY,IAA3B,SAAkCjD,EAAMtJ,qBAG5C,sBAAK+L,MAAO,CAAEC,UAAW,IAAzB,SACE,uBAAKD,MAAO,CAAEO,QAAS,QAAvB,UACE,gCACE,eAAC,GAAD,CAAQ1X,SAAUyZ,GAAU7a,SAAU,CAAC,EAAG,GAAIiY,gBAAiB,OAEjE,uBAAKM,MAAO,CAAE1J,MAAO,KAArB,UACE,uBACE0J,MAAO,CACLQ,WAAY,GACZjK,OAAQ,IAHZ,UAMGgH,EAAM7R,GANT,IAMc6R,EAAM5U,SAEpB,sBACEqX,MAAO,CACLQ,WAAY,GACZC,gBAAiB,UACjBnK,MAAM,GAAD,OAAKyJ,EAAL,KACLxJ,OAAQ,aAMlB,sBAAKyJ,MAAO,CAAEC,UAAW,IAAzB,SACE,uBAAKD,MAAO,CAAEO,QAAS,QAAvB,UACE,gCACE,eAAC,GAAD,CAAQ1X,SAAUyZ,GAAU7a,SAAU,CAAC,EAAG,GAAIiY,gBAAiB,OAEjE,uBAAMM,MAAO,CAAEQ,WAAY,IAA3B,SAAkCjD,EAAM5K,YAG3C4K,EAAMtO,iBAAiBC,SACtB,sBACE8Q,MAAO,CACLC,UAAW,GACXQ,gBAAiB,SACjBnK,MAAM,GAAD,OAAK+L,EAAL,KACL9L,OAAQ,GACRgK,QAAS,OACTgC,WAAY,SACZrC,YAAa,IARjB,+BC/FDsC,I,OAA8B,SAACjF,GAAW,IAAD,EAChBpD,IAAMC,SAAS,IADC,mBAC7CqI,EAD6C,KACjCC,EADiC,KAcpD,OAXAvI,IAAMU,WAAU,WACd,GAAI0C,EAAMoF,MAAO,CACfD,EAAc,SACd,IAAME,EAAQC,YAAW,kBAAMH,EAAc,MrEThB,KqEU7B,OAAO,WACLI,aAAaF,IAGjBF,EAAc,MACb,CAACnF,EAAMoF,MAAOpF,EAAMhT,QAEhB,sBAAKwY,UAAWN,EAAhB,SAA6BlF,EAAMiC,aCbtCC,I,OAAUL,IAAOC,IAAV,8GAEF,2BtEA6BrC,IsEA7B,SACC,2BtEA6BE,IsEA7B,UASC8F,GAA4B,SAACzF,GAAW,IAAD,EACpBpD,IAAMC,SAAS,GADK,mBAC3CjB,EAD2C,KAClC8J,EADkC,OAEN9I,IAAMC,SAAS,IAFT,mBAE3C8I,EAF2C,KAE3BC,EAF2B,OAGRhJ,IAAMC,SAAS,IAHP,mBAG3CgJ,EAH2C,KAG5BC,EAH4B,KA4BlD,OAvBAlJ,IAAMU,WAAU,WACdsI,EAAkB,UAClB,IAAMP,EAAQC,YAAW,WACvBM,EAAkB,IAClBF,EAAW,KACV,KACH,OAAO,WACLH,aAAaF,MAEd,CAACrF,EAAM1R,QAEVsO,IAAMU,WAAU,WACd,GAAyB,aAArB0C,EAAMzR,WAA2B,CACnCuX,EAAiB,WACjB,IAAMT,EAAQC,YAAW,WACvBQ,EAAiB,YAChBpd,GACH,OAAO,WACL6c,aAAaF,OAGhB,CAACrF,EAAMzR,aAGR,eAAC,GAAD,CAASkU,MAAO,CAAE7G,WAAW4J,UAAS,UAAKG,EAAL,YAAuBE,GAA7D,SACG7F,EAAMiC,YC7BPC,GAAUL,IAAOC,IAAV,sFAMPiE,GAAelE,IAAOC,IAAV,iNAWZkE,GAAcnE,IAAOC,IAAV,4FAMXmE,GAAYpE,IAAOC,IAAV,uMAkBFoE,GAAwB,SAAClG,GACpC,IAAMmG,EChEwB,WAAgB,IAAD,EACDvJ,IAAMC,UAAS,GADd,mBACtCsJ,EADsC,KACtBC,EADsB,KAW7C,OARAxJ,IAAMU,WAAU,WACd,IAAM+I,EAAO,IAAIC,KAAiB,gBAElCC,QAAQC,IAAI,CAACH,EAAKI,SAASC,MAAK,WAC9BN,GAAkB,QAEnB,IAEID,EDqDgBQ,GACvB9F,GAAYb,EAAMxD,SAAUwD,EAAM4G,MAAMrY,YE/BV,SAAC,GAAsC,IAApCzD,EAAmC,EAAnCA,OAAQkC,EAA2B,EAA3BA,MACnCyU,EAAeD,KAD+C,EAGjDqF,YAASC,IAArBC,EAH6D,sBAI/CF,YAASG,GAAQ,CAAEC,OAAQ,IAAzCC,EAJ6D,sBAKjDL,YAASM,GAAM,CAAEF,OAAQ,KAArCG,EAL6D,sBAM5CP,YAASQ,IAA1BC,EAN6D,sBAOxCT,YAASU,IAA9BC,EAP6D,sBAQ/CX,YAASY,IAAvBC,EAR6D,sBAS5Cb,YAASc,GAAW,CAAEV,OAAQ,KAA/CW,EAT6D,sBAU9Cf,YAASgB,GAAS,CAAEZ,OAAQ,KAA3Ca,EAV6D,sBAW7CjB,YAASkB,GAAU,CAAEd,OAAQ,KAA7Ce,EAX6D,sBAYzCnB,YAASoB,GAAc,CAAEhB,OAAQ,KAArDiB,EAZ6D,sBAa3CrB,YAASsB,GAAY,CAAElB,OAAQ,KAAjDmB,EAb6D,sBAc1CvB,YAASwB,GAAa,CAAEpB,OAAQ,KAEpDqB,EAAuD,CAC3DxB,KAAMC,EACNC,OAAQE,EACRC,KAAMC,EACNC,UAAWC,EACXC,cAAeC,EACfC,OAAQC,EACRC,UAAWC,EACXC,QAASC,EACTC,SAAUC,EACVC,aAAcC,EACdC,WAAYC,EACZC,YA5BkE,qBA+BpEzL,IAAMU,WAAU,WACVmE,GACF3W,EAAOb,SAAQ,SAACse,GACdD,EAAYC,UAGf,CAAC9G,EAAczU,EAAOlC,IFLzB0d,CAAiB,CAAE1d,OAAQkV,EAAM4G,MAAM9b,OAAQkC,MAAOgT,EAAM4G,MAAM5Z,QAHpB,MAIN4P,IAAMC,UAAS,GAJT,mBAIvC4L,EAJuC,KAIzBC,EAJyB,KAMxCC,EAAU,WACd,IAAMpS,EAAOyJ,EAAM4G,MAAMrQ,KACrByJ,EAAM4G,MAAMrQ,KAAK2E,OAAO/Q,OAAO6V,EAAM4G,MAAMtY,QAC3CiN,KACE1L,EAAM+Y,KAAWrS,GACjBsS,EAAQzO,GAAcvK,GAC5BmQ,EAAMxD,SAASnG,GAAoBE,IAEnCyJ,EAAMxD,SAASnG,GAA0BwS,EAAMpU,UAC/CuL,EAAMxD,SAASnG,GAA4BwS,EAAMrS,eAG7CsS,EAAgB,WACpB9I,EAAMxD,SAASnG,MACf2J,EAAMxD,SAASnG,OA+BjB,GA3BAuG,IAAMU,WAAU,WAEwB,IAAlC0C,EAAM4G,MAAM1Z,WAAWxD,QACzBif,IAEFG,MACC,IAGHlM,IAAMU,WAAU,WACV0C,EAAM4G,MAAMtY,MAAQ,IACtBqa,IACAG,OAED,CAAC9I,EAAM4G,MAAMtY,QAEhBsO,IAAMU,WAAU,WACd,GAA+B,aAA3B0C,EAAM4G,MAAMrY,WAA2B,CACzC,IAAM8W,EAAQC,YAAW,WACvBoD,GAAgB,KACfhgB,GACH,OAAO,WACL6c,aAAaF,OAGhB,CAACrF,EAAM4G,MAAMrY,cAEX4X,EACH,OAAO,KAGT,IG7G4BjV,EH6GtB6X,GG7GsB7X,EH6GU,CACpC7D,UAAW2S,EAAM4G,MAAMvZ,UACvBH,WAAY8S,EAAM4G,MAAM1Z,WACxBtC,cAAeoV,EAAM4G,MAAMhc,eG/GfuC,OAAO6b,KAAK9X,EAAQ7D,WAAW7D,KAAI,SAACiG,GAAD,OAAQyB,EAAQ7D,UAAUoC,MAItEhB,QAAO,SAACwa,GACP,IAAM/e,EAAW+e,EAAE/e,SACnB,MAAmE,UAA5DgH,EAAQhE,WAAWhD,EAAS,IAAIA,EAAS,IAAI0J,cAGrD/E,MAAK,SAAC8R,EAAGuI,GACR,OAAOvI,EAAEjR,wBAA0BwZ,EAAExZ,2BAGtCb,MAAK,SAAC8R,EAAGuI,GACR,OACEhY,EAAQtG,cAAcpB,KAAI,SAAC2f,GAAD,OAASA,EAAIjb,cAAY3D,SAASoW,EAAElR,MAC7DyB,EAAQtG,cAAcpB,KAAI,SAAC2f,GAAD,OAASA,EAAIjb,cAAY3D,SAAS2e,EAAEzZ,KAEvD,EAEH,MH8Fb,OACE,gBAAC,GAAD,WACE,gBAACsW,GAAD,WACE,gBAACC,GAAD,CACEvD,MAAO,CACL2G,YAAa,OACbxG,aAAc,EACdD,YAAa,EACb0G,UAAW,aACXrG,QAAS,OACTsG,cAAe,UAPnB,UAUE,eAAC,GAAD,CACE5S,cAAesJ,EAAM4G,MAAMlQ,cAC3BvI,GAAI6R,EAAM4G,MAAMzY,GAChB/C,MAAO4U,EAAM4G,MAAMxb,MACnBgK,KAAM4K,EAAM4G,MAAMxR,KAClBmU,oBAAqBvJ,EAAMuJ,oBAC3BC,uBAAwBxJ,EAAMwJ,uBAC9B9X,iBAAkBsO,EAAM4G,MAAMlV,iBAC9B8K,SAAUwD,EAAMxD,SAChBxI,kBAAmBgM,EAAM4G,MAAM5S,oBAEjC,eAAC,GAAD,CACEoP,SAAU2F,EACVvM,SAAUwD,EAAMxD,SAChBxI,kBAAmBgM,EAAM4G,MAAM5S,uBAGnC,iCACE,eAAC,GAAD,CAAWlG,UAAWkS,EAAM4G,MAAM9Y,YAClC,eAAC,GAAD,CACEsX,MAAqF,IAA9EpF,EAAM4G,MAAMhc,cAAc6D,QAAO,SAAC0O,GAAD,MAAwB,WAAjBA,EAAEjP,cAAyBxE,OAC1EsD,MAAOgT,EAAM4G,MAAM5Z,MAFrB,SAIE,eAAC,GAAD,UACE,gBAAC,GAAD,CAAUsB,MAAO0R,EAAM4G,MAAMtY,MAAOC,WAAYyR,EAAM4G,MAAMrY,WAA5D,WACIka,GACA,eAAC3I,GAAD,CACE9U,eAAgBgV,EAAM4G,MAAM5b,eAC5ByJ,QAASuL,EAAM4G,MAAM1Z,WACrBuI,cAAeuK,EAAM4G,MAAMnR,cAC3B7K,cAAeoV,EAAM4G,MAAMhc,cAC3BC,wBAAyBmV,EAAM4G,MAAM/b,wBACrCmC,MAAOgT,EAAM4G,MAAM5Z,MACnBwP,SAAUwD,EAAMxD,SAChBxI,kBAAmBgM,EAAM4G,MAAM5S,oBAGlCyU,GAAgB,eAAC,GAAD,CAAUpa,UAAW2R,EAAM4G,MAAMvY,sBAK1D,gBAAC2X,GAAD,CACEvD,MAAO,CACLQ,WAAY,OACZoG,UAAW,aACXrG,QAAS,OACTsG,cAAe,UALnB,UAQE,eAAC,GAAD,CAAS3E,QAAS3E,EAAM4G,MAAMxT,cAAeoJ,SAAUwD,EAAMxD,WAC7D,eAAC,GAAD,CAAc7F,aAAcqJ,EAAM4G,MAAMjQ,eACxC,eAAC,GAAD,CAAWrB,UAAW0K,EAAM4G,MAAMtR,kBAGtC,eAAC,GAAD,CACE3K,gBAA4C,YAA3BqV,EAAM4G,MAAMrY,WAA2ByR,EAAM4G,MAAMjc,gBAAkB,KAExF,eAACsb,GAAD,UACE,uBAAKxD,MAAO,CAAEgC,MAAO,SAArB,sBAA0CzE,EAAM4G,MAAMtY,MAAtD,eIlMF4T,GAAUL,IAAOC,IAAV,2FACF,GACC,IAIN2H,GAAQ5H,IAAOC,IAAV,yIACA,EACC,GAMC/C,GAAmB,WAC9B,OACE,eAAC,GAAD,UACE,eAAC0K,GAAD,OCJAvH,GAAUL,IAAOC,IAAV,0SAGF,SAAC7Y,GAAD,gBAAUA,EAAEygB,UAAZ,SACC,SAACzgB,GAAD,gBAAUA,EAAEygB,UAAZ,SACG,SAACzgB,GAAD,gBAAUA,EAAEygB,UAAZ,SACC,SAACzgB,GAAD,gBAAUA,EAAEygB,UAAZ,SAIM,SAACzgB,GAAD,OAAOA,EAAEia,mBAEpB,SAACja,GAAD,OAAOA,EAAEwb,SAaPkF,GAA4B,SAAC,GAOnC,IANLhY,EAMI,EANJA,QACAmC,EAKI,EALJA,QACA/C,EAII,EAJJA,SACA2Y,EAGI,EAHJA,UACAE,EAEI,EAFJA,YACA7a,EACI,EADJA,SAEML,EAAOoC,EAAQC,GAkDrB,OACE,eAAC,GAAD,CACE6T,QAASgF,EACT1G,iBAAqB,OAAJxU,QAAI,IAAJA,OAAA,EAAAA,EAAM8B,uBAAwBL,EAC/CuZ,UAAWA,EACXjF,MAXE1V,EACK,UAEE,OAAJL,QAAI,IAAJA,OAAA,EAAAA,EAAMgC,iBAAkBN,EAI/B,SA1BIuB,EACK,IAGO,WAAZmC,EA1BG,eAAC,GAAD,IA8BH/E,EAhBiB,SAAC5D,GAAwB,IAAD,EACRF,EAAUE,GAAvCG,EADqC,EACrCA,SAAUD,EAD2B,EAC3BA,eAClB,OAAO,eAAC,GAAD,CAAQC,SAAUA,EAAUpB,SAAUmB,EAAgB8W,gBAAiB,KAerE0H,CAAe9a,GAGR,IAAZ+E,EA/Ba,WACjB,GAAgB,IAAZA,GAA6B,WAAZA,EAAsB,CACzC,IAAML,EAAOF,EAAQO,GACrB,OACEL,GACE,eAAC,GAAD,CAAQnI,SAAUmI,EAAKnI,SAAUpB,SAAUuJ,EAAKpI,eAAgB8W,gBAAiB,MA2B9E2H,GAhBc/Y,KC7DrBmR,GAAUL,IAAOC,IAAV,kMACF,SAAC7Y,GAAD,gBAAUA,EAAEygB,UAAY7gB,EAAxB,SACC,SAACI,GAAD,gBAAUA,EAAEygB,UAAY5gB,EAAxB,SACG,SAACG,GAAD,gBAAUA,EAAEygB,UAAY7gB,EAAxB,SACC,SAACI,GAAD,gBAAUA,EAAEygB,UAAY5gB,EAAxB,SAoCDihB,GAxBc,SAAC,GAAkC,IAAhCtV,EAA+B,EAA/BA,QAASuV,EAAsB,EAAtBA,gBAqBvC,OAAO,eAAC,GAAD,CAASN,UAAW9gB,EAApB,SAnBE6L,EAAQjL,KAAI,SAACygB,EAAKnV,GACvB,OAAOmV,EAAIzgB,KAAI,SAAC8I,EAAUuC,GAAU,IAAD,EAC3B3K,EAAQ,UAAM2K,EAAN,YAAcC,GAC5B,OACE,eAAC,GAAD,CACE/F,SAAQ,UAAEuD,EAASvD,gBAAX,aAAE,EAAmB5D,KAE7B2I,QAASxB,EAASwB,QAClB2B,cAAe,KACf1E,SAAUuB,EAAS5D,KACnBgb,UAAW9gB,EACXghB,YAAa,kBAAMI,EAAgB,CAACnV,EAAMC,GAAOxC,IACjDX,QAASW,EAASE,cAAgB,GAN7BtI,YCxBXgY,GAAUL,IAAOC,IAAV,iHAWPoI,GAAcrI,IAAOC,IAAV,mMAIL,SAAC9B,GAAD,OAAYA,EAAMmK,SAAW,iBAAmB,oBAOtDC,GAAQvI,IAAOC,IAAV,wEAKLuI,GAA8B,CAClCvW,QAAS,EACT2B,cAAe,KACf1E,SAAU,IACV2Y,UAAW/gB,EACXihB,YAAa,kBAAM,GACnBjY,SAAS,GAiBE2Y,GAA2B,SAACtK,GACvC,IAAM7L,EAAWoW,cAYjB,OAVAjN,qBAAU,WACR,IACMkN,EADe,IAAIC,gBAAgBtW,EAASuW,QACjBC,IAAI,QACrC,GAAIH,EAAa,CACf,IAAMI,EAAcJ,EAAYK,QAAQ,MAAO,IAC/C7K,EAAM8K,QAAQF,GACd5K,EAAMyG,UAEP,CAACtS,EAASuW,OAAQ1K,EAAM8K,QAAS9K,EAAMyG,OAGxC,gBAAC,GAAD,WACE,uBAAKhE,MAAO,CAAEzJ,OAAQ,MAAO+R,UAAW,UAAxC,UACE,uCACC1a,EAAM7G,KAAI,SAACkF,GACV,OACE,gBAACwb,GAAD,CAEEC,SAAUnK,EAAMgL,eAAiBtc,EAAKvD,KACtCyZ,QAAS,kBAAM5E,EAAMiL,mBAAmBvc,EAAKvD,OAH/C,UAKE,eAAC,GAAD,2BAAUkf,IAAV,IAA4BtZ,SAAUrC,EAAKvD,QAC3C,eAACif,GAAD,UAAQ1b,EAAK4B,SALR5B,EAAK4B,SAShB,0CACA,gBAAC4Z,GAAD,CACEC,SAAoC,WAA1BnK,EAAMkL,gBAChBtG,QAAS,kBAAM5E,EAAMmL,sBAAsB,WAF7C,UAIE,eAAC,GAAD,2BAAUd,IAAV,IAA4BtZ,SAAU,IAAK+C,QAAQ,YACnD,eAACsW,GAAD,wBAED/W,EAAM7J,KAAI,SAACiK,GACV,OACE,gBAACyW,GAAD,CAEEC,SAAUnK,EAAMkL,kBAAoBzX,EAAKtI,KACzCyZ,QAAS,kBAAM5E,EAAMmL,sBAAsB1X,EAAKtI,OAHlD,UAKE,eAAC,GAAD,2BAAUkf,IAAV,IAA4BtZ,SAAU,IAAK+C,QAASL,EAAKtI,QACzD,eAACif,GAAD,UAAQ3W,EAAKtI,SALRsI,EAAKtI,SAShB,2CACCgC,OAAO6b,KAAK/d,GAAWzB,KAAI,SAACuF,GAC3B,IAAM5D,EAAO4D,EACb,OACE,gBAACmb,GAAD,CAEEC,SAAUnK,EAAMoL,mBAAqBjgB,EACrCyZ,QAAS,kBAAM5E,EAAMqL,uBAAuBlgB,IAH9C,UAKE,eAAC,GAAD,2BAAUkf,IAAV,IAA4BtZ,SAAU,IAAKhC,SAAU5D,KACrD,eAACif,GAAD,UAAQjf,MALHA,MASX,yCACA,eAAC+e,GAAD,CACEC,SAAmC,SAAzBnK,EAAMsL,eAChB1G,QAAS,kBAAM5E,EAAMuL,qBAAqB,SAF5C,SAIE,eAACnB,GAAD,wBAGJ,uBAAK3H,MAAO,CAAEzJ,OAAQ,OAAtB,UACE,eAAC,IAAD,CAAMwS,GAAG,QAAT,kBACA,wBACA,yBACE/I,MAAO,CAAEC,UAAW,IACpBkC,QAAS,WACP,IAAM6G,EAAG,U9E5FW,+B8E4FX,iBAA+BzL,EAAMzJ,MAC9C4F,OAAOuP,KAAKD,EAAK,WAJrB,yBASA,wBACA,yBAAQhJ,MAAO,CAAEC,UAAW,IAAMkC,QAAS5E,EAAMyG,KAAjD,8BAGA,wBACEhE,MAAO,CAAEC,UAAW,IACpB3P,MAAOiN,EAAMzJ,KACboV,SAAU,SAACzK,GAAD,OAAWlB,EAAM8K,QAAQ5J,EAAMzX,OAAOsJ,MAAM8X,QAAQ,MAAO,MACrEe,YAAY,gCAEd,yBAAQnJ,MAAO,CAAEC,UAAW,IAAMkC,QAAS5E,EAAMyG,KAAjD,mCC1IFvE,GAAUL,IAAOC,IAAV,+HAaA+J,GAAgC,SAAC7L,GAAW,IAAD,EACdpD,IAAMC,SAA0B,MADlB,mBAC/CmO,EAD+C,KACjCc,EADiC,OAERlP,IAAMC,SAA6B,MAF3B,mBAE/CqO,EAF+C,KAE9Ba,EAF8B,OAGNnP,IAAMC,SAA8B,MAH9B,mBAG/CuO,EAH+C,KAG7BY,EAH6B,OAIVpP,IAAMC,SAAwB,MAJpB,mBAI/CyO,EAJ+C,KAI/BW,EAJ+B,OAKhBrP,IAAMC,SAAS,IALC,mBAK/CqP,EAL+C,KAKlCC,EALkC,KAOhD1F,EAAO,SAAClQ,GACZ,IAAM1G,EAAM+Y,KAAWrS,GACjBsS,EAAQzO,GAAcvK,GAC5BmQ,EAAMxD,SAASnG,GAAoBE,IACnCyJ,EAAMxD,SAASnG,GAA0BwS,EAAMpU,UAC/CuL,EAAMxD,SAASnG,GAA4BwS,EAAMrS,eASnD,GANAoG,IAAMU,WAAU,WACd,IAAM/G,EAAOgF,KACb4Q,EAAe5V,GACfkQ,EAAKlQ,KACJ,IAEmC,IAAlCyJ,EAAM4G,MAAM1Z,WAAWxD,OACzB,OAAO,8CAGT,IAAM0iB,EAAgB,WACpBN,EAAgB,MAChBC,EAAmB,MACnBC,EAAoB,MACpBC,EAAkB,OAwDpB,OACE,gBAAC,GAAD,WACE,eAAC,GAAD,CACEjB,aAAcA,EACdC,mBAzDqB,SAACvc,GAC1B0d,IACAN,EAAgBpd,IAwDZwc,gBAAiBA,EACjBC,sBAtDwB,SAACrX,GAC7BsY,IACAL,EAAmBjY,IAqDfsX,iBAAkBA,EAClBC,uBAnDyB,SAACvQ,GAC9BsR,IACAJ,EAAoBlR,IAkDhBwQ,eAAgBA,EAChBC,qBAhDuB,SAACc,GAC5BD,IACAH,EAAkBI,IA+Cd9V,KAAM2V,EACNpB,QAASqB,EACT1F,KAAM,kBAAMA,EAAKyF,MAEnB,eAAC,GAAD,CAAKzX,QAASuL,EAAM4G,MAAM1Z,WAAY8c,gBAhDlB,SAAC9f,EAAoBoI,GAC3C,IAAMga,EAAe,eAAQha,GACzB0Y,IACFsB,EAAgB5d,KAAOsc,GAGrBE,IACEoB,EAAgBxY,QAClBwY,EAAgBxY,QAAU,EAE1BwY,EAAgBxY,QAAUoX,GAI1BE,IACEkB,EAAgBvd,gBACXud,EAAgBvd,SAEvBud,EAAgBvd,SAAW,CAAEU,GAAI,UAAWtE,KAAMigB,IAIlDE,IACoC,IAAlCgB,EAAgB9Z,cAClB8Z,EAAgB9Z,c/EvEgB,G+EyEhC8Z,EAAgB9Z,cAAgB,GAIpCwN,EAAMxD,SAASnG,GAAuB,CAAEnM,WAAUoI,SAAUga,YC9F1DpK,GAAUL,IAAOC,IAAV,+LAUAyK,GAAgB,WAAO,IAAD,EACPC,YAAgB5V,GAAMH,IADf,mBAC1BmQ,EAD0B,KACnBpK,EADmB,OAEDqK,YAAsB4F,EAAiB,CACrEC,IAAKD,EACLE,MAAM,EACN1F,OAAQ,KALuB,mBAE1BhJ,EAF0B,YAElB2O,EAFkB,EAElBA,KAAMrE,EAFY,EAEZA,MAFY,EAOV1B,YAASgG,EAAc,CAAE5F,OAAQ,KAAjD6F,EAP0B,oBAQ3BrL,EAAeD,KARY,EASqB5E,IAAMC,ShFnC3B,MgF0BA,mBAS1B0M,EAT0B,KASLC,EATK,KAyCjC,OA9BA5M,IAAMU,WAAU,WACVmE,GAAgB8H,GAClBtL,MAED,CAACwD,IAEJ7E,IAAMU,WAAU,YACc,IAAxBiM,EACFqD,IAEA3O,MAED,CAACsL,IAEJ3M,IAAMU,WAAU,WACd,GAAyB,aAArBsJ,EAAMrY,aACJga,GACFA,EAAMwE,KAAK,GAAK,EAAGrkB,GAEjB6gB,GAAqB,CACvB,IAAMlE,EAAQC,YAAW,WACvBwH,MACCpkB,GACH,OAAO,WACL6c,aAAaF,OAIlB,CAACuB,EAAMrY,WAAYgb,IAGpB,eAAC,GAAD,UACE,eAAC,IAAD,UACE,gBAAC,IAAD,WACE,eAAC,IAAD,CAAOyD,OAAK,EAACC,KAAK,cAAlB,SACE,eAAC,GAAD,CAAcrG,MAAOA,EAAOpK,SAAUA,MAExC,eAAC,IAAD,CAAOwQ,OAAK,EAACC,KAAK,IAAlB,SACE,eAAC,GAAD,CACErG,MAAOA,EACPpK,SAAUA,EACV+M,oBAAqBA,EACrBC,uBAAwBA,cC5EtC0D,IAASC,OAAO,eAAC,GAAD,IAAS9L,SAAS+L,eAAe,W","file":"static/js/main.edd4c1f0.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/crystal-cave-song.c6cc657d.mp3\";","export default __webpack_public_path__ + \"static/media/no-hope.11d9baff.mp3\";","/** DEBUG */\n\nexport const PLAY_MUSIC_AT_START = true;\nexport const DEBUG_SPAWN_CREATURES = true;\n\n/** END DEGUG */\n\nexport const PAUSE_TIME_BETWEEN_MOVES = 126; // ms\nexport const ANIMATIONS_DURATION = 200; // Also update animations.css <= could use scss to use variable\nexport const GAMEOVER_FADEOUT_DURATION = 1000;\n\nexport const CELL_WIDTH_IN_PIXELS = 29;\nexport const NUMBER_OF_CELLS_IN_VIEWPORT_X = 31; // Has to be odd to center the player\nexport const NUMBER_OF_CELLS_IN_VIEWPORT_Y = 21; // Has to be odd to center the player\nexport const VIEWPORT_WIDTH_IN_PIXELS = NUMBER_OF_CELLS_IN_VIEWPORT_X * CELL_WIDTH_IN_PIXELS + 1;\nexport const VIEWPORT_HEIGHT_IN_PIXELS = NUMBER_OF_CELLS_IN_VIEWPORT_Y * CELL_WIDTH_IN_PIXELS + 1;\n\nexport const CELL_WIDTH_MAP_GENERATOR = 20;\n\nexport const GRID_WIDTH = 60; // number of cells\nexport const GRID_HEIGHT = 38; // number of cells\n\n// Circles on grid look nicer with N.5 radius.\n// See: https://www.redblobgames.com/grids/circle-drawing/#aesthetics\nexport const MAX_CLEAR_VISIBILITY = 6.5;\nexport const MAX_VISIBILITY = 8.5;\n\nexport const INITIAL_MAX_HP = 125;\nexport const NUMBER_OF_INVENTORY_SLOTS = 8;\n\nexport const SMALL_GOLD_AMOUNT = 20;\nexport const SMALL_GOLD_MODIFIER = 12;\nexport const BIG_GOLD_AMOUNT = 100;\nexport const BIG_GOLD_MODIFIER = 50;\n\nexport const NUMBER_OF_ROUNDS_BURNING = 30;\nexport const BURNING_DAMAGE_PERCENTAGE = 9;\n\nexport const PLAYER_BASE_ATTACK = '3d5+3';\nexport const PLAYER_BASE_AC = 13;\n\nexport const MIN_GOLD_SPAWN_NUMBER = 3;\nexport const MAX_GOLD_SPAWN_NUMBER = 10;\n\nexport const MIN_HORDES_NUMBER = 5;\nexport const MAX_HORDES_NUMBER = 10;\n\nexport const NFT_OPERATOR_URL = 'https://map-nft.rootmud.xyz/';\n","import { Position } from '../typings/position';\n\nexport const getAdjacentPositions = (\n  p: Position,\n  mapWidth: number,\n  mapHeight: number\n): Position[] => {\n  const up: Position = [p[0], Math.max(0, p[1] - 1)];\n  const down: Position = [p[0], Math.min(mapHeight - 1, p[1] + 1)];\n  const left: Position = [Math.max(0, p[0] - 1), p[1]];\n  const right: Position = [Math.min(p[0] + 1, mapWidth - 1), p[1]];\n  return [up, down, left, right];\n};\n","// Performance benchmark\n// 5x4 ~ 0.24ms\n// 25x21 ~ 1.21ms\n// 30x30 ~ 2.21ms\n// 60x38 ~ 6.96ms (can go up to about 16 sometimes)\n\n// Some ideas to optimize this function even further:\n// https://www.reddit.com/r/roguelikedev/comments/nck6ur/sharing_saturday_362/gyfk38l/?utm_source=reddit&utm_medium=web2x&context=3\n\nimport { TileType } from '../constants/tiles';\nimport { Position } from '../typings/position';\nimport { getAdjacentPositions } from './getAdjacentPositions';\n\nexport const getDijkstraMap = (map: TileType[][], target: Position): string[][] => {\n  // const t0 = performance.now();\n  const mapWidth = map[0].length;\n  const mapHeight = map.length;\n  const result: string[][] = map.map((row) => row.map((cell) => (cell === '#' ? '#' : '')));\n\n  let frontier: Position[] = [target];\n\n  let distance = 0;\n  const getDistance = () => distance;\n\n  while (frontier.length !== 0) {\n    const newFrontier: Position[] = [];\n\n    frontier.forEach((position) => {\n      result[position[1]][position[0]] = String(getDistance());\n      const adjacentPositions = getAdjacentPositions(position, mapWidth, mapHeight);\n      adjacentPositions.forEach((p) => {\n        if (map[p[1]][p[0]] !== '#' && result[p[1]][p[0]] === '') {\n          // NOTE: This next comparison is key to not have duplicates\n          // NOTE: Using JSON.stringify is not very performant\n          if (!newFrontier.map((obj) => JSON.stringify(obj)).includes(JSON.stringify(p))) {\n            newFrontier.push(p);\n          }\n        }\n      });\n    });\n    distance++;\n    frontier = [...newFrontier];\n  }\n  // const t1 = performance.now();\n  // console.log('Time: ', `${t1 - t0}ms`);\n  return result;\n};\n","import { GameState } from './game';\n\nexport const initRound = (draft: GameState): void => {\n  draft.interactionText = '';\n  draft.hitsLastRound = [];\n  draft.deathPositionsThisRound = [];\n  draft.sounds = [];\n  draft.playerPreviousPosition = draft.playerPosition;\n};\n","export default \"data:image/png;base64,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\"","import roguelikecreatures from '../assets/images/roguelikecreatures.png';\nimport { ActiveConditions } from '../typings/activeConditions';\nimport { Position } from '../typings/position';\n\nexport type CreatureType = 'goblin' | 'rat';\n\nexport type Trait = 'keenSmell';\n\nexport type CreatureStatus = 'idle' | 'hostile';\n\nexport interface Creature {\n  type: CreatureType;\n  maxHp: number;\n  spritePosition: Position;\n  imageSrc: string;\n  baseAttack: string;\n  baseAC: number;\n  aggroRange: number;\n  spawnNumber: number;\n  traits: Trait[];\n}\n\nexport interface CreatureEntity {\n  id: string;\n  type: CreatureType;\n  position: Position;\n  hp: number;\n  maxHp: number;\n  conditions: ActiveConditions;\n  status: CreatureStatus;\n  walkingDistanceToPlayer: number;\n}\n\nexport const CREATURES: { [C in CreatureType]: Creature } = {\n  // A rather robust standard opponent\n  goblin: {\n    type: 'goblin',\n    maxHp: 25,\n    spritePosition: [0, 2],\n    imageSrc: roguelikecreatures,\n    baseAttack: '1d8+5',\n    baseAC: 8,\n    aggroRange: 6,\n    spawnNumber: 2,\n    traits: [],\n  },\n  // Spawn in large groups and aggro from far away without needing LOS\n  rat: {\n    type: 'rat',\n    maxHp: 10,\n    spritePosition: [0, 1],\n    imageSrc: roguelikecreatures,\n    baseAttack: '2d4',\n    baseAC: 10,\n    aggroRange: 10,\n    spawnNumber: 5,\n    traits: ['keenSmell'],\n  },\n};\n","import { Position } from '../typings/position';\n\ninterface Options {\n  center: Position;\n  position: Position;\n  radius: number;\n}\n\nexport const isInsideCircle = ({ center, position, radius }: Options): boolean => {\n  const dx = center[0] - position[0];\n  const dy = center[1] - position[1];\n  const distanceSquared = dx * dx + dy * dy;\n  return distanceSquared <= radius * radius;\n};\n","// From: https://www.redblobgames.com/grids/line-drawing.html#supercover\n\nimport { Position } from '../typings/position';\n\nconst diagonalDistance = (p0: Position, p1: Position) => {\n  const dx = p1[0] - p0[0];\n  const dy = p1[1] - p0[1];\n  return Math.max(Math.abs(dx), Math.abs(dy));\n};\n\nconst roundPosition = (p: Position): Position => {\n  return [Math.round(p[0]), Math.round(p[1])];\n};\n\nconst lerp = (start: number, end: number, t: number) => {\n  return start + t * (end - start);\n};\n\nconst lerpPoint = (p0: Position, p1: Position, t: number): Position => {\n  return [lerp(p0[0], p1[0], t), lerp(p0[1], p1[1], t)];\n};\n\nexport const line = (p0: Position, p1: Position): Position[] => {\n  const positions: Position[] = [];\n  const N = diagonalDistance(p0, p1);\n  for (let step = 0; step <= N; step++) {\n    const t = N === 0 ? 0.0 : step / N;\n    positions.push(roundPosition(lerpPoint(p0, p1, t)));\n  }\n  return positions;\n};\n","import { DiceRoll } from 'rpg-dice-roller';\n\nimport { PLAYER_BASE_AC } from '../constants/config';\nimport { Creature, CreatureEntity, CREATURES } from '../constants/creatures';\nimport { SOUNDS } from '../game-ui/hooks/useSoundsManager';\nimport { Position } from '../typings/position';\nimport { getAdjacentPositions } from '../utils/getAdjacentPositions';\nimport { isInsideCircle } from '../utils/isInsideCircle';\nimport { line } from '../utils/line';\nimport { GameState } from './game';\n\nconst attackPlayer = (draft: GameState, template: Creature) => {\n  // Hint: interact with the Creatures.\n  // Check if the attack hits\n  console.log('hit create');\n  const hitRoll = new DiceRoll('d20');\n  if (hitRoll.total < PLAYER_BASE_AC) {\n    draft.eventLogs.push(`The ${template.type} misses you.`);\n    return;\n  }\n  // Deal damage\n  const isCriticalHit = hitRoll.total === 20;\n  const dice = isCriticalHit ? `${template.baseAttack}*2` : template.baseAttack;\n  const damageRoll = new DiceRoll(dice);\n  const damage = damageRoll.total;\n  draft.hitsLastRound.push({ creatureId: 'player', damage });\n  draft.hp = Math.max(draft.hp - damage, 0);\n  draft.waitStreak = 0;\n  draft.eventLogs.push(\n    `${isCriticalHit ? '[CRIT] ' : ''}The ${template.type} hits you for ${damage} damage!`\n  );\n  draft.sounds.push(`${template.type}Attack` as keyof typeof SOUNDS);\n  if (draft.hp === 0) {\n    draft.eventLogs.push('You died.');\n    draft.deathText = `Killed by a ${template.type} on depth ${draft.depth}.`;\n    draft.gameStatus = 'gameover';\n  }\n};\n\nconst tryMove = (\n  draft: GameState,\n  entity: CreatureEntity,\n  template: Creature,\n  adjacentPositions: Position[]\n) => {\n  // Check if creature is in aggro range\n  const isInAggroRange = isInsideCircle({\n    center: draft.playerPosition,\n    position: entity.position,\n    radius: template.aggroRange,\n  });\n\n  if (!isInAggroRange) {\n    entity.status = 'idle';\n    return;\n  }\n\n  // Check if creature has LOS\n  if (!template.traits.includes('keenSmell')) {\n    const inBetweenOpaqueTiles = line(entity.position, draft.playerPosition).filter(\n      (p) => draft.currentMap[p[1]][p[0]].tile === '#'\n      // Note: What about doors?\n    );\n\n    const numberOfInBetweenOpaqueTiles = inBetweenOpaqueTiles.length;\n    const hasLOS = numberOfInBetweenOpaqueTiles === 0;\n    if (hasLOS) {\n      entity.status = 'hostile';\n    }\n  } else {\n    entity.status = 'hostile';\n  }\n\n  if (entity.status === 'idle') {\n    return;\n  }\n\n  const shuffledAdjacentPositions = adjacentPositions.sort(() => Math.random() - 0.5);\n\n  // Remove options already occupied by a creature\n  const shuffledEmptyAdjacentPositions = shuffledAdjacentPositions.filter((position) => {\n    return !draft.currentMap[position[1]][position[0]].creature;\n  });\n\n  // TODO: return numbers from getDijkstraMap\n  const distances = shuffledEmptyAdjacentPositions.map((p) => {\n    return draft.dijkstraMap[p[1]][p[0]] === '#' ? Infinity : Number(draft.dijkstraMap[p[1]][p[0]]);\n  });\n\n  const nextDistance = Math.min(...distances);\n  if (nextDistance === 0 || nextDistance === Infinity) {\n    // Cannot move where the player is or to a non-passable position\n    return;\n  }\n  const nextPositionIndex = distances.findIndex((d) => d === nextDistance);\n  const nextPosition = shuffledEmptyAdjacentPositions[nextPositionIndex];\n\n  // Do not make creature moving away if they are surrounded by 2 or more walls\n  const currentDistance = Number(draft.dijkstraMap[entity.position[1]][entity.position[0]]);\n  if (distances.filter((d) => d === Infinity).length >= 2 && nextDistance > currentDistance) {\n    return;\n  }\n\n  if (draft.deathPositionsThisRound.map(String).includes(String(nextPosition))) {\n    // Do not move creatures on top of a creature that just died this round\n    return;\n  }\n\n  // Perform the move\n  draft.currentMap[nextPosition[1]][nextPosition[0]].creature = {\n    id: entity.id,\n    type: entity.type,\n  };\n  delete draft.currentMap[entity.position[1]][entity.position[0]].creature;\n  entity.position = nextPosition;\n  entity.walkingDistanceToPlayer = nextDistance;\n};\n\nexport const performCreaturesActions = (draft: GameState): void => {\n  const mapWidth = draft.currentMap[0].length;\n  const mapHeight = draft.currentMap.length;\n\n  Object.entries(draft.creatures).forEach(([, entity]) => {\n    const adjacentPositions = getAdjacentPositions(entity.position, mapWidth, mapHeight);\n    const template = CREATURES[entity.type];\n    if (\n      adjacentPositions\n        .map((p) => JSON.stringify(p))\n        .includes(JSON.stringify(draft.playerPreviousPosition))\n    ) {\n      attackPlayer(draft, template);\n    } else {\n      tryMove(draft, entity, template, adjacentPositions);\n    }\n  });\n};\n","export const getRandomIntInclusive = (min: number, max: number, rng?: () => number): number => {\n  const getRandom = rng ? rng : Math.random;\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(getRandom() * (max - min + 1) + min); // The maximum is inclusive and the minimum is inclusive\n};\n","export type ConditionType = 'burning';\n\ninterface Condition {\n  duration: number;\n}\n\nexport interface ActiveCondition {\n  activeRounds: number;\n}\n\nexport const CONDITIONS: { [C in ConditionType]: Condition } = {\n  burning: {\n    duration: 10,\n  },\n};\n","export const NON_REVEALED_BACKGROUND_COLOR = 'rgb(0,0,0,1)';\nexport const DEFAULT_FONT_COLOR = '#5C606A';\n\nexport type TileType = ' ' | '#' | '.' | '@' | '+' | '\"' | \"'\" | '>' | 'ꅃ';\n\nexport interface Tile {\n  type: TileType;\n  name: string;\n  nameInSentence: string;\n  clearBackgroundColor: string;\n  dimBackgroundColor: string;\n  clearFontColor: string;\n  dimFontColor: string;\n  canWalkThrough: boolean;\n  flammability: number; // From 0 to 1 | 0 = won't burn; 1 = burns for sure next round\n  // opacity: number;\n}\n\n// TODO: Refactor using same pattern as in Conditions\n\nexport const TILES: Tile[] = [\n  {\n    type: ' ',\n    name: 'void',\n    nameInSentence: 'the void',\n    clearBackgroundColor: 'rgb(0,0,0,1)',\n    dimBackgroundColor: 'rgb(0,0,0,1)',\n    clearFontColor: DEFAULT_FONT_COLOR,\n    dimFontColor: '#555564',\n    canWalkThrough: true,\n    flammability: 0,\n  },\n  {\n    type: '#',\n    name: 'wall',\n    nameInSentence: 'a wall',\n    clearBackgroundColor: '#BEB5C4',\n    dimBackgroundColor: '#6E6E6E',\n    clearFontColor: 'black',\n    dimFontColor: 'black',\n    canWalkThrough: false,\n    flammability: 0,\n  },\n  {\n    type: '.',\n    name: 'ground',\n    nameInSentence: 'the ground',\n    clearBackgroundColor: '#131226',\n    dimBackgroundColor: '#020211',\n    clearFontColor: DEFAULT_FONT_COLOR,\n    dimFontColor: '#555564',\n    canWalkThrough: true,\n    flammability: 0,\n  },\n  {\n    type: '@',\n    name: 'spawn',\n    nameInSentence: 'where you come from',\n    clearBackgroundColor: '#131226',\n    dimBackgroundColor: '#020211',\n    clearFontColor: DEFAULT_FONT_COLOR,\n    dimFontColor: '#555564',\n    canWalkThrough: true,\n    flammability: 0,\n  },\n  {\n    type: '+',\n    name: 'woodenDoor',\n    nameInSentence: 'a wooden door',\n    clearBackgroundColor: '#732e1d',\n    dimBackgroundColor: '#511E12',\n    clearFontColor: '#EB833D',\n    dimFontColor: '#EB833D',\n    canWalkThrough: true,\n    flammability: 0.12,\n  },\n  {\n    type: '\"',\n    name: 'grass',\n    nameInSentence: 'some grass',\n    clearBackgroundColor: '#131226',\n    dimBackgroundColor: '#020211',\n    clearFontColor: '#548419',\n    dimFontColor: '#245702',\n    canWalkThrough: true,\n    flammability: 0.55,\n  },\n  {\n    type: \"'\",\n    name: 'ashes',\n    nameInSentence: 'a pile of ashes',\n    clearBackgroundColor: '#131226',\n    dimBackgroundColor: '#020211',\n    clearFontColor: 'grey',\n    dimFontColor: '#808080',\n    canWalkThrough: true,\n    flammability: 0,\n  },\n  {\n    type: '>',\n    name: 'downwardStaircase',\n    nameInSentence: 'a downward staircase',\n    clearBackgroundColor: '#131226',\n    dimBackgroundColor: '#020211',\n    clearFontColor: '#D0CC00',\n    dimFontColor: '#D0CC00',\n    canWalkThrough: true,\n    flammability: 0,\n  },\n];\n\nexport const getTile = (tileType: TileType): Tile | undefined => {\n  return TILES.find((tile) => tile.type === tileType);\n};\n","// Based on https://www.redblobgames.com/grids/circle-drawing/\n\nimport { Position } from '../typings/position';\nimport { isInsideCircle } from '../utils/isInsideCircle';\n\nexport interface GetSurroundingPositionsOptions {\n  position: Position;\n  radius: number;\n  mapWidth: number;\n  mapHeight: number;\n}\n\nexport const getSurroundingPositions = (options: GetSurroundingPositionsOptions): Position[] => {\n  const { position, radius, mapWidth, mapHeight } = options;\n  const positions: Position[] = [];\n\n  const top = Math.floor(position[1] - radius);\n  const bottom = Math.ceil(position[1] + radius);\n  const left = Math.floor(position[0] - radius);\n  const right = Math.ceil(position[0] + radius);\n\n  // Can be optimized further? See article.\n  for (let y = top; y <= bottom; y++) {\n    for (let x = left; x <= right; x++) {\n      if (isInsideCircle({ center: position, position: [x, y], radius })) {\n        if (x >= 0 && y >= 0 && x < mapWidth && y < mapHeight) {\n          positions.push([x, y]);\n        }\n      }\n    }\n  }\n\n  return positions;\n};\n","import { checkCreaturesDeath } from './checkCreaturesDeath';\nimport { checkWaitStreak } from './checkWaitStreak';\nimport { GameState } from './game';\nimport { performCreaturesActions } from './performCreaturesActions';\nimport { resolveConditions } from './resolveConditions';\nimport { resolveStartingAndEndingConditions } from './resolveStartingAndEndingConditions';\nimport { updateBurningTiles } from './updateBurningTiles';\n\nexport const tick = (draft: GameState): void => {\n  draft.round++;\n  resolveConditions(draft);\n  draft.currentMap = updateBurningTiles(draft.currentMap);\n  resolveStartingAndEndingConditions(draft);\n  checkCreaturesDeath(draft);\n  performCreaturesActions(draft);\n  checkWaitStreak(draft);\n};\n","import { BURNING_DAMAGE_PERCENTAGE } from '../constants/config';\nimport { getRandomIntInclusive } from '../utils/getRandomIntInclusive';\nimport { GameState } from './game';\n\nexport const resolveConditions = (draft: GameState): void => {\n  if (draft.playerConditions.burning) {\n    if (draft.playerConditions.burning.activeRounds === 1) {\n      draft.eventLogs.push('You are no longer on fire');\n      delete draft.playerConditions.burning;\n    } else {\n      const damagePercentage = getRandomIntInclusive(\n        Math.min(0, BURNING_DAMAGE_PERCENTAGE - 5),\n        BURNING_DAMAGE_PERCENTAGE + 2\n      );\n      const fireDamage = Math.ceil(draft.maxHp * (damagePercentage / 100));\n      draft.hp = Math.max(draft.hp - fireDamage, 0);\n      draft.eventLogs.push(`You suffer ${fireDamage} points of fire damage.`);\n      if (draft.hp === 0) {\n        draft.eventLogs.push('You burnt to death...');\n        draft.deathText = `Burnt to death on depth ${draft.depth}.`;\n        draft.gameStatus = 'gameover';\n      }\n      draft.playerConditions.burning.activeRounds--;\n    }\n  }\n};\n","import { NUMBER_OF_ROUNDS_BURNING } from '../constants/config';\nimport { getTile } from '../constants/tiles';\nimport { CellData } from '../typings/cell';\nimport { Position } from '../typings/position';\nimport {\n  getSurroundingPositions,\n  GetSurroundingPositionsOptions,\n} from '../utils/getSurroundingPositions';\n\nexport const updateBurningTiles = (map: CellData[][]): CellData[][] => {\n  const startedBurningTiles: Position[] = [];\n  const nextMap = map.map((arr) => arr.slice());\n  const mapHeight = nextMap.length;\n  const mapWidth = nextMap[0].length;\n\n  // Propagate fire\n  nextMap.forEach((row, j) => {\n    row.forEach((cellData, i) => {\n      if (\n        cellData.burningRounds > 0 &&\n        !startedBurningTiles.some((position) => position[0] === i && position[1] === j)\n      ) {\n        const options: GetSurroundingPositionsOptions = {\n          position: [i, j],\n          radius: 1,\n          mapWidth,\n          mapHeight,\n        };\n        const surroundingPositions = getSurroundingPositions(options);\n        surroundingPositions.forEach((p) => {\n          if (JSON.stringify(p) !== JSON.stringify([i, j])) {\n            if (nextMap[p[1]][p[0]].burningRounds === 0) {\n              const tile = getTile(nextMap[p[1]][p[0]].tile);\n              if (tile && tile.flammability > 0) {\n                if (Math.random() < tile.flammability) {\n                  startedBurningTiles.push(p);\n                  nextMap[p[1]][p[0]].burningRounds = NUMBER_OF_ROUNDS_BURNING + 1;\n                }\n              }\n            }\n          }\n        });\n      }\n    });\n  });\n\n  // Decrement burning rounds\n  nextMap.forEach((row, j) => {\n    row.forEach((cellData, i) => {\n      if (cellData.burningRounds > 0) {\n        const nextBurningRounds = cellData.burningRounds - 1;\n        const tileType = nextBurningRounds === 0 ? \"'\" : cellData.tile;\n        nextMap[j][i] = { ...cellData, burningRounds: nextBurningRounds, tile: tileType };\n      }\n    });\n  });\n  return nextMap;\n};\n","import { CONDITIONS } from '../constants/conditions';\nimport { GameState } from './game';\n\nexport const resolveStartingAndEndingConditions = (draft: GameState): void => {\n  if (draft.currentMap[draft.playerPosition[1]][draft.playerPosition[0]].burningRounds > 0) {\n    if (!draft.playerConditions.burning) {\n      draft.eventLogs.push('You start burning!');\n    }\n    draft.playerConditions.burning = { activeRounds: CONDITIONS.burning.duration };\n  }\n};\n","import { SOUNDS } from '../game-ui/hooks/useSoundsManager';\nimport { GameState } from './game';\n\nexport const checkCreaturesDeath = (draft: GameState): void => {\n  for (const [key, value] of Object.entries(draft.creatures)) {\n    if (value.hp <= 0) {\n      draft.eventLogs.push(`The ${value.type} dies!`);\n      draft.deathPositionsThisRound.push(value.position);\n      delete draft.creatures[key];\n      delete draft.currentMap[value.position[1]][value.position[0]].creature;\n      draft.sounds.push(`${value.type}Death` as keyof typeof SOUNDS);\n    }\n  }\n};\n","import { GameState } from './game';\n\nexport const checkWaitStreak = (draft: GameState): void => {\n  if (draft.hp < draft.maxHp) {\n    if (draft.waitStreak === 1) {\n      draft.eventLogs.push('You catch your breath.');\n    }\n    if (draft.waitStreak === 2) {\n      draft.eventLogs.push('You take a deep breathe.');\n    }\n    if (draft.waitStreak >= 3) {\n      if (draft.waitStreak === 3) {\n        draft.eventLogs.push('You feel a little bit better.');\n      }\n      draft.hp++;\n    }\n  } else {\n    if (draft.waitStreak === 1) {\n      draft.eventLogs.push('You start waiting.');\n    }\n  }\n};\n","import { GameState } from './game';\nimport { initRound } from './initRound';\nimport { tick } from './tick';\n\nexport const reduceDoPlayerAction = (draft: GameState, playerAction: string): void => {\n  if (draft.playerActions.includes(playerAction) === false) {\n    return;\n  }\n\n  if (playerAction === 'wait') {\n    initRound(draft);\n    draft.waitStreak++;\n    tick(draft);\n  }\n};\n","export default __webpack_public_path__ + \"static/media/roguelikeitems.1cd93c68.png\";","import roguelikeitems from '../assets/images/roguelikeitems.png';\nimport { Position } from '../typings/position';\n\nexport type ItemType = 'Sword' | 'Ruby' | 'Key' | 'Coins' | 'ManyCoins';\n\ninterface Item {\n  type: ItemType;\n  spritePosition: Position;\n  imageSrc: string;\n  nameInSentence: string;\n}\n\n// TODO: Refactor using same pattern as in Conditions\n\nexport const ITEMS: Item[] = [\n  {\n    type: 'Sword',\n    spritePosition: [2, 7],\n    imageSrc: roguelikeitems,\n    nameInSentence: 'a sword',\n  },\n  {\n    type: 'Ruby',\n    spritePosition: [3, 3],\n    imageSrc: roguelikeitems,\n    nameInSentence: 'a ruby',\n  },\n  {\n    type: 'Key',\n    spritePosition: [11, 3],\n    imageSrc: roguelikeitems,\n    nameInSentence: 'a key',\n  },\n  {\n    type: 'Coins',\n    spritePosition: [8, 3],\n    imageSrc: roguelikeitems,\n    nameInSentence: 'small coins',\n  },\n  {\n    type: 'ManyCoins',\n    spritePosition: [7, 3],\n    imageSrc: roguelikeitems,\n    nameInSentence: 'a lot of coins',\n  },\n];\n\nexport const getItem = (itemType: ItemType): Item | undefined => {\n  return ITEMS.find((item) => item.type === itemType);\n};\n","import { getItem } from '../constants/items';\nimport { getTile, TileType } from '../constants/tiles';\nimport { CellContent, CreatureData } from '../typings/cell';\nimport { Visibility } from '../typings/visibility';\nimport { GameState } from './game';\n\nexport interface HoverCellPayload {\n  tileType: TileType;\n  visibility: Visibility;\n  revealed: boolean;\n  content: CellContent;\n  burning: boolean;\n  creature?: CreatureData;\n  creatureDiedThisRound?: boolean;\n}\n\nexport const reduceHoverCell = (draft: GameState, payload: HoverCellPayload): void => {\n  const {\n    tileType,\n    visibility,\n    revealed,\n    content,\n    burning,\n    creature,\n    creatureDiedThisRound,\n  } = payload;\n\n  if (content === 'Player') {\n    draft.interactionText = 'This is you.';\n    draft.hoveredCreatureId = 'Player';\n    return;\n  }\n\n  if (revealed === false && visibility === 'dark') {\n    return;\n  }\n\n  if (creature && visibility !== 'dark') {\n    draft.hoveredCreatureId = creature.id;\n\n    if (visibility === 'dim') {\n      draft.interactionText = 'You see something standing in the shadows.';\n      return;\n    }\n    if (visibility === 'clear') {\n      draft.interactionText = `You see a ${creature.type}!`;\n      return;\n    }\n  }\n\n  if (visibility === 'dim' && !revealed && content !== 0) {\n    draft.interactionText = 'You discern something on the ground.';\n    return;\n  }\n\n  let verb = 'see';\n  let location = '';\n\n  if (visibility === 'dark' && revealed) {\n    verb = 'remember seeing';\n  }\n\n  if (visibility === 'dim' && revealed) {\n    verb = 'remember seeing';\n  }\n\n  if (visibility === 'dim') {\n    verb = 'get a glimpse of';\n  }\n\n  let object;\n\n  if (content !== 0) {\n    object = getItem(content)?.nameInSentence;\n  } else {\n    object = getTile(tileType)?.nameInSentence;\n  }\n\n  if (creatureDiedThisRound) {\n    object = 'a very much dead creature';\n  }\n\n  if (verb === 'remember seeing') {\n    location = ' over there';\n  }\n\n  const interactionText = `You ${verb} ${object}${\n    burning && visibility !== 'dark' ? ' burning' : ''\n  }${location}.`;\n\n  draft.interactionText = interactionText;\n};\n","import { v4 as uuid } from 'uuid';\n\nimport { CreatureEntity, CREATURES } from '../constants/creatures';\nimport { GameState } from './game';\n\nexport const reduceInitCreatures = (draft: GameState): void => {\n  draft.currentMap.forEach((row, j) =>\n    row.forEach((cellData, i) => {\n      const creatureData = cellData.creature;\n      if (creatureData) {\n        const id = uuid();\n        const template = CREATURES[creatureData.type];\n        const creature: CreatureEntity = {\n          id,\n          type: creatureData.type,\n          position: [i, j],\n          hp: template.maxHp,\n          maxHp: template.maxHp,\n          conditions: {},\n          status: 'idle',\n          walkingDistanceToPlayer: Number(draft.dijkstraMap[j][i]), // TODO: return numbers from getDijkstraMap\n        };\n        draft.creatures[id] = creature;\n        draft.currentMap[j][i].creature = { id, type: creatureData.type };\n      }\n    })\n  );\n};\n","import { MAX_CLEAR_VISIBILITY, MAX_VISIBILITY } from '../constants/config';\nimport { CellData } from '../typings/cell';\nimport { Position } from '../typings/position';\nimport { getSurroundingPositions } from '../utils/getSurroundingPositions';\nimport { getVisibility } from '../utils/getVisibility';\n\nexport const updateVisibility = (position: Position, gameMap: CellData[][]): CellData[][] => {\n  const newGameMap = gameMap;\n  const mapHeight = newGameMap.length;\n  const mapWidth = newGameMap[0].length;\n  // TODO: Only set to 'dim' to cells that just went out of visibility\n  // Then we should be able to remove \"Set dark revealed cells to dim\"\n  // First reset all cells to dark\n  newGameMap.forEach((row) => {\n    row.forEach((cell) => {\n      cell.visibility = 'dark';\n    });\n  });\n\n  // Get surroundingPositions\n  const options = { position, radius: MAX_VISIBILITY, mapWidth, mapHeight };\n  const surroundingPositions = getSurroundingPositions(options);\n\n  // Visibility\n  surroundingPositions.forEach((p) => {\n    if (!newGameMap[p[1]] || !newGameMap[p[1]][p[0]]) {\n      // This can happen if the map is smaller than the surroundingPositions array\n      return;\n    }\n    const visibility = getVisibility({\n      position: p,\n      playerPosition: position,\n      gameMap: newGameMap,\n      maxClearVisibility: MAX_CLEAR_VISIBILITY,\n      maxVisibility: MAX_VISIBILITY,\n    });\n    newGameMap[p[1]][p[0]].visibility = visibility;\n\n    // Update revealed for visible cells\n    const visible = visibility === 'clear';\n    if (visible && newGameMap[p[1]][p[0]].revealed === false) {\n      newGameMap[p[1]][p[0]].revealed = true;\n    }\n  });\n\n  return newGameMap;\n};\n","import { CellData } from '../typings/cell';\nimport { Position } from '../typings/position';\nimport { Visibility } from '../typings/visibility';\nimport { isInsideCircle } from '../utils/isInsideCircle';\nimport { line } from './line';\n\ninterface Options {\n  position: Position;\n  playerPosition: Position;\n  gameMap: CellData[][];\n  maxClearVisibility: number;\n  maxVisibility: number;\n}\n\nexport const getVisibility = ({\n  position,\n  playerPosition,\n  gameMap,\n  maxClearVisibility,\n  maxVisibility,\n}: Options): Visibility => {\n  const [posX, posY] = position;\n\n  // Can see doors when standing on them\n  if (gameMap[position[1]][position[0]].tile === '+' && playerPosition === position) {\n    return 'clear';\n  }\n\n  // Prevent seing through walls and doors\n  const inBetweenOpaqueTiles = line([posX, posY], playerPosition).filter(\n    (p) =>\n      gameMap[p[1]][p[0]].tile === '#' ||\n      // Count doors as opaque when not standing on them\n      (gameMap[p[1]][p[0]].tile === '+' && JSON.stringify(p) !== JSON.stringify(playerPosition))\n  );\n\n  const numberOfInBetweenOpaqueTiles = inBetweenOpaqueTiles.length;\n\n  if (numberOfInBetweenOpaqueTiles >= 1) {\n    if (\n      (gameMap[position[1]][position[0]].tile !== '#' &&\n        gameMap[position[1]][position[0]].tile !== '+') || // Do not darken adjacent walls and doors\n      ((gameMap[position[1]][position[0]].tile === '#' ||\n        gameMap[position[1]][position[0]].tile === '+') &&\n        numberOfInBetweenOpaqueTiles >= 2) // Prevent seing walls/doors through walls/doors\n    ) {\n      return 'dark';\n    }\n  }\n\n  if (isInsideCircle({ center: playerPosition, position, radius: maxClearVisibility })) {\n    return 'clear';\n  }\n\n  if (isInsideCircle({ center: playerPosition, position, radius: maxVisibility })) {\n    return 'dim';\n  }\n\n  return 'dark';\n};\n","import { DiceRoll } from 'rpg-dice-roller';\n\nimport { GRID_HEIGHT, GRID_WIDTH, PLAYER_BASE_ATTACK } from '../constants/config';\nimport { CreatureType } from '../constants/creatures';\nimport { CREATURES } from '../constants/creatures';\nimport { getTile, Tile } from '../constants/tiles';\nimport { SOUNDS } from '../game-ui/hooks/useSoundsManager';\nimport { MoveDirection } from '../typings/moveDirection';\nimport { Position } from '../typings/position';\nimport { getDijkstraMap } from '../utils/getDijkstraMap';\nimport { GameState } from './game';\nimport { initRound } from './initRound';\nimport { lootItem } from './lootItem';\nimport { tick } from './tick';\nimport { updateVisibility } from './updateVisibility';\n\nconst getNextPosition = (draft: GameState, moveDirection: MoveDirection): Position => {\n  let nextTileX: number;\n  let nextTileY: number;\n  switch (moveDirection) {\n    case 'Left':\n      nextTileX =\n        draft.playerPosition[0] > 0 ? draft.playerPosition[0] - 1 : draft.playerPosition[0];\n      nextTileY = draft.playerPosition[1];\n      break;\n    case 'Right':\n      nextTileX =\n        draft.playerPosition[0] < GRID_WIDTH\n          ? draft.playerPosition[0] + 1\n          : draft.playerPosition[0];\n      nextTileY = draft.playerPosition[1];\n      break;\n    case 'Up':\n      nextTileX = draft.playerPosition[0];\n      nextTileY =\n        draft.playerPosition[1] > 0 ? draft.playerPosition[1] - 1 : draft.playerPosition[1];\n      break;\n    case 'Down':\n      nextTileX = draft.playerPosition[0];\n      nextTileY =\n        draft.playerPosition[1] < GRID_HEIGHT - 1\n          ? draft.playerPosition[1] + 1\n          : draft.playerPosition[1];\n  }\n  return [nextTileX, nextTileY];\n};\n\nconst getCanWalkToNextPosition = (\n  draft: GameState,\n  moveDirection: MoveDirection,\n  nextTile: Tile | undefined\n): boolean => {\n  switch (moveDirection) {\n    case 'Left':\n      return draft.playerPosition[0] > 0 && nextTile?.canWalkThrough === true;\n    case 'Right':\n      return draft.playerPosition[0] < GRID_WIDTH - 1 && nextTile?.canWalkThrough === true;\n    case 'Up':\n      return draft.playerPosition[1] > 0 && nextTile?.canWalkThrough === true;\n    case 'Down':\n      return draft.playerPosition[1] < GRID_HEIGHT - 1 && nextTile?.canWalkThrough === true;\n  }\n};\n\nconst moveToNewPosition = (draft: GameState, position: Position) => {\n  draft.currentMap[draft.playerPosition[1]][draft.playerPosition[0]].content = 0;\n  lootItem(draft, position);\n  draft.currentMap[position[1]][position[0]].content = 'Player';\n  draft.playerPosition = position;\n  draft.currentMap = updateVisibility(position, draft.currentMap);\n  draft.dijkstraMap = getDijkstraMap(\n    draft.currentMap.map((row) => row.map((cellData) => cellData.tile)),\n    position\n  );\n};\n\nconst moveAndStayAtSamePosition = (draft: GameState, tileNameInSentence: string | undefined) => {\n  draft.interactionText = `You hit ${tileNameInSentence || ''}.`;\n};\n\nconst attackCreature = (draft: GameState, id: string, type: CreatureType) => {\n  // Check if the attack hits\n  const creatureAC = CREATURES[type].baseAC;\n  const hitRoll = new DiceRoll('d20');\n  if (hitRoll.total < creatureAC) {\n    draft.eventLogs.push(`You miss the ${type}.`);\n    draft.sounds.push('miss');\n    return;\n  }\n  // Deal damage\n  const isCriticalHit = hitRoll.total === 20;\n  const dice = isCriticalHit ? `${PLAYER_BASE_ATTACK}*2` : PLAYER_BASE_ATTACK;\n  const damageRoll = new DiceRoll(dice);\n  const damage = damageRoll.total;\n  draft.creatures[id].hp = draft.creatures[id].hp - damage;\n  draft.hitsLastRound.push({ creatureId: id, damage });\n  draft.eventLogs.push(\n    `${isCriticalHit ? '[CRIT] ' : ''}You hit the ${type} for ${damage} damage!`\n  );\n  if (isCriticalHit) {\n    draft.sounds.push('crit');\n  } else {\n    draft.sounds.push('attack');\n  }\n  if (draft.creatures[id].hp > 0) {\n    draft.sounds.push(`${type}Pain` as keyof typeof SOUNDS);\n  }\n};\n\nexport const reduceMovePlayer = (draft: GameState, moveDirection: MoveDirection): void => {\n  initRound(draft);\n\n  draft.moveDirection = moveDirection;\n  draft.waitStreak = 0;\n\n  const nextPosition = getNextPosition(draft, moveDirection);\n  const nextTileType = draft.currentMap[nextPosition[1]][nextPosition[0]].tile;\n  const nextTile = getTile(nextTileType);\n  const creature = draft.currentMap[nextPosition[1]][nextPosition[0]].creature;\n\n  if (creature) {\n    attackCreature(draft, creature.id, creature.type);\n  } else if (nextTile?.type === '>') {\n    draft.eventLogs.push(`You reached depth ${draft.depth + 1}!`);\n    draft.sounds.push('stairs');\n    return void draft.depth++;\n  } else if (getCanWalkToNextPosition(draft, moveDirection, nextTile)) {\n    moveToNewPosition(draft, nextPosition);\n  } else {\n    moveAndStayAtSamePosition(draft, nextTile?.nameInSentence);\n  }\n\n  tick(draft);\n};\n","import {\n  BIG_GOLD_AMOUNT,\n  BIG_GOLD_MODIFIER,\n  SMALL_GOLD_AMOUNT,\n  SMALL_GOLD_MODIFIER,\n} from '../constants/config';\nimport { getItem } from '../constants/items';\nimport { Position } from '../typings/position';\nimport { getRandomIntInclusive } from '../utils/getRandomIntInclusive';\nimport { GameState } from './game';\n\nexport const lootItem = (draft: GameState, position: Position): void => {\n  const content = draft.currentMap[position[1]][position[0]].content;\n  if (content && content !== 'Player') {\n    const item = getItem(content);\n    // Hint: interact with the item.\n    console.log('get item');\n    if (item) {\n      if (item.type === 'Coins') {\n        const amount = getRandomIntInclusive(\n          SMALL_GOLD_AMOUNT - SMALL_GOLD_MODIFIER,\n          SMALL_GOLD_AMOUNT + SMALL_GOLD_MODIFIER\n        );\n        draft.gold = draft.gold + amount;\n        draft.eventLogs.push(`You found ${amount} gold.`);\n        draft.sounds.push('lootCoins');\n      } else if (item.type === 'ManyCoins') {\n        const amount = getRandomIntInclusive(\n          BIG_GOLD_AMOUNT - BIG_GOLD_MODIFIER,\n          BIG_GOLD_AMOUNT + BIG_GOLD_MODIFIER\n        );\n        draft.gold = draft.gold + amount;\n        draft.eventLogs.push(`You found ${amount} gold!`);\n        draft.sounds.push('lootManyCoins');\n      } else {\n        draft.inventory.push(content);\n        draft.eventLogs.push(`You found ${item.nameInSentence}.`);\n      }\n    }\n  }\n};\n","import { CellData } from '../typings/cell';\nimport { Position } from '../typings/position';\nimport { GameState } from './game';\n\nexport interface UpdateCellPayload {\n  cellData: CellData;\n  position: Position;\n}\n\nexport const reduceUpdateCell = (draft: GameState, payload: UpdateCellPayload): void => {\n  const { position, cellData } = payload;\n  draft.currentMap[position[1]][position[0]] = cellData;\n};\n","import { INITIAL_MAX_HP } from '../constants/config';\nimport { CreatureEntity } from '../constants/creatures';\nimport { ItemType } from '../constants/items';\nimport { SOUNDS } from '../game-ui/hooks/useSoundsManager';\nimport { ActiveConditions } from '../typings/activeConditions';\nimport { CellData } from '../typings/cell';\nimport { GameStatus } from '../typings/gameStatus';\nimport { Hit } from '../typings/hit';\nimport { MoveDirection } from '../typings/moveDirection';\nimport { Position } from '../typings/position';\nimport { getDijkstraMap } from '../utils/getDijkstraMap';\nimport { reduceDoPlayerAction } from './reduceDoPlayerAction';\nimport { HoverCellPayload, reduceHoverCell } from './reduceHoverCell';\nimport { reduceInitCreatures } from './reduceInitCreatures';\nimport { reduceMovePlayer } from './reduceMovePlayer';\nimport { reduceUpdateCell, UpdateCellPayload } from './reduceUpdateCell';\nimport { updateVisibility } from './updateVisibility';\n\n// ACTIONS\n\nexport type GameAction =\n  | { type: '@@GAME/MOVE_PLAYER'; direction: MoveDirection }\n  | { type: '@@GAME/SET_CURRENT_MAP'; currentMap: CellData[][] }\n  | { type: '@@GAME/SET_SEED'; seed: string }\n  | { type: '@@GAME/INIT_PLAYER_SPAWN'; playerSpawn: Position }\n  | { type: '@@GAME/UPDATE_CELL'; payload: UpdateCellPayload }\n  | { type: '@@GAME/INIT_VISIBILITY' }\n  | { type: '@@GAME/INIT_CREATURES' }\n  | { type: '@@GAME/HOVER_CELL'; payload: HoverCellPayload }\n  | { type: '@@GAME/HOVER_AWAY_FROM_CELL' }\n  | { type: '@@GAME/HOVER_CREATURE_BLOCK'; creatureId: string }\n  | { type: '@@GAME/HOVER_AWAY_FROM_CREATURE_BLOCK' }\n  | { type: '@@GAME/DO_PLAYER_ACTION'; playerAction: string };\n\nconst movePlayer = (direction: MoveDirection): GameAction => ({\n  type: '@@GAME/MOVE_PLAYER',\n  direction,\n});\n\nconst setCurrentMap = (currentMap: CellData[][]): GameAction => ({\n  type: '@@GAME/SET_CURRENT_MAP',\n  currentMap,\n});\n\nconst setSeed = (seed: string): GameAction => ({\n  type: '@@GAME/SET_SEED',\n  seed,\n});\n\nconst initPlayerSpawn = (playerSpawn: Position): GameAction => ({\n  type: '@@GAME/INIT_PLAYER_SPAWN',\n  playerSpawn,\n});\n\nconst updateCell = (payload: UpdateCellPayload): GameAction => ({\n  type: '@@GAME/UPDATE_CELL',\n  payload,\n});\n\nconst initVisibility = (): GameAction => ({\n  type: '@@GAME/INIT_VISIBILITY',\n});\n\nconst initCreatures = (): GameAction => ({\n  type: '@@GAME/INIT_CREATURES',\n});\n\nconst hoverCell = (payload: HoverCellPayload): GameAction => ({\n  type: '@@GAME/HOVER_CELL',\n  payload,\n});\n\nconst hoverAwayFromCell = (): GameAction => ({\n  type: '@@GAME/HOVER_AWAY_FROM_CELL',\n});\n\nconst hoverCreatureBlock = (creatureId: string): GameAction => ({\n  type: '@@GAME/HOVER_CREATURE_BLOCK',\n  creatureId,\n});\n\nconst hoverAwayFromCreatureBlock = (): GameAction => ({\n  type: '@@GAME/HOVER_AWAY_FROM_CREATURE_BLOCK',\n});\n\nconst doPlayerAction = (playerAction: string): GameAction => ({\n  type: '@@GAME/DO_PLAYER_ACTION',\n  playerAction,\n});\n\nexport const gameActions = {\n  movePlayer,\n  setCurrentMap,\n  setSeed,\n  initPlayerSpawn,\n  updateCell,\n  initVisibility,\n  initCreatures,\n  hoverCell,\n  hoverAwayFromCell,\n  hoverCreatureBlock,\n  hoverAwayFromCreatureBlock,\n  doPlayerAction,\n};\n\n// INITIAL_STATE\n\nexport interface GameState {\n  currentMap: CellData[][];\n  dijkstraMap: string[][];\n  seed: string;\n  gameStatus: GameStatus;\n  depth: number;\n  round: number;\n  deathText: string;\n  moveDirection: MoveDirection;\n  playerPosition: Position;\n  playerPreviousPosition: Position;\n  characterName: string;\n  hp: number;\n  maxHp: number;\n  gold: number;\n  equipedItems: ItemType[];\n  inventory: ItemType[];\n  interactionText: string;\n  eventLogs: string[];\n  playerConditions: ActiveConditions;\n  creatures: { [id: string]: CreatureEntity };\n  hitsLastRound: Hit[];\n  deathPositionsThisRound: Position[];\n  hoveredCreatureId: string;\n  sounds: (keyof typeof SOUNDS)[];\n  waitStreak: number;\n  playerActions: string[];\n}\n\nexport const INITIAL_STATE: GameState = {\n  currentMap: [],\n  dijkstraMap: [],\n  seed: '',\n  gameStatus: 'playing',\n  depth: 1,\n  round: 0,\n  deathText: '',\n  moveDirection: 'Right',\n  characterName: 'Kerhebos',\n  interactionText: 'You enter the dungeon.',\n  eventLogs: [],\n  creatures: {},\n  playerPosition: [0, 0],\n  playerPreviousPosition: [0, 0],\n  hp: INITIAL_MAX_HP,\n  maxHp: INITIAL_MAX_HP,\n  equipedItems: [],\n  inventory: [],\n  gold: 0,\n  playerConditions: {},\n  hitsLastRound: [],\n  deathPositionsThisRound: [],\n  hoveredCreatureId: '',\n  sounds: [],\n  waitStreak: 0,\n  playerActions: ['wait'],\n};\n\n// REDUCER\n\nexport const game = (draft = INITIAL_STATE, action: GameAction): GameState | void => {\n  switch (action.type) {\n    case '@@GAME/MOVE_PLAYER':\n      return reduceMovePlayer(draft, action.direction);\n    case '@@GAME/SET_CURRENT_MAP':\n      return void (draft.currentMap = action.currentMap);\n    case '@@GAME/SET_SEED':\n      return void (draft.seed = action.seed);\n    case '@@GAME/INIT_PLAYER_SPAWN':\n      draft.dijkstraMap = getDijkstraMap(\n        draft.currentMap.map((row) => row.map((cellData) => cellData.tile)),\n        action.playerSpawn\n      );\n      draft.playerPreviousPosition = action.playerSpawn;\n      return void (draft.playerPosition = action.playerSpawn);\n    case '@@GAME/UPDATE_CELL':\n      return reduceUpdateCell(draft, action.payload);\n    case '@@GAME/INIT_VISIBILITY':\n      return void (draft.currentMap = updateVisibility(draft.playerPosition, draft.currentMap));\n    case '@@GAME/INIT_CREATURES':\n      return reduceInitCreatures(draft);\n    case '@@GAME/HOVER_CELL':\n      return reduceHoverCell(draft, action.payload);\n    case '@@GAME/HOVER_AWAY_FROM_CELL':\n      draft.hoveredCreatureId = '';\n      return void (draft.interactionText = '');\n    case '@@GAME/HOVER_CREATURE_BLOCK':\n      return void (draft.hoveredCreatureId = action.creatureId);\n    case '@@GAME/HOVER_AWAY_FROM_CREATURE_BLOCK':\n      return void (draft.hoveredCreatureId = '');\n    case '@@GAME/DO_PLAYER_ACTION':\n      return reduceDoPlayerAction(draft, action.playerAction);\n  }\n};\n","import { TileType } from '../constants/tiles';\nimport { Area } from '../typings/area';\nimport { Position } from '../typings/position';\n\ninterface Options {\n  area: Area;\n  map: TileType[][];\n  cellTile: TileType;\n}\n\nexport const findCellsInArea = ({ area, map, cellTile }: Options): Position[] => {\n  const positions: Position[] = [];\n\n  for (let j = area.origin.y; j <= area.end.y; j++) {\n    for (let i = area.origin.x; i <= area.end.x; i++) {\n      if (map[j][i] === cellTile) {\n        positions.push([i, j]);\n      }\n    }\n  }\n  return positions;\n};\n","export const shuffleArray = (array: any[], rng?: () => number): any[] => {\n  let currentIndex = array.length;\n  let randomIndex;\n  const random = rng ? rng : Math.random;\n\n  // While there remain elements to shuffle...\n  while (0 !== currentIndex) {\n    // Pick a remaining element...\n    randomIndex = Math.floor(random() * currentIndex);\n    currentIndex--;\n\n    // And swap it with the current element.\n    [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];\n  }\n\n  return array;\n};\n","import { Area } from '../typings/area';\n\nexport const horizontalSplitArea = (area: Area): [Area, Area] => {\n  const firstArea = {\n    origin: { x: area.origin.x, y: area.origin.y },\n    end: { x: area.end.x, y: Math.floor((area.end.y + area.origin.y) / 2) },\n  };\n  const secondArea = {\n    origin: { x: area.origin.x, y: Math.floor((area.end.y + area.origin.y) / 2) },\n    end: { x: area.end.x, y: area.end.y },\n  };\n  return [firstArea, secondArea];\n};\n","import { Area } from '../typings/area';\n\nexport const verticalSplitArea = (area: Area): [Area, Area] => {\n  const firstArea = {\n    origin: { x: area.origin.x, y: area.origin.y },\n    end: { x: Math.floor((area.end.x + area.origin.x) / 2), y: area.end.y },\n  };\n  const secondArea = {\n    origin: { x: Math.floor((area.end.x + area.origin.x) / 2), y: area.origin.y },\n    end: { x: area.end.x, y: area.end.y },\n  };\n  return [firstArea, secondArea];\n};\n","// Inspired by https://www.youtube.com/watch?v=TlLIOgWYVpI\n\nimport {\n  DEBUG_SPAWN_CREATURES,\n  GRID_HEIGHT,\n  GRID_WIDTH,\n  MAX_GOLD_SPAWN_NUMBER,\n  MAX_HORDES_NUMBER,\n  MIN_GOLD_SPAWN_NUMBER,\n  MIN_HORDES_NUMBER,\n} from '../constants/config';\nimport { CREATURES, CreatureType } from '../constants/creatures';\nimport { TileType } from '../constants/tiles';\nimport { Area } from '../typings/area';\nimport { CellData } from '../typings/cell';\nimport { Level } from '../typings/level';\nimport { Position } from '../typings/position';\nimport { findCellsInArea } from '../utils/findCellsInArea';\nimport { getRandomIntInclusive } from '../utils/getRandomIntInclusive';\nimport { getSurroundingPositions } from '../utils/getSurroundingPositions';\nimport { shuffleArray } from '../utils/shuffleArray';\nimport { walkGrid } from '../utils/walkGrid';\nimport { getRandomAreaWithinArea } from './getRandomAreaWithinArea';\nimport { horizontalSplitArea } from './horizontalSplitArea';\nimport { verticalSplitArea } from './verticalSplitArea';\n\nconst NUMBER_0F_SPLITS = 3;\n\nconst fullMap: Area = {\n  origin: { x: 0, y: 0 },\n  end: { x: GRID_WIDTH - 1, y: GRID_HEIGHT - 1 },\n};\n\nconst createEmptyMap = (width: number, height: number): TileType[][] => {\n  const map: TileType[][] = [];\n  for (let j = 0; j < height; j++) {\n    map[j] = [];\n    for (let i = 0; i < width; i++) {\n      map[j][i] = '#';\n    }\n  }\n  return map;\n};\n\nconst placeRectangleOnMap = (map: TileType[][], area: Area): TileType[][] => {\n  const newMap = map;\n  for (let i = area.origin.x; i <= area.end.x; i++) {\n    for (let j = area.origin.y; j <= area.end.y; j++) {\n      if (i === area.origin.x || i === area.end.x || j === area.origin.y || j === area.end.y) {\n        newMap[j][i] = '#';\n      } else {\n        newMap[j][i] = '.';\n      }\n    }\n  }\n  return newMap;\n};\n\nconst getLeavesArray = (rng: () => number) => {\n  // TODO: Split in a random position (not always in the middle)\n  // See: http://www.roguebasin.com/index.php?title=Basic_BSP_Dungeon_generation\n  let leaves: Area[] = [fullMap];\n  const leavesArray: Area[][] = [];\n  let toggle = rng() > 0.5 ? true : false;\n\n  for (let i = 0; i <= NUMBER_0F_SPLITS; i++) {\n    const split = toggle ? horizontalSplitArea : verticalSplitArea;\n    toggle = !toggle;\n    leaves = [...leaves.map((leaf) => split(leaf))].flat();\n    leavesArray[i] = leaves;\n  }\n\n  return leavesArray;\n};\n\nconst connectLeaves = (leafA: Area, leafB: Area, map: TileType[][], rng: () => number) => {\n  const newMap = map;\n\n  // Find one empty cell in boths areas\n  const candidatesA = findCellsInArea({ area: leafA, map, cellTile: '.' });\n  const positionA = candidatesA[Math.floor(rng() * candidatesA.length)];\n\n  const candidatesB = findCellsInArea({ area: leafB, map, cellTile: '.' });\n  const positionB = candidatesB[Math.floor(rng() * candidatesB.length)];\n\n  // Get walking path between the two positions\n  const positions = walkGrid(positionA, positionB);\n\n  // Dig tunnel between the two positions\n  positions.forEach((position) => (newMap[position[1]][position[0]] = '.'));\n  return newMap;\n};\n\ninterface ConnectAdjacentLeavesOptions {\n  leavesArray: Area[][];\n  map: TileType[][];\n  index: number;\n  leavesDepth: number;\n  rng: () => number;\n}\n\nconst connectAdjacentLeaves = ({\n  leavesArray,\n  map,\n  index,\n  leavesDepth,\n  rng,\n}: ConnectAdjacentLeavesOptions) => {\n  return connectLeaves(\n    leavesArray[leavesDepth][leavesArray[leavesDepth].length - (index - 1)],\n    leavesArray[leavesDepth][leavesArray[leavesDepth].length - index],\n    map,\n    rng\n  );\n};\n\nconst connectAllLeaves = (\n  leavesArray: Area[][],\n  map: TileType[][],\n  rng: () => number\n): TileType[][] => {\n  let newMap = map;\n  for (let i = 0; i <= NUMBER_0F_SPLITS; i++) {\n    for (let j = 1; j <= 2 ** (NUMBER_0F_SPLITS - i); j++) {\n      const options = {\n        leavesArray,\n        map: newMap,\n        index: j * 2,\n        leavesDepth: NUMBER_0F_SPLITS - i,\n        rng,\n      };\n      newMap = connectAdjacentLeaves(options);\n      if (i === NUMBER_0F_SPLITS) {\n        // TODO: Add more random connections like these\n        newMap = connectAdjacentLeaves(options);\n        newMap = connectAdjacentLeaves(options);\n        newMap = connectAdjacentLeaves(options);\n      }\n    }\n  }\n  return newMap;\n};\n\nconst findGroundPositions = (map: TileType[][]): Position[] => {\n  return map\n    .map((row, j) => row.map((tile, i) => (tile === '.' ? ([i, j] as Position) : null)))\n    .flat()\n    .filter((p) => p !== null) as Position[];\n};\n\nconst placeDownwardStaircase = (map: TileType[][], rng: () => number) => {\n  const newMap = map;\n  const candidatePositions = findGroundPositions(newMap);\n  const positionIndex = getRandomIntInclusive(0, candidatePositions.length - 1, rng);\n  const position = candidatePositions[positionIndex];\n  newMap[position[1]][position[0]] = '>';\n  return newMap;\n};\n\nconst generateMap = (rng: () => number): TileType[][] => {\n  // Get an empty map\n  const emptyMap = createEmptyMap(GRID_WIDTH, GRID_HEIGHT);\n\n  // Cut empty map into leaves using Binary Space Partitioning (BSP) Trees\n  const leavesArray = getLeavesArray(rng);\n\n  // Get random rooms from each leaf\n  const rooms = leavesArray[NUMBER_0F_SPLITS].map((leaf) => getRandomAreaWithinArea(leaf, rng));\n\n  // Place rooms on the map\n  let resultMap = emptyMap;\n  rooms.forEach((room) => {\n    resultMap = placeRectangleOnMap(resultMap, room);\n  });\n\n  // Connect rooms\n  resultMap = connectAllLeaves(leavesArray, resultMap, rng);\n\n  // Place downards staircase\n  resultMap = placeDownwardStaircase(resultMap, rng);\n\n  return resultMap;\n};\n\nconst getGoldSize = (rng: () => number) => {\n  return rng() > 0.5 ? 'ManyCoins' : 'Coins';\n};\n\nconst pickCreatureType = (rng: () => number): CreatureType => (rng() > 0.5 ? 'goblin' : 'rat'); // TODO\n\ninterface SpawnPosition {\n  position: Position;\n  creatureType: CreatureType;\n}\n\nexport const createGameMap = (\n  map: TileType[][],\n  spawn: Position,\n  width: number,\n  height: number,\n  rng?: () => number\n): CellData[][] => {\n  const candidatePositions = findGroundPositions(map);\n  const shuffledCandidatePositions = shuffleArray(candidatePositions, rng) as Position[];\n\n  const goldSpawnNumber = getRandomIntInclusive(MIN_GOLD_SPAWN_NUMBER, MAX_GOLD_SPAWN_NUMBER, rng);\n  const goldPositions = shuffledCandidatePositions.splice(0, goldSpawnNumber).map((p) => String(p));\n\n  const hordesNumber = getRandomIntInclusive(MIN_HORDES_NUMBER, MAX_HORDES_NUMBER, rng);\n  const hordesPositions = shuffledCandidatePositions.splice(0, hordesNumber);\n\n  let spawnPositions: SpawnPosition[] = [];\n\n  if (rng && DEBUG_SPAWN_CREATURES) {\n    // Generate spawnPositions\n    hordesPositions.forEach((position) => {\n      const creatureType = pickCreatureType(rng);\n      const options = { position, radius: 3, mapHeight: GRID_HEIGHT, mapWidth: GRID_WIDTH };\n      const surroundingPositions = getSurroundingPositions(options);\n      const surroundingCandidatePositions = surroundingPositions.filter((value) =>\n        shuffledCandidatePositions.map((p) => String(p)).includes(String(value))\n      );\n      const shuffledSurroundingCandidatePositions = shuffleArray(\n        surroundingCandidatePositions,\n        rng\n      ) as Position[];\n      spawnPositions = spawnPositions.concat(\n        ...shuffledSurroundingCandidatePositions\n          .splice(\n            0,\n            Math.min(\n              CREATURES[creatureType].spawnNumber,\n              shuffledSurroundingCandidatePositions.length\n            )\n          )\n          .map((p) => ({ position: p, creatureType }))\n      );\n    });\n  }\n\n  const gameMap: CellData[][] = [];\n  for (let j = 0; j < height; j += 1) {\n    gameMap[j] = [];\n    for (let i = 0; i < width; i += 1) {\n      let content: 0 | 'Coins' | 'ManyCoins' = 0;\n      let creature = undefined;\n      if (rng) {\n        content = goldPositions.includes(String([i, j])) ? getGoldSize(rng) : 0;\n        const spawnType = spawnPositions\n          .map((p) => ({ position: String(p.position), creatureType: p.creatureType }))\n          .find((p) => p.position === String([i, j]));\n        creature = spawnType ? { type: spawnType.creatureType, id: 'temp_id' } : undefined;\n      }\n      gameMap[j][i] = {\n        content,\n        tile: map[j][i],\n        revealed: false,\n        visibility: 'clear',\n        burningRounds: 0,\n        creature,\n        position: `${i},${j}`,\n      };\n      if (i === spawn[0] && j === spawn[1]) {\n        gameMap[j][i].content = 'Player';\n      }\n    }\n  }\n  return gameMap;\n};\n\nexport const generateLevel = (rng: () => number): Level => {\n  const map = generateMap(rng);\n\n  // Find playerSpawn\n  const candidatesSpawn = findCellsInArea({ area: fullMap, map, cellTile: '.' });\n  const spawn = candidatesSpawn[Math.floor(rng() * candidatesSpawn.length)];\n\n  // Place playerSpawn on map\n  map[spawn[1]][spawn[0]] = '@';\n\n  // Create gameMap\n  const gameMap = createGameMap(map, spawn, GRID_WIDTH, GRID_HEIGHT, rng);\n\n  return { gameMap, playerSpawn: spawn };\n};\n","// From https://www.redblobgames.com/grids/line-drawing.html#stepping\n\nimport { Position } from '../typings/position';\n\nexport const walkGrid = (p0: Position, p1: Position): Position[] => {\n  const dx = p1[0] - p0[0];\n  const dy = p1[1] - p0[1];\n  const nx = Math.abs(dx);\n  const ny = Math.abs(dy);\n  const signX = dx > 0 ? 1 : -1;\n  const signY = dy > 0 ? 1 : -1;\n\n  const p = { x: p0[0], y: p0[1] };\n  const positions: Position[] = [[p.x, p.y]];\n  for (let ix = 0, iy = 0; ix < nx || iy < ny; ) {\n    if ((0.5 + ix) / nx < (0.5 + iy) / ny) {\n      // next step is horizontal\n      p.x += signX;\n      ix++;\n    } else {\n      // next step is vertical\n      p.y += signY;\n      iy++;\n    }\n    positions.push([p.x, p.y]);\n  }\n  return positions;\n};\n","import { Area } from '../typings/area';\nimport { getRandomIntInclusive } from '../utils/getRandomIntInclusive';\n\nconst MINIMUM_ROOM_DIMENSION = 2;\n\nexport const getRandomAreaWithinArea = (area: Area, rng: () => number): Area => {\n  const originalWidth = area.end.x - area.origin.x;\n  const originalHeight = area.end.y - area.origin.y;\n\n  const width = getRandomIntInclusive(MINIMUM_ROOM_DIMENSION + 1, originalWidth - 1, rng);\n  const height = getRandomIntInclusive(MINIMUM_ROOM_DIMENSION + 1, originalHeight - 1, rng);\n\n  const originX = getRandomIntInclusive(area.origin.x, area.origin.x + originalWidth - width, rng);\n  const originY = getRandomIntInclusive(\n    area.origin.y,\n    area.origin.y + originalHeight - height,\n    rng\n  );\n\n  const origin = { x: originX, y: originY };\n  const end = { x: originX + width, y: originY + height };\n\n  return { origin, end };\n};\n","// From: https://gist.github.com/6174/6062387\n\nexport const getRandomString = (): string => {\n  return Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);\n};\n","import React from 'react';\nimport { Sprite } from 'react-konva';\n\nimport { CELL_WIDTH_IN_PIXELS } from '../../constants/config';\nimport { Position } from '../../typings/position';\nimport { getRandomIntInclusive } from '../../utils/getRandomIntInclusive';\n\ninterface Props {\n  position: Position;\n  flameImage: HTMLImageElement | undefined;\n  opacity: number;\n}\n\nexport const Flame: React.FC<Props> = ({ position, flameImage, opacity }) => {\n  const animations = {\n    burning: [\n      0,\n      0,\n      16,\n      24, //\n      16,\n      0,\n      16,\n      24, //\n      32,\n      0,\n      16,\n      24, //\n      48,\n      0,\n      16,\n      24, //\n      0,\n      24,\n      16,\n      24, //\n      16,\n      24,\n      16,\n      24, //\n      32,\n      24,\n      16,\n      24, //\n      48,\n      24,\n      16,\n      24, //\n      0,\n      48,\n      16,\n      24, //\n      16,\n      48,\n      16,\n      24, //\n      32,\n      48,\n      16,\n      24, //\n      48,\n      48,\n      16,\n      24, //\n    ],\n  };\n  return (\n    <Sprite\n      ref={(node) => {\n        if (node && !node.isRunning()) node.start();\n      }}\n      x={position[0] * CELL_WIDTH_IN_PIXELS + (CELL_WIDTH_IN_PIXELS - 16) / 2}\n      y={position[1] * CELL_WIDTH_IN_PIXELS}\n      animation=\"burning\"\n      animations={animations}\n      image={flameImage || new window.Image()}\n      frameRate={8}\n      frameIndex={getRandomIntInclusive(0, 11)}\n      opacity={opacity}\n    />\n  );\n};\n","import Konva from 'konva';\nimport React from 'react';\nimport { Circle, Group, Image, Rect, Text } from 'react-konva';\n\nimport { CELL_WIDTH_IN_PIXELS } from '../../constants/config';\nimport { ANIMATIONS_DURATION } from '../../constants/config';\nimport { CREATURES } from '../../constants/creatures';\nimport { getItem } from '../../constants/items';\nimport {\n  DEFAULT_FONT_COLOR,\n  getTile,\n  NON_REVEALED_BACKGROUND_COLOR,\n  TileType,\n} from '../../constants/tiles';\nimport { GameAction, gameActions } from '../../game-logic/game';\nimport { HoverCellPayload } from '../../game-logic/reduceHoverCell';\nimport { CellContent, CreatureData } from '../../typings/cell';\nimport { Hit } from '../../typings/hit';\nimport { Position } from '../../typings/position';\nimport { Visibility } from '../../typings/visibility';\nimport { Flame } from './Flame';\n\nexport interface CellProps {\n  content: CellContent;\n  tileType: TileType;\n  visibility: Visibility;\n  revealed: boolean;\n  dispatch: React.Dispatch<GameAction>;\n  position: Position;\n  itemsImage: HTMLImageElement | undefined;\n  flameImage: HTMLImageElement | undefined;\n  creaturesImage: HTMLImageElement | undefined;\n  burning: boolean;\n  creature?: CreatureData;\n  hitsLastRound: Hit[];\n  round: number;\n  creatureDiedThisRound: boolean;\n  highlighted: boolean;\n}\n\nexport const CanvasCell: React.FC<CellProps> = ({\n  content,\n  tileType,\n  visibility,\n  revealed,\n  dispatch,\n  position,\n  itemsImage,\n  flameImage,\n  burning,\n  creature,\n  creaturesImage,\n  hitsLastRound,\n  round,\n  highlighted,\n  creatureDiedThisRound,\n}) => {\n  const [hasBlinked, setHasBlinked] = React.useState(false);\n  const imageRef = React.useRef<Konva.Image>(null);\n  const item = content !== 0 && content !== 'Player' ? getItem(content) : '';\n  const tile = getTile(tileType);\n\n  const wasHitLastRound = hitsLastRound.filter((h) => h.creatureId === creature?.id).length !== 0;\n  const shouldBlink = wasHitLastRound && !hasBlinked;\n\n  const getBackgroundColor = () => {\n    if (!revealed && visibility === 'dark') {\n      return NON_REVEALED_BACKGROUND_COLOR;\n    }\n    if (visibility === 'clear') {\n      return tile?.clearBackgroundColor || NON_REVEALED_BACKGROUND_COLOR;\n    }\n    if (visibility === 'dim' || revealed) {\n      return tile?.dimBackgroundColor || NON_REVEALED_BACKGROUND_COLOR;\n    }\n    return NON_REVEALED_BACKGROUND_COLOR;\n  };\n\n  React.useEffect(() => {\n    setHasBlinked(false);\n  }, [round]);\n\n  React.useEffect(() => {\n    // TODO: UseBlink and use same logic for Player?\n    if (imageRef.current) {\n      if (creature) {\n        if (shouldBlink) {\n          const tween = new Konva.Tween({\n            node: imageRef.current,\n            duration: ANIMATIONS_DURATION / 1000,\n            easing: Konva.Easings.BounceEaseInOut,\n            fill: getBackgroundColor(),\n            onFinish: () => setHasBlinked(true),\n          });\n          tween.play();\n          return () => {\n            tween.pause();\n          };\n        }\n      }\n    }\n  }, [creature, round, shouldBlink]);\n\n  const renderFlame = () => (\n    <Flame flameImage={flameImage} position={position} opacity={visibility === 'dim' ? 0.3 : 1} />\n  );\n\n  const getFontColor = () => {\n    if (burning && visibility !== 'dark') {\n      return 'white';\n    }\n    if (visibility === 'clear') {\n      return tile?.clearFontColor || DEFAULT_FONT_COLOR;\n    }\n    if (visibility === 'dim' || revealed) {\n      return tile?.dimFontColor || DEFAULT_FONT_COLOR;\n    }\n    return DEFAULT_FONT_COLOR;\n  };\n\n  const Item = () => {\n    // TODO DRY with Creature\n    if (content !== 0 && content !== 'Player') {\n      if (visibility === 'dark' && !revealed) {\n        return null;\n      }\n      if (visibility === 'dim' && !revealed) {\n        return (\n          <Circle\n            x={position[0] * CELL_WIDTH_IN_PIXELS + CELL_WIDTH_IN_PIXELS / 2}\n            y={position[1] * CELL_WIDTH_IN_PIXELS + CELL_WIDTH_IN_PIXELS / 2}\n            radius={5}\n            fill={DEFAULT_FONT_COLOR}\n            opacity={0.3}\n          />\n        );\n      }\n\n      let opacity = 0;\n      if (visibility === 'clear') {\n        opacity = 1;\n      } else if (visibility === 'dim' || revealed) {\n        opacity = 0.3;\n      }\n      return item ? (\n        <Image\n          x={position[0] * CELL_WIDTH_IN_PIXELS + (CELL_WIDTH_IN_PIXELS - 16) / 2}\n          y={position[1] * CELL_WIDTH_IN_PIXELS + (CELL_WIDTH_IN_PIXELS - 16) / 2}\n          image={itemsImage}\n          width={16}\n          height={16}\n          opacity={opacity}\n          crop={{\n            x: item.spritePosition[0] * 16,\n            y: item.spritePosition[1] * 16,\n            width: 16,\n            height: 16,\n          }}\n        />\n      ) : null;\n    }\n    return null;\n  };\n\n  const Creature = () => {\n    // TODO DRY with Item\n    // Unlike items, we don't \"remember\" creatures\n    if (creature) {\n      if (visibility === 'dark') {\n        return null;\n      }\n      if (visibility === 'dim') {\n        return (\n          <Circle\n            x={position[0] * CELL_WIDTH_IN_PIXELS + CELL_WIDTH_IN_PIXELS / 2}\n            y={position[1] * CELL_WIDTH_IN_PIXELS + CELL_WIDTH_IN_PIXELS / 2}\n            radius={5}\n            fill={'orange'}\n            opacity={0.3}\n          />\n        );\n      }\n\n      let opacity = 0;\n      if (visibility === 'clear') {\n        opacity = 1;\n      } else if (visibility === 'dim') {\n        opacity = 0.3;\n      }\n      const spritePosition = CREATURES[creature.type].spritePosition;\n      return (\n        <Image\n          ref={imageRef}\n          x={position[0] * CELL_WIDTH_IN_PIXELS + 1}\n          y={position[1] * CELL_WIDTH_IN_PIXELS + 1}\n          image={creaturesImage}\n          width={CELL_WIDTH_IN_PIXELS - 3}\n          height={CELL_WIDTH_IN_PIXELS - 3}\n          opacity={opacity}\n          fill={shouldBlink ? 'red' : getBackgroundColor()}\n          crop={{\n            x: spritePosition[0] * 16,\n            y: spritePosition[1] * 16,\n            width: 16,\n            height: 16,\n          }}\n        />\n      );\n    }\n    return null;\n  };\n\n  const renderTile = () => {\n    if (visibility !== 'dark' || revealed) {\n      return (\n        <Text\n          x={position[0] * CELL_WIDTH_IN_PIXELS + 7}\n          y={position[1] * CELL_WIDTH_IN_PIXELS + 8}\n          text={tileType}\n          fontFamily=\"UglyTerminal\"\n          fontSize={16}\n          fill={getFontColor()}\n        />\n      );\n    }\n  };\n\n  const renderDeadCreature = () => {\n    let opacity = 0;\n    if (visibility === 'clear') {\n      opacity = 1;\n    } else if (visibility === 'dim') {\n      opacity = 0.3;\n    }\n\n    return (\n      <Image\n        ref={imageRef}\n        x={position[0] * CELL_WIDTH_IN_PIXELS + 1}\n        y={position[1] * CELL_WIDTH_IN_PIXELS + 1}\n        image={itemsImage}\n        width={CELL_WIDTH_IN_PIXELS - 2}\n        height={CELL_WIDTH_IN_PIXELS - 2}\n        opacity={opacity}\n        fill={wasHitLastRound ? 'red' : getBackgroundColor()}\n        crop={{\n          x: 12 * 16,\n          y: 9 * 16,\n          width: 16,\n          height: 16,\n        }}\n      />\n    );\n  };\n\n  const renderContentOrTile = () => {\n    if (creatureDiedThisRound) {\n      return renderDeadCreature();\n    }\n\n    if (visibility !== 'dark' && creature) {\n      return <Creature />;\n    }\n\n    if (visibility !== 'dark' && burning) {\n      return renderFlame();\n    }\n\n    if (content !== 0 && content !== 'Player') {\n      return <Item />;\n    }\n    return renderTile();\n  };\n\n  const handleMouseEnter = (payload: HoverCellPayload) => {\n    return dispatch(gameActions.hoverCell(payload));\n  };\n\n  const handleMouseLeave = () => {\n    return dispatch(gameActions.hoverAwayFromCell());\n  };\n\n  return (\n    <Group\n      onMouseEnter={() =>\n        handleMouseEnter({\n          tileType,\n          visibility,\n          revealed,\n          content,\n          burning,\n          creature,\n          creatureDiedThisRound,\n        })\n      }\n      onMouseLeave={() => handleMouseLeave()}\n    >\n      <Rect\n        width={CELL_WIDTH_IN_PIXELS - 1}\n        height={CELL_WIDTH_IN_PIXELS - 1}\n        fill={getBackgroundColor()}\n        x={position[0] * CELL_WIDTH_IN_PIXELS}\n        y={position[1] * CELL_WIDTH_IN_PIXELS}\n        stroke={highlighted ? 'white' : 'rgba(0, 0, 0, 0.1)'}\n        strokeWidth={2}\n      />\n      {renderContentOrTile()}\n    </Group>\n  );\n};\n","import Konva from 'konva';\nimport React from 'react';\nimport { Group, Rect } from 'react-konva';\n\nimport { PAUSE_TIME_BETWEEN_MOVES } from '../../constants/config';\nimport {\n  CELL_WIDTH_IN_PIXELS,\n  NUMBER_OF_CELLS_IN_VIEWPORT_X,\n  NUMBER_OF_CELLS_IN_VIEWPORT_Y,\n} from '../../constants/config';\nimport { GameAction, gameActions } from '../../game-logic/game';\nimport { Hit } from '../../typings/hit';\nimport { MoveDirection } from '../../typings/moveDirection';\n\ninterface Props {\n  moveDirection: MoveDirection;\n  dispatch: React.Dispatch<GameAction>;\n  hitsLastRound: Hit[];\n  round: number;\n}\n\nexport const Player: React.FC<Props> = ({ moveDirection, dispatch, hitsLastRound, round }) => {\n  const rectRef = React.useRef<Konva.Rect>(null);\n  const [hasBlinked, setHasBlinked] = React.useState(false);\n  const playerWidth = 0.6 * CELL_WIDTH_IN_PIXELS;\n  const frontWidth = 0.3 * CELL_WIDTH_IN_PIXELS;\n  let frontXModifier: number;\n  let frontYModifier: number;\n\n  const wasHitLastRound = hitsLastRound.filter((h) => h.creatureId === 'player').length !== 0;\n  const shouldBlink = wasHitLastRound && !hasBlinked;\n\n  React.useEffect(() => {\n    setHasBlinked(false);\n  }, [round]);\n\n  React.useEffect(() => {\n    // TODO: UseBlink and use same logic for creature?\n    if (rectRef.current) {\n      if (shouldBlink) {\n        const tween = new Konva.Tween({\n          node: rectRef.current,\n          duration: PAUSE_TIME_BETWEEN_MOVES / 1000,\n          easing: Konva.Easings.BounceEaseInOut,\n          fill: 'blue',\n          onFinish: () => setHasBlinked(true),\n        });\n        tween.play();\n        return () => {\n          tween.pause();\n        };\n      }\n    }\n  }, [round, shouldBlink]);\n\n  switch (moveDirection) {\n    case 'Up':\n      frontXModifier = frontWidth / 2;\n      frontYModifier = playerWidth - frontWidth;\n      break;\n    case 'Down':\n      frontXModifier = frontWidth / 2;\n      frontYModifier = -playerWidth + frontWidth * 2;\n      break;\n    case 'Left':\n      frontXModifier = playerWidth - frontWidth;\n      frontYModifier = frontWidth / 2;\n      break;\n    case 'Right':\n      frontXModifier = -playerWidth + frontWidth * 2;\n      frontYModifier = frontWidth / 2;\n      break;\n  }\n\n  const handleMouseEnter = () =>\n    dispatch(\n      gameActions.hoverCell({\n        tileType: '.',\n        visibility: 'clear',\n        revealed: true,\n        content: 'Player',\n        burning: false,\n      })\n    );\n\n  const handleMouseLeave = () => dispatch(gameActions.hoverAwayFromCell());\n\n  return (\n    <Group onMouseEnter={handleMouseEnter} onMouseLeave={handleMouseLeave}>\n      <Rect\n        ref={rectRef}\n        width={playerWidth}\n        height={playerWidth}\n        fill={shouldBlink ? 'red' : 'blue'}\n        x={(CELL_WIDTH_IN_PIXELS * NUMBER_OF_CELLS_IN_VIEWPORT_X) / 2 - playerWidth / 2}\n        y={(CELL_WIDTH_IN_PIXELS * NUMBER_OF_CELLS_IN_VIEWPORT_Y) / 2 - playerWidth / 2}\n        _useStrictMode\n      />\n      <Rect\n        width={frontWidth}\n        height={frontWidth}\n        fill={'black'}\n        x={(CELL_WIDTH_IN_PIXELS * NUMBER_OF_CELLS_IN_VIEWPORT_X) / 2 - frontXModifier}\n        y={(CELL_WIDTH_IN_PIXELS * NUMBER_OF_CELLS_IN_VIEWPORT_Y) / 2 - frontYModifier}\n      />\n    </Group>\n  );\n};\n","import React from 'react';\nimport { Group, Layer, Stage } from 'react-konva';\nimport useImage from 'use-image';\n\nimport flame from '../../assets/images/flames.png';\nimport roguelikecreatures from '../../assets/images/roguelikecreatures.png';\nimport roguelikeitems from '../../assets/images/roguelikeitems.png';\nimport {\n  CELL_WIDTH_IN_PIXELS,\n  NUMBER_OF_CELLS_IN_VIEWPORT_X,\n  NUMBER_OF_CELLS_IN_VIEWPORT_Y,\n  VIEWPORT_HEIGHT_IN_PIXELS,\n  VIEWPORT_WIDTH_IN_PIXELS,\n} from '../../constants/config';\nimport { GameAction } from '../../game-logic/game';\nimport { CellData } from '../../typings/cell';\nimport { Hit } from '../../typings/hit';\nimport { MoveDirection } from '../../typings/moveDirection';\nimport { Position } from '../../typings/position';\nimport { CanvasCell } from './CanvasCell';\nimport { Player } from './Player';\n\nconst getOffsetX = (playerPositionX: number) => {\n  return playerPositionX < Math.floor(NUMBER_OF_CELLS_IN_VIEWPORT_X / 2)\n    ? -(Math.floor(NUMBER_OF_CELLS_IN_VIEWPORT_X / 2) - playerPositionX) * CELL_WIDTH_IN_PIXELS\n    : 0;\n};\n\nconst getOffsetY = (playerPositionY: number) => {\n  return playerPositionY < Math.floor(NUMBER_OF_CELLS_IN_VIEWPORT_Y / 2)\n    ? -(Math.floor(NUMBER_OF_CELLS_IN_VIEWPORT_Y / 2) - playerPositionY) * CELL_WIDTH_IN_PIXELS\n    : 0;\n};\n\nconst renderCells = (\n  gameMap: CellData[][],\n  itemsImage: HTMLImageElement | undefined,\n  flameImage: HTMLImageElement | undefined,\n  creaturesImage: HTMLImageElement | undefined,\n  playerPosition: Position,\n  hitsLastRound: Hit[],\n  deathPositionsThisRound: string[],\n  round: number,\n  hoveredCreatureId: string,\n  dispatch: React.Dispatch<GameAction>\n) => {\n  const cellsToSideX = Math.floor(NUMBER_OF_CELLS_IN_VIEWPORT_X / 2);\n  const cellsToSideY = Math.floor(NUMBER_OF_CELLS_IN_VIEWPORT_Y / 2);\n  // Hint: Render cells here.\n  // We only render the cells that are visible in the viewport\n  return gameMap\n    .filter(\n      (_row, index) =>\n        index >= playerPosition[1] - cellsToSideY && index <= playerPosition[1] + cellsToSideY\n    )\n    .map((row, posY) => {\n      return row\n        .filter(\n          (_cellData, index) =>\n            index >= playerPosition[0] - cellsToSideX && index <= playerPosition[0] + cellsToSideX\n        )\n        .map((cellData, posX) => {\n          const position = `${posX}-${posY}`;\n          const visibility = cellData.visibility;\n          let creatureDiedThisRound = false;\n\n          if (deathPositionsThisRound.includes(cellData.position)) {\n            creatureDiedThisRound = true;\n          }\n\n          const highlighted =\n            (cellData.creature?.id === hoveredCreatureId && cellData.visibility === 'clear') ||\n            (cellData.content === 'Player' && hoveredCreatureId === 'Player');\n\n          return (\n            <CanvasCell\n              visibility={visibility}\n              revealed={cellData.revealed}\n              key={position}\n              content={cellData.content}\n              tileType={cellData.tile}\n              position={[posX, posY]}\n              creaturesImage={creaturesImage}\n              itemsImage={itemsImage}\n              flameImage={flameImage}\n              dispatch={dispatch}\n              burning={cellData.burningRounds > 0}\n              creature={cellData.creature}\n              hitsLastRound={hitsLastRound}\n              round={round}\n              creatureDiedThisRound={creatureDiedThisRound}\n              highlighted={highlighted}\n            />\n          );\n        });\n    });\n};\n\ninterface Props {\n  playerPosition: Position;\n  gameMap: CellData[][];\n  moveDirection: MoveDirection;\n  hitsLastRound: Hit[];\n  deathPositionsThisRound: Position[];\n  round: number;\n  dispatch: React.Dispatch<GameAction>;\n  hoveredCreatureId: string;\n}\n\n// We use React.memo() here to avoid re-rendering the canvas on game-state updates that are not related to the canvas\n// Without this, things like Sprites will flicker when hovering over the canvas with events\nexport const Canvas: React.FC<Props> = React.memo((props) => {\n  const [itemsImage] = useImage(roguelikeitems);\n  const [creaturesImage] = useImage(roguelikecreatures);\n  const [flameImage] = useImage(flame);\n\n  const offsetX = getOffsetX(props.playerPosition[0]);\n  const offsetY = getOffsetY(props.playerPosition[1]);\n\n  return (\n    <Stage width={VIEWPORT_WIDTH_IN_PIXELS} height={VIEWPORT_HEIGHT_IN_PIXELS}>\n      <Layer imageSmoothingEnabled={false}>\n        <Group offsetX={offsetX} offsetY={offsetY}>\n          {renderCells(\n            props.gameMap,\n            itemsImage,\n            flameImage,\n            creaturesImage,\n            props.playerPosition,\n            props.hitsLastRound,\n            props.deathPositionsThisRound.map(String),\n            props.round,\n            props.hoveredCreatureId,\n            props.dispatch\n          )}\n        </Group>\n        <Player\n          moveDirection={props.moveDirection}\n          dispatch={props.dispatch}\n          hitsLastRound={props.hitsLastRound}\n          round={props.round}\n        />\n      </Layer>\n    </Stage>\n  );\n});\n\nCanvas.displayName = 'Canvas';\n","export default \"data:image/png;base64,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\"","export interface PlayerAction {\n  type: string;\n  gameKey: string;\n}\n\nexport const PLAYER_ACTIONS: PlayerAction[] = [\n  {\n    type: 'wait',\n    gameKey: 'w',\n  },\n];\n\nexport const PLAYER_ACTION_SHORTCUTS = PLAYER_ACTIONS.map((a) => a.gameKey);\n","import React from 'react';\n\nimport { PAUSE_TIME_BETWEEN_MOVES } from '../../constants/config';\nimport { PLAYER_ACTION_SHORTCUTS, PLAYER_ACTIONS } from '../../constants/playerActions';\nimport { GameAction, gameActions } from '../../game-logic/game';\nimport { GameStatus } from '../../typings/gameStatus';\nimport { MoveDirection } from '../../typings/moveDirection';\n\nconst GAME_KEYS = ['ArrowLeft', 'ArrowUp', 'ArrowRight', 'ArrowDown', ...PLAYER_ACTION_SHORTCUTS];\n\nconst mapKeyCodeToDirection = (key: string): MoveDirection | undefined => {\n  if (!GAME_KEYS.includes(key)) {\n    return undefined;\n  }\n  switch (key) {\n    case 'ArrowLeft':\n      return 'Left';\n    case 'ArrowRight':\n      return 'Right';\n    case 'ArrowUp':\n      return 'Up';\n    case 'ArrowDown':\n      return 'Down';\n  }\n};\n\nexport const useGameKeys = (dispatch: React.Dispatch<GameAction>, gameStatus: GameStatus): void => {\n  const lastRoundDate = React.useRef(Date.now());\n\n  React.useEffect(() => {\n    const handleKeyDown = (event: any) => {\n      const key: string = event.key;\n\n      // Prevent reacting to other keys\n      if (!GAME_KEYS.includes(key)) {\n        return;\n      }\n\n      event.preventDefault();\n\n      // Prevent moving again before animation is finished\n      if (Date.now() - lastRoundDate.current < PAUSE_TIME_BETWEEN_MOVES) {\n        return;\n      }\n\n      if (gameStatus === 'gameover') {\n        return;\n      }\n\n      // Perform the action\n      lastRoundDate.current = Date.now();\n\n      const playerAction = PLAYER_ACTIONS.find((a) => a.gameKey === key);\n      if (playerAction) {\n        return dispatch(gameActions.doPlayerAction(playerAction.type));\n      }\n\n      const direction = mapKeyCodeToDirection(key);\n      if (direction) {\n        dispatch(gameActions.movePlayer(direction));\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [gameStatus]);\n};\n","export default __webpack_public_path__ + \"static/media/attack.a3dfc39e.wav\";","export default __webpack_public_path__ + \"static/media/crit.d7aa0535.wav\";","export default __webpack_public_path__ + \"static/media/goblin_attack.d9be07a5.wav\";","export default __webpack_public_path__ + \"static/media/goblin_death.7d1b8ece.wav\";","export default __webpack_public_path__ + \"static/media/goblin_pain.584fefc2.wav\";","export default __webpack_public_path__ + \"static/media/lootBigGold.5d9d28bf.ogg\";","export default __webpack_public_path__ + \"static/media/lootSmallGold.6fe614b6.ogg\";","export default __webpack_public_path__ + \"static/media/miss.d3279d33.wav\";","export default __webpack_public_path__ + \"static/media/rat_attack.7941f90a.ogg\";","export default __webpack_public_path__ + \"static/media/rat_death.11af7280.ogg\";","export default __webpack_public_path__ + \"static/media/rat_pain.b89a9e15.ogg\";","export default __webpack_public_path__ + \"static/media/stairs.79b1bf44.ogg\";","import React from 'react';\n\n// Since Chrome disables auto play until user has interacted with window,\n// we can only load music only after user has clicked or pressed a key\n\nexport const useDetectUserInput = (): boolean => {\n  const [didUserInput, setDidUserInput] = React.useState(false);\n\n  const handleKeyPress = () => {\n    setDidUserInput(true);\n    window.removeEventListener('mousedown', handleKeyPress);\n    window.removeEventListener('keydown', handleKeyPress);\n  };\n\n  React.useEffect(() => {\n    window.addEventListener('mousedown', handleKeyPress);\n    window.addEventListener('keydown', handleKeyPress);\n    return () => {\n      window.removeEventListener('mousedown', handleKeyPress);\n      window.removeEventListener('keydown', handleKeyPress);\n    };\n  }, []);\n\n  return didUserInput;\n};\n","import React from 'react';\nimport styled from 'styled-components';\n\nconst BorderA = styled.div`\n  border: 3px solid #6e6e6e;\n  border-radius: 5px;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 3px;\n  box-sizing: border-box;\n`;\n\nconst BorderB = styled.div`\n  border: 3px solid #6e6e6e;\n  border-radius: 3px;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  box-sizing: border-box;\n`;\n\nexport const DoubleBorders: React.FC = (props) => {\n  return (\n    <BorderA>\n      <BorderB>{props.children}</BorderB>\n    </BorderA>\n  );\n};\n","import React from 'react';\nimport styled from 'styled-components';\n\nimport { Position } from '../../typings/position';\n\ninterface Props {\n  imageSrc: string;\n  pixelDimensions: number;\n  position: Position;\n}\n\nconst Wrapper = styled.div<Props>`\n  width: ${(p) => p.pixelDimensions}px;\n  height: ${(p) => p.pixelDimensions}px;\n  background: url(${(p) => p.imageSrc}) no-repeat;\n  image-rendering: pixelated;\n  background-position: ${(p) => -p.position[0] * p.pixelDimensions}px\n    ${(p) => -p.position[1] * p.pixelDimensions}px;\n`;\n\nexport const Sprite: React.FC<Props> = (props) => {\n  return <Wrapper {...props} />;\n};\n","import React from 'react';\nimport styled from 'styled-components';\n\nimport { CreatureEntity, CREATURES } from '../../constants/creatures';\nimport { GameAction, gameActions } from '../../game-logic/game';\nimport { DoubleBorders } from '../Shared/DoubleBorders';\nimport { Sprite } from '../Shared/Sprite';\n\nconst Wrapper = styled.div`\n  margin-top: 10px;\n  height: 576px;\n  overflow-y: scroll;\n  ::-webkit-scrollbar {\n    /*Chrome, Safari and Opera */\n    display: none;\n  }\n  -ms-overflow-style: none; /* IE and Edge */\n  scrollbar-width: none; /* Firefox */\n`;\n\ninterface BlockProps {\n  entity: CreatureEntity;\n  index: number;\n  handleMouseEnter: () => void;\n  handleMouseLeave: () => void;\n  highlighted: boolean;\n}\n\nconst Block: React.FC<BlockProps> = ({\n  entity,\n  index,\n  handleMouseEnter,\n  handleMouseLeave,\n  highlighted,\n}) => {\n  const { imageSrc, spritePosition } = CREATURES[entity.type];\n  const hpPercentage = (entity.hp / entity.maxHp) * 100;\n  return (\n    <div style={{ marginTop: index !== 0 ? 10 : undefined }}>\n      <DoubleBorders>\n        <div\n          onMouseEnter={handleMouseEnter}\n          onMouseLeave={handleMouseLeave}\n          style={{\n            paddingLeft: 20,\n            paddingRight: 20,\n            paddingTop: 17,\n            paddingBottom: 17,\n            background: highlighted ? 'radial-gradient(#555454, #030303)' : undefined,\n          }}\n        >\n          <div style={{ width: 164 }}>\n            <div style={{ display: 'flex' }}>\n              <span>\n                <Sprite imageSrc={imageSrc} position={spritePosition} pixelDimensions={16} />\n              </span>\n              <div style={{ width: 125 }}>\n                <div\n                  style={{\n                    marginLeft: 20,\n                    height: 20,\n                  }}\n                >\n                  {entity.hp}/{entity.maxHp}\n                </div>\n                <div\n                  style={{\n                    marginLeft: 20,\n                    backgroundColor: '#FF4847',\n                    width: `${hpPercentage}%`,\n                    height: 3,\n                  }}\n                />\n              </div>\n            </div>\n          </div>\n          <div style={{ marginTop: 13 }}>\n            <div style={{ display: 'flex' }}>\n              <span>*</span>\n              <span style={{ marginLeft: 20 }}>{entity.status}</span>\n            </div>\n          </div>\n        </div>\n      </DoubleBorders>\n    </div>\n  );\n};\n\ninterface Props {\n  entities: CreatureEntity[];\n  dispatch: React.Dispatch<GameAction>;\n  hoveredCreatureId: string;\n}\n\nexport const CreatureBlocks: React.FC<Props> = (props) => {\n  const makeHandleMouseEnter = (creatureId: string) => () =>\n    props.dispatch(gameActions.hoverCreatureBlock(creatureId));\n\n  const handleMouseLeave = () => props.dispatch(gameActions.hoverAwayFromCreatureBlock());\n\n  return (\n    <Wrapper>\n      {props.entities.map((entity, index) => {\n        return (\n          <Block\n            key={entity.id}\n            entity={entity}\n            index={index}\n            handleMouseEnter={makeHandleMouseEnter(entity.id)}\n            handleMouseLeave={handleMouseLeave}\n            highlighted={entity.id === props.hoveredCreatureId}\n          />\n        );\n      })}\n    </Wrapper>\n  );\n};\n","import React from 'react';\nimport styled from 'styled-components';\n\nimport roguelikeitems from '../../assets/images/roguelikeitems.png';\nimport { ItemType } from '../../constants/items';\nimport { Sprite } from '../Shared/Sprite';\n\nconst EquipedWrapper = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  width: 85%;\n  margin-left: auto;\n  margin-right: auto;\n  margin-top: 10px;\n`;\n\nconst Slot = styled.div`\n  height: 50px;\n  width: 50px;\n  background-color: black;\n  margin-bottom: 10px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: solid 2px #6e6e6e;\n  border-radius: 10px;\n  box-sizing: border-box;\n`;\n\nconst ItemWrapper = styled.div`\n  box-sizing: border-box;\n  width: 25px;\n  height: 25px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: #131226;\n  border-radius: 6px;\n`;\n\nconst PlaceholderSlot = styled.div`\n  height: 50px;\n  width: 50px;\n  background-color: black;\n  margin-bottom: 10px;\n`;\n\ninterface Props {\n  equipedItems: ItemType[];\n}\n\nexport const EquipedItems: React.FC<Props> = (props) => {\n  return (\n    <EquipedWrapper>\n      <PlaceholderSlot />\n      <Slot>\n        <ItemWrapper />\n      </Slot>{' '}\n      <PlaceholderSlot />\n      {props.equipedItems.some((item) => item === 'Sword') ? (\n        <Slot>\n          <ItemWrapper>\n            <Sprite imageSrc={roguelikeitems} position={[3, 8]} pixelDimensions={16} />\n          </ItemWrapper>\n        </Slot>\n      ) : (\n        <Slot>\n          <ItemWrapper />\n        </Slot>\n      )}\n      <Slot>\n        <ItemWrapper />\n      </Slot>{' '}\n      <Slot>\n        <ItemWrapper />\n      </Slot>{' '}\n      <Slot>\n        <ItemWrapper />\n      </Slot>{' '}\n      <Slot>\n        <ItemWrapper />\n      </Slot>{' '}\n      <Slot>\n        <ItemWrapper />\n      </Slot>{' '}\n    </EquipedWrapper>\n  );\n};\n","import React from 'react';\nimport styled from 'styled-components';\n\nconst Wrapper = styled.div`\n  height: 80px;\n  background-color: #131226;\n  border-radius: 10px;\n  color: white;\n  margin-bottom: 10px;\n  box-sizing: border-box;\n  width: 100%;\n  font-family: Ubuntu Mono;\n  font-size: 16px;\n  padding: 5px 12px 5px 12px;\n  font-weight: 400;\n`;\n\nconst Log = styled.div`\n  height: 23px;\n  display: flex;\n  align-items: center;\n`;\n\ninterface Props {\n  eventLogs: string[];\n}\n\nconst NUMBER_OF_LOGS_DISPLAYED = 3;\n\nexport const EventLogs: React.FC<Props> = (props) => {\n  return (\n    <Wrapper>\n      {props.eventLogs\n        .slice(\n          Math.max(0, props.eventLogs.length - NUMBER_OF_LOGS_DISPLAYED),\n          props.eventLogs.length\n        )\n        .map((log, index) => (\n          <Log key={index}>{log}</Log>\n        ))}\n    </Wrapper>\n  );\n};\n","import React from 'react';\nimport styled from 'styled-components';\n\nconst Wrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  color: white;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n`;\n\ninterface Props {\n  deathText: string;\n}\n\nexport const GameOver: React.FC<Props> = ({ deathText }) => {\n  return (\n    <Wrapper>\n      <div style={{ marginBottom: 35 }}>GAME OVER</div>\n      <div>{deathText}</div>\n    </Wrapper>\n  );\n};\n","import React from 'react';\nimport styled from 'styled-components';\n\nimport { VIEWPORT_WIDTH_IN_PIXELS } from '../../constants/config';\n\nconst Wrapper = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 32px;\n  width: ${VIEWPORT_WIDTH_IN_PIXELS}px;\n  background-color: black;\n  color: white;\n  padding: 5px;\n  box-sizing: border-box;\n  margin-left: auto;\n  margin-right: auto;\n  font-family: Ubuntu Mono;\n  font-size: 22px;\n`;\n\ninterface Props {\n  interactionText: string;\n}\n\nexport const InteractionText: React.FC<Props> = (props) => {\n  return <Wrapper>{props.interactionText}</Wrapper>;\n};\n","import React, { ReactNode } from 'react';\nimport styled from 'styled-components';\n\nimport roguelikeitems from '../../assets/images/roguelikeitems.png';\nimport { NUMBER_OF_INVENTORY_SLOTS } from '../../constants/config';\nimport { getItem, ItemType } from '../../constants/items';\nimport { DoubleBorders } from '../Shared/DoubleBorders';\nimport { Sprite } from '../Shared/Sprite';\n\nconst ItemWrapper = styled.div`\n  box-sizing: border-box;\n  width: 25px;\n  height: 25px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: #131226;\n  border-radius: 6px;\n`;\n\nconst Wrapper = styled.div`\n  width: 100%;\n  padding-right: 5px;\n  padding-left: 5px;\n  box-sizing: border-box;\n  margin-top: 10px;\n`;\n\nconst Items = styled.div`\n  width: 85%;\n  display: flex;\n  flex-wrap: wrap;\n  margin-left: auto;\n  margin-right: auto;\n  padding-top: 20px;\n  padding-bottom: 20px;\n  justify-content: center;\n`;\n\nconst SingleItemWrapper = styled.div`\n  box-sizing: border-box;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\ninterface Props {\n  inventory: ItemType[];\n}\n\nconst renderItemSlot = (itemType: ItemType | null, index: number) => {\n  if (itemType) {\n    return (\n      <SingleItemWrapper key={`slot-${index}`}>\n        <ItemWrapper key={itemType}>\n          <Sprite\n            imageSrc={roguelikeitems}\n            position={getItem(itemType)?.spritePosition || [0, 0]}\n            pixelDimensions={16}\n          />\n        </ItemWrapper>\n      </SingleItemWrapper>\n    );\n  }\n  return (\n    <SingleItemWrapper key={`slot-${index}`}>\n      <ItemWrapper></ItemWrapper>\n    </SingleItemWrapper>\n  );\n};\n\nexport const Inventory: React.FC<Props> = (props) => {\n  const renderItemSlots = () => {\n    const itemSlots: ReactNode[] = [];\n    for (let i = 0; i < NUMBER_OF_INVENTORY_SLOTS; i++) {\n      if (props.inventory[i]) {\n        itemSlots.push(renderItemSlot(props.inventory[i], i));\n      } else {\n        itemSlots.push(renderItemSlot(null, i));\n      }\n    }\n\n    return itemSlots;\n  };\n\n  return (\n    <Wrapper>\n      <div>\n        <DoubleBorders>\n          <Items>{renderItemSlots()}</Items>\n        </DoubleBorders>\n      </div>\n    </Wrapper>\n  );\n};\n","import React from 'react';\nimport styled from 'styled-components';\n\nimport { PLAYER_ACTIONS, PlayerAction } from '../../constants/playerActions';\nimport { GameAction, gameActions } from '../../game-logic/game';\n\nconst Wrapper = styled.div`\n  height: 380px;\n`;\n\nconst ActionWrapper = styled.div`\n  cursor: pointer;\n`;\n\ninterface Props {\n  actions: string[];\n  dispatch: React.Dispatch<GameAction>;\n}\n\nconst renderActionLabel = (playerAction: PlayerAction) => {\n  let hasColoredLetter = false;\n  return playerAction.type.split('').map((char, index) => {\n    if (char === playerAction.gameKey && !hasColoredLetter) {\n      hasColoredLetter = true;\n      return (\n        <span key={index} style={{ color: 'yellow' }}>\n          {char}\n        </span>\n      );\n    }\n    return char;\n  });\n};\n\nexport const Actions: React.FC<Props> = (props) => {\n  const renderPlayerActions = () =>\n    props.actions.map((action) => {\n      const playerAction = PLAYER_ACTIONS.find((a) => a.type === action);\n      if (playerAction) {\n        return (\n          <ActionWrapper\n            key={action}\n            onClick={() => props.dispatch(gameActions.doPlayerAction(action))}\n          >\n            {renderActionLabel(playerAction)}\n          </ActionWrapper>\n        );\n      }\n    });\n\n  return <Wrapper>{renderPlayerActions()}</Wrapper>;\n};\n","export default \"data:image/png;base64,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\"","import React from 'react';\nimport styled from 'styled-components';\n\nimport rpgicons from '../../assets/images/rpgicons.png';\nimport { CONDITIONS } from '../../constants/conditions';\nimport { GameAction, gameActions } from '../../game-logic/game';\nimport { ActiveConditions } from '../../typings/activeConditions';\nimport { DoubleBorders } from '../Shared/DoubleBorders';\nimport { Sprite } from '../Shared/Sprite';\n\nconst Wrapper = styled.div`\n  /* height: 100%; */\n  display: flex;\n  /* flex-direction: column;\n  justify-content: space-between; */\n`;\n\n// const toggleFullScreen = () => {\n//   if (!document.fullscreenElement) {\n//     document.documentElement.requestFullscreen();\n//   } else {\n//     if (document.exitFullscreen) {\n//       document.exitFullscreen();\n//     }\n//   }\n// };\n\ninterface Props {\n  withBackgroundMusic: boolean;\n  setWithBackgroundMusic: React.Dispatch<React.SetStateAction<boolean>>;\n  characterName: string;\n  hp: number;\n  maxHp: number;\n  gold: number;\n  playerConditions: ActiveConditions;\n  dispatch: React.Dispatch<GameAction>;\n  hoveredCreatureId: string;\n}\n\nexport const PlayerStats: React.FC<Props> = (props) => {\n  const hpPercentage = (props.hp / props.maxHp) * 100;\n  const burningPercentage =\n    props.playerConditions.burning === undefined\n      ? 0\n      : (props.playerConditions.burning?.activeRounds / CONDITIONS.burning.duration) * 100;\n\n  const handleMouseEnter = () => props.dispatch(gameActions.hoverCreatureBlock('Player'));\n  const handleMouseLeave = () => props.dispatch(gameActions.hoverAwayFromCreatureBlock());\n\n  const highlighted = props.hoveredCreatureId === 'Player';\n\n  return (\n    <Wrapper onMouseEnter={handleMouseEnter} onMouseLeave={handleMouseLeave}>\n      <div>\n        <DoubleBorders>\n          <div\n            style={{\n              paddingLeft: 20,\n              paddingRight: 20,\n              paddingTop: 17,\n              paddingBottom: 17,\n              background: highlighted ? 'radial-gradient(#555454, #030303)' : undefined,\n            }}\n          >\n            <div style={{ width: 164 }}>\n              <div style={{ display: 'flex' }}>\n                <span>\n                  <Sprite imageSrc={rpgicons} position={[0, 2]} pixelDimensions={16} />\n                </span>\n                <span style={{ marginLeft: 20 }}>{props.characterName}</span>\n              </div>\n            </div>\n            <div style={{ marginTop: 13 }}>\n              <div style={{ display: 'flex' }}>\n                <span>\n                  <Sprite imageSrc={rpgicons} position={[0, 0]} pixelDimensions={16} />\n                </span>\n                <div style={{ width: 125 }}>\n                  <div\n                    style={{\n                      marginLeft: 20,\n                      height: 20,\n                    }}\n                  >\n                    {props.hp}/{props.maxHp}\n                  </div>\n                  <div\n                    style={{\n                      marginLeft: 20,\n                      backgroundColor: '#FF4847',\n                      width: `${hpPercentage}%`,\n                      height: 3,\n                    }}\n                  />\n                </div>\n              </div>\n            </div>\n            <div style={{ marginTop: 13 }}>\n              <div style={{ display: 'flex' }}>\n                <span>\n                  <Sprite imageSrc={rpgicons} position={[1, 0]} pixelDimensions={16} />\n                </span>\n                <span style={{ marginLeft: 20 }}>{props.gold}</span>\n              </div>\n            </div>\n            {props.playerConditions.burning && (\n              <div\n                style={{\n                  marginTop: 13,\n                  backgroundColor: 'orange',\n                  width: `${burningPercentage}%`,\n                  height: 25,\n                  display: 'flex',\n                  alignItems: 'center',\n                  paddingLeft: 10,\n                }}\n              >\n                BURNING\n              </div>\n            )}\n          </div>\n        </DoubleBorders>\n      </div>\n      {/* <div>\n        <DoubleBorders>\n          <div style={{ height: 80, paddingLeft: 20, paddingRight: 20 }}>\n            <div style={{ cursor: 'pointer', marginTop: 17 }} onClick={() => toggleFullScreen()}>\n              FULL SCR.\n            </div>\n            <div\n              style={{ cursor: 'pointer', marginTop: 13 }}\n              onClick={() => props.setWithBackgroundMusic(!props.withBackgroundMusic)}\n            >\n              {props.withBackgroundMusic ? 'BGM: ON' : 'BGM: OFF'}\n            </div>\n          </div>\n        </DoubleBorders>\n      </div> */}\n    </Wrapper>\n  );\n};\n","import './shake.css';\n\nimport React from 'react';\n\nimport { ANIMATIONS_DURATION } from '../../constants/config';\n\ninterface Props {\n  shake: boolean;\n  round: number;\n}\n\nexport const ShakeLayer: React.FC<Props> = (props) => {\n  const [shakeClass, setShakeClass] = React.useState('');\n\n  React.useEffect(() => {\n    if (props.shake) {\n      setShakeClass('shake');\n      const timer = setTimeout(() => setShakeClass(''), ANIMATIONS_DURATION);\n      return () => {\n        clearTimeout(timer);\n      };\n    }\n    setShakeClass('');\n  }, [props.shake, props.round]);\n\n  return <div className={shakeClass}>{props.children}</div>;\n};\n","import './fade.css';\n\nimport React from 'react';\nimport styled from 'styled-components';\n\nimport {\n  GAMEOVER_FADEOUT_DURATION,\n  VIEWPORT_HEIGHT_IN_PIXELS,\n  VIEWPORT_WIDTH_IN_PIXELS,\n} from '../../constants/config';\nimport { GameStatus } from '../../typings/gameStatus';\n\nconst Wrapper = styled.div`\n  overflow: hidden;\n  width: ${() => `${VIEWPORT_WIDTH_IN_PIXELS}px`};\n  height: ${() => `${VIEWPORT_HEIGHT_IN_PIXELS}px`};\n  background-color: black;\n`;\n\ninterface Props {\n  depth: number;\n  gameStatus: GameStatus;\n}\n\nexport const Viewport: React.FC<Props> = (props) => {\n  const [opacity, setOpacity] = React.useState(0);\n  const [nextDepthClass, setNextDepthClass] = React.useState('');\n  const [gameoverClass, setGameoverClass] = React.useState('');\n\n  React.useEffect(() => {\n    setNextDepthClass('fadein');\n    const timer = setTimeout(() => {\n      setNextDepthClass('');\n      setOpacity(1);\n    }, 1000);\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [props.depth]);\n\n  React.useEffect(() => {\n    if (props.gameStatus === 'gameover') {\n      setGameoverClass('fadeout');\n      const timer = setTimeout(() => {\n        setGameoverClass('fadein');\n      }, GAMEOVER_FADEOUT_DURATION);\n      return () => {\n        clearTimeout(timer);\n      };\n    }\n  }, [props.gameStatus]);\n\n  return (\n    <Wrapper style={{ opacity }} className={`${nextDepthClass} ${gameoverClass}`}>\n      {props.children}\n    </Wrapper>\n  );\n};\n","import React from 'react';\nimport seedrandom from 'seedrandom';\nimport styled from 'styled-components';\n\nimport { GAMEOVER_FADEOUT_DURATION } from '../../constants/config';\nimport { GameAction, gameActions, GameState } from '../../game-logic/game';\nimport { generateLevel } from '../../pcg/generateLevel';\nimport { getRandomString } from '../../utils/getRandomString';\nimport { sortCreatures } from '../../utils/sortCreatures';\nimport { Canvas } from '../Canvas';\nimport { useAreFontLoaded } from '../hooks/useAreFontsLoaded';\nimport { useGameKeys } from '../hooks/useGameKeys';\nimport { useSoundsManager } from '../hooks/useSoundsManager';\nimport { DoubleBorders } from '../Shared/DoubleBorders';\nimport { CreatureBlocks } from './CreatureBlocks';\nimport { EquipedItems } from './EquipedItems';\nimport { EventLogs } from './EventLogs';\nimport { GameOver } from './GameOver';\nimport { InteractionText } from './InteractionText';\nimport { Inventory } from './Inventory';\nimport { Actions } from './PlayerActions';\nimport { PlayerStats } from './PlayerStats';\nimport { ShakeLayer } from './ShakeLayer';\nimport { Viewport } from './Viewport';\n\nconst Wrapper = styled.div`\n  height: 789px;\n  user-select: none;\n  width: 100%;\n`;\n\nconst InnerWrapper = styled.div`\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n  min-width: 1200px;\n  max-width: 1400px;\n  margin-top: 10px;\n  margin-left: auto;\n  margin-right: auto;\n`;\n\nconst SideWrapper = styled.div`\n  width: 230px;\n  background-color: black;\n  color: white;\n`;\n\nconst BottomBar = styled.div`\n  height: 18px;\n  padding-left: 25px;\n  padding-right: 25px;\n  width: 100%;\n  min-width: 1200px;\n  max-width: 1400px;\n  margin-left: auto;\n  margin-right: auto;\n`;\n\ninterface Props {\n  state: GameState;\n  dispatch: React.Dispatch<GameAction>;\n  withBackgroundMusic: boolean;\n  setWithBackgroundMusic: React.Dispatch<React.SetStateAction<boolean>>;\n}\n\nexport const Game: React.FC<Props> = (props) => {\n  const areFontsLoaded = useAreFontLoaded();\n  useGameKeys(props.dispatch, props.state.gameStatus);\n  useSoundsManager({ sounds: props.state.sounds, round: props.state.round });\n  const [showGameOver, setShowGameover] = React.useState(false);\n\n  const initMap = () => {\n    const seed = props.state.seed\n      ? props.state.seed.concat(String(props.state.depth))\n      : getRandomString();\n    const rng = seedrandom(seed);\n    const level = generateLevel(rng);\n    props.dispatch(gameActions.setSeed(seed));\n    // NOTE: Maybe generate level should also init the initial state?\n    props.dispatch(gameActions.setCurrentMap(level.gameMap));\n    props.dispatch(gameActions.initPlayerSpawn(level.playerSpawn));\n  };\n\n  const initGameState = () => {\n    props.dispatch(gameActions.initVisibility());\n    props.dispatch(gameActions.initCreatures());\n  };\n\n  // Initialise first depth\n  React.useEffect(() => {\n    // Don't generate new map if coming from MapGenerator\n    if (props.state.currentMap.length === 0) {\n      initMap();\n    }\n    initGameState();\n  }, []);\n\n  // Initialise depths > 1\n  React.useEffect(() => {\n    if (props.state.depth > 1) {\n      initMap();\n      initGameState();\n    }\n  }, [props.state.depth]);\n\n  React.useEffect(() => {\n    if (props.state.gameStatus === 'gameover') {\n      const timer = setTimeout(() => {\n        setShowGameover(true);\n      }, GAMEOVER_FADEOUT_DURATION);\n      return () => {\n        clearTimeout(timer);\n      };\n    }\n  }, [props.state.gameStatus]);\n\n  if (!areFontsLoaded) {\n    return null;\n  }\n\n  const visibleEntities = sortCreatures({\n    creatures: props.state.creatures,\n    currentMap: props.state.currentMap,\n    hitsLastRound: props.state.hitsLastRound,\n  });\n\n  return (\n    <Wrapper>\n      <InnerWrapper>\n        <SideWrapper\n          style={{\n            marginRight: '15px',\n            paddingRight: 5,\n            paddingLeft: 5,\n            boxSizing: 'border-box',\n            display: 'flex',\n            flexDirection: 'column',\n          }}\n        >\n          <PlayerStats\n            characterName={props.state.characterName}\n            hp={props.state.hp}\n            maxHp={props.state.maxHp}\n            gold={props.state.gold}\n            withBackgroundMusic={props.withBackgroundMusic}\n            setWithBackgroundMusic={props.setWithBackgroundMusic}\n            playerConditions={props.state.playerConditions}\n            dispatch={props.dispatch}\n            hoveredCreatureId={props.state.hoveredCreatureId}\n          />\n          <CreatureBlocks\n            entities={visibleEntities}\n            dispatch={props.dispatch}\n            hoveredCreatureId={props.state.hoveredCreatureId}\n          />\n        </SideWrapper>\n        <div>\n          <EventLogs eventLogs={props.state.eventLogs} />\n          <ShakeLayer\n            shake={props.state.hitsLastRound.filter((h) => h.creatureId !== 'player').length !== 0}\n            round={props.state.round}\n          >\n            <DoubleBorders>\n              <Viewport depth={props.state.depth} gameStatus={props.state.gameStatus}>\n                {!showGameOver && (\n                  <Canvas\n                    playerPosition={props.state.playerPosition}\n                    gameMap={props.state.currentMap}\n                    moveDirection={props.state.moveDirection}\n                    hitsLastRound={props.state.hitsLastRound}\n                    deathPositionsThisRound={props.state.deathPositionsThisRound}\n                    round={props.state.round}\n                    dispatch={props.dispatch}\n                    hoveredCreatureId={props.state.hoveredCreatureId}\n                  />\n                )}\n                {showGameOver && <GameOver deathText={props.state.deathText} />}\n              </Viewport>\n            </DoubleBorders>\n          </ShakeLayer>\n        </div>\n        <SideWrapper\n          style={{\n            marginLeft: '15px',\n            boxSizing: 'border-box',\n            display: 'flex',\n            flexDirection: 'column',\n          }}\n        >\n          <Actions actions={props.state.playerActions} dispatch={props.dispatch} />\n          <EquipedItems equipedItems={props.state.equipedItems} />\n          <Inventory inventory={props.state.inventory} />\n        </SideWrapper>\n      </InnerWrapper>\n      <InteractionText\n        interactionText={props.state.gameStatus === 'playing' ? props.state.interactionText : ''}\n      />\n      <BottomBar>\n        <div style={{ color: 'white' }}>-- Depth {props.state.depth} --</div>\n      </BottomBar>\n    </Wrapper>\n  );\n};\n","import FontFaceObserver from 'fontfaceobserver';\nimport React from 'react';\n\nexport const useAreFontLoaded = (): boolean => {\n  const [areFontsLoaded, setAreFontsLoaded] = React.useState(false);\n\n  React.useEffect(() => {\n    const font = new FontFaceObserver('UglyTerminal');\n\n    Promise.all([font.load()]).then(function () {\n      setAreFontsLoaded(true);\n    });\n  }, []);\n\n  return areFontsLoaded;\n};\n","import React from 'react';\nimport useSound from 'use-sound';\n\nimport attack from '../../assets/sounds/attack.wav';\nimport crit from '../../assets/sounds/crit.wav';\nimport goblinAttack from '../../assets/sounds/goblin_attack.wav';\nimport goblinDeath from '../../assets/sounds/goblin_death.wav';\nimport goblinPain from '../../assets/sounds/goblin_pain.wav';\nimport lootManyCoins from '../../assets/sounds/lootBigGold.ogg';\nimport lootCoins from '../../assets/sounds/lootSmallGold.ogg';\nimport miss from '../../assets/sounds/miss.wav';\nimport ratAttack from '../../assets/sounds/rat_attack.ogg';\nimport ratDeath from '../../assets/sounds/rat_death.ogg';\nimport ratPain from '../../assets/sounds/rat_pain.ogg';\nimport stairs from '../../assets/sounds/stairs.ogg';\nimport { useDetectUserInput } from './useDetectUserInput';\n\nexport const SOUNDS = {\n  crit,\n  attack,\n  miss,\n  lootCoins,\n  lootManyCoins,\n  stairs,\n  ratAttack,\n  ratPain,\n  ratDeath,\n  goblinAttack,\n  goblinPain,\n  goblinDeath,\n};\n\ninterface Options {\n  sounds: (keyof typeof SOUNDS)[];\n  round: number;\n}\n\nexport const useSoundsManager = ({ sounds, round }: Options): void => {\n  const didUserInput = useDetectUserInput();\n\n  const [playCrit] = useSound(crit);\n  const [playAttack] = useSound(attack, { volume: 3 });\n  const [playMiss] = useSound(miss, { volume: 0.6 });\n  const [playLootCoins] = useSound(lootCoins);\n  const [playLootManyCoins] = useSound(lootManyCoins);\n  const [playStairs] = useSound(stairs);\n  const [playRatAttack] = useSound(ratAttack, { volume: 0.3 });\n  const [playRatPain] = useSound(ratPain, { volume: 0.3 });\n  const [playRatDeath] = useSound(ratDeath, { volume: 0.3 });\n  const [playGoblinAttack] = useSound(goblinAttack, { volume: 0.3 });\n  const [playGoblinPain] = useSound(goblinPain, { volume: 0.3 });\n  const [playGoblinDeath] = useSound(goblinDeath, { volume: 0.3 });\n\n  const soundPlayer: { [key: string]: typeof playLootCoins } = {\n    crit: playCrit,\n    attack: playAttack,\n    miss: playMiss,\n    lootCoins: playLootCoins,\n    lootManyCoins: playLootManyCoins,\n    stairs: playStairs,\n    ratAttack: playRatAttack,\n    ratPain: playRatPain,\n    ratDeath: playRatDeath,\n    goblinAttack: playGoblinAttack,\n    goblinPain: playGoblinPain,\n    goblinDeath: playGoblinDeath,\n  };\n\n  React.useEffect(() => {\n    if (didUserInput) {\n      sounds.forEach((sound) => {\n        soundPlayer[sound]();\n      });\n    }\n  }, [didUserInput, round, sounds]);\n};\n","import { CreatureEntity } from '../constants/creatures';\nimport { CellData } from '../typings/cell';\nimport { Hit } from '../typings/hit';\n\ninterface Options {\n  creatures: { [id: string]: CreatureEntity };\n  currentMap: CellData[][];\n  hitsLastRound: Hit[];\n}\n\n// BUG: Goblins placed in front of rat even if further away?\n\nexport const sortCreatures = (options: Options): CreatureEntity[] => {\n  const array = Object.keys(options.creatures).map((id) => options.creatures[id]);\n  return (\n    array\n      // Only keep creatures that are visible\n      .filter((v) => {\n        const position = v.position;\n        return options.currentMap[position[1]][position[0]].visibility === 'clear';\n      })\n      // Sort by walking distance to player\n      .sort((a, b) => {\n        return a.walkingDistanceToPlayer - b.walkingDistanceToPlayer;\n      })\n      // Place creatures that have been hit at the top\n      .sort((a, b) => {\n        if (\n          options.hitsLastRound.map((hit) => hit.creatureId).includes(a.id) &&\n          !options.hitsLastRound.map((hit) => hit.creatureId).includes(b.id)\n        ) {\n          return -1;\n        }\n        return 0;\n      })\n  );\n};\n","import React from 'react';\nimport styled from 'styled-components';\n\nimport { CELL_WIDTH_MAP_GENERATOR } from '../../constants/config';\n\nconst Wrapper = styled.div`\n  width: ${0.6 * CELL_WIDTH_MAP_GENERATOR}px;\n  height: ${0.6 * CELL_WIDTH_MAP_GENERATOR}px;\n  background-color: blue;\n`;\n\nconst Front = styled.div`\n  width: ${0.3 * CELL_WIDTH_MAP_GENERATOR}px;\n  height: ${0.3 * CELL_WIDTH_MAP_GENERATOR}px;\n  background-color: black;\n  margin-left: auto;\n  margin-right: auto;\n`;\n\nexport const Player: React.FC = () => {\n  return (\n    <Wrapper>\n      <Front />\n    </Wrapper>\n  );\n};\n","import React from 'react';\nimport styled from 'styled-components';\n\nimport { CREATURES, CreatureType } from '../../constants/creatures';\nimport { getItem } from '../../constants/items';\nimport { DEFAULT_FONT_COLOR, getTile, NON_REVEALED_BACKGROUND_COLOR } from '../../constants/tiles';\nimport { TileType } from '../../constants/tiles';\nimport { CellContent } from '../../typings/cell';\nimport { MoveDirection } from '../../typings/moveDirection';\nimport { Sprite } from '../Shared/Sprite';\nimport { Player } from './Player';\n\ninterface StylingProps {\n  backgroundColor: string;\n  cellWidth: number;\n  color: string;\n}\n\nconst Wrapper = styled.div<StylingProps>`\n  border: solid 1px rgba(0, 0, 0, 0.1);\n  box-sizing: border-box;\n  width: ${(p) => `${p.cellWidth}px`};\n  height: ${(p) => `${p.cellWidth}px`};\n  min-width: ${(p) => `${p.cellWidth}px`};\n  min-height: ${(p) => `${p.cellWidth}px`};\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: ${(p) => p.backgroundColor};\n  font-size: 8px;\n  color: ${(p) => p.color};\n`;\n\nexport interface CellProps {\n  creature?: CreatureType;\n  content: CellContent;\n  moveDirection: MoveDirection;\n  tileType: TileType;\n  cellWidth: number;\n  handleClick: () => void;\n  burning: boolean;\n}\n\nexport const Cell: React.FC<CellProps> = ({\n  burning,\n  content,\n  tileType,\n  cellWidth,\n  handleClick,\n  creature,\n}) => {\n  const tile = getTile(tileType);\n\n  const renderPlayer = () => {\n    return <Player />;\n  };\n\n  const renderItem = () => {\n    if (content !== 0 && content !== 'Player') {\n      const item = getItem(content);\n      return (\n        item && (\n          <Sprite imageSrc={item.imageSrc} position={item.spritePosition} pixelDimensions={16} />\n        )\n      );\n    }\n  };\n\n  const renderCreature = (type: CreatureType) => {\n    const { imageSrc, spritePosition } = CREATURES[type];\n    return <Sprite imageSrc={imageSrc} position={spritePosition} pixelDimensions={16} />;\n  };\n\n  const renderTile = () => tileType;\n\n  const renderContentOrTile = () => {\n    if (burning) {\n      return '^';\n    }\n\n    if (content === 'Player') {\n      return renderPlayer();\n    }\n\n    if (creature) {\n      return renderCreature(creature);\n    }\n\n    if (content !== 0) {\n      return renderItem();\n    }\n    return renderTile();\n  };\n\n  const getColor = () => {\n    if (creature) {\n      return 'orange';\n    }\n    return tile?.clearFontColor || DEFAULT_FONT_COLOR;\n  };\n\n  return (\n    <Wrapper\n      onClick={handleClick}\n      backgroundColor={tile?.clearBackgroundColor || NON_REVEALED_BACKGROUND_COLOR}\n      cellWidth={cellWidth}\n      color={getColor()}\n    >\n      {renderContentOrTile()}\n    </Wrapper>\n  );\n};\n","import React from 'react';\nimport styled from 'styled-components';\n\nimport { CELL_WIDTH_MAP_GENERATOR, GRID_HEIGHT, GRID_WIDTH } from '../../constants/config';\nimport { CellData } from '../../typings/cell';\nimport { Position } from '../../typings/position';\nimport { Cell } from './Cell';\n\ninterface StylingProps {\n  cellWidth: number;\n}\n\nconst Wrapper = styled.div<StylingProps>`\n  width: ${(p) => `${p.cellWidth * GRID_WIDTH}px`};\n  height: ${(p) => `${p.cellWidth * GRID_HEIGHT}px`};\n  min-width: ${(p) => `${p.cellWidth * GRID_WIDTH}px`};\n  min-height: ${(p) => `${p.cellWidth * GRID_HEIGHT}px`};\n  display: flex;\n  flex-wrap: wrap;\n  border: solid 1px black;\n  background-color: white;\n`;\n\ninterface Props {\n  gameMap: CellData[][];\n  handleCellClick: (position: Position, cellData: CellData) => void;\n}\n\nconst Map: React.FC<Props> = ({ gameMap, handleCellClick }) => {\n  const renderCells = () => {\n    return gameMap.map((col, posY) => {\n      return col.map((cellData, posX) => {\n        const position = `${posX}-${posY}`;\n        return (\n          <Cell\n            creature={cellData.creature?.type}\n            key={position}\n            content={cellData.content}\n            moveDirection={'Up'}\n            tileType={cellData.tile}\n            cellWidth={CELL_WIDTH_MAP_GENERATOR}\n            handleClick={() => handleCellClick([posX, posY], cellData)}\n            burning={cellData.burningRounds > 0}\n          />\n        );\n      });\n    });\n  };\n\n  return <Wrapper cellWidth={CELL_WIDTH_MAP_GENERATOR}>{renderCells()}</Wrapper>;\n};\n\nexport default Map;\n","import React, { useEffect } from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport { CELL_WIDTH_IN_PIXELS, NFT_OPERATOR_URL } from '../../constants/config';\nimport { CREATURES, CreatureType } from '../../constants/creatures';\nimport { ITEMS } from '../../constants/items';\nimport { TILES, TileType } from '../../constants/tiles';\nimport { CellContent } from '../../typings/cell';\nimport { Effect } from '../../typings/effect';\nimport { Cell, CellProps } from './Cell';\n\nconst Wrapper = styled.div`\n  background-color: grey;\n  width: 170px;\n  height: 94%;\n  padding: 10px 10px;\n`;\n\ninterface CellWrapperProps {\n  selected: boolean;\n}\n\nconst CellWrapper = styled.div<CellWrapperProps>`\n  display: flex;\n  align-items: center;\n  margin-bottom: 10px;\n  border: ${(props) => (props.selected ? 'solid 2px blue' : 'solid 2px grey')};\n  cursor: pointer;\n  height: 27px;\n  width: 128px;\n  padding: 3px 3px 3px 3px;\n`;\n\nconst Label = styled.div`\n  font-size: 12px;\n  margin-left: 10px;\n`;\n\nconst defaultCellProps: CellProps = {\n  content: 0,\n  moveDirection: 'Up',\n  tileType: '.',\n  cellWidth: CELL_WIDTH_IN_PIXELS,\n  handleClick: () => false,\n  burning: false,\n};\n\ninterface Props {\n  selectedTile: TileType | null;\n  handleSelectedTile: (tile: TileType) => void;\n  selectedContent: CellContent | null;\n  handleSelectedContent: (content: CellContent) => void;\n  selectedCreature: CreatureType | null;\n  handleSelectedCreature: (content: CreatureType) => void;\n  selectedEffect: Effect | null;\n  handleSelectedEffect: (effect: Effect) => void;\n  seed: string;\n  setSeed: React.Dispatch<React.SetStateAction<string>>;\n  load: () => void;\n}\n\nexport const Toolbar: React.FC<Props> = (props) => {\n  const location = useLocation();\n\n  useEffect(() => {\n    const searchParams = new URLSearchParams(location.search);\n    const seedFromUrl = searchParams.get('seed');\n    if (seedFromUrl) {\n      const trimmedSeed = seedFromUrl.replace(/^0x/, '');\n      props.setSeed(trimmedSeed);\n      props.load();\n    }\n  }, [location.search, props.setSeed, props.load]);\n\n  return (\n    <Wrapper>\n      <div style={{ height: '80%', overflowY: 'scroll' }}>\n        <p>Tiles</p>\n        {TILES.map((tile) => {\n          return (\n            <CellWrapper\n              key={tile.name}\n              selected={props.selectedTile === tile.type}\n              onClick={() => props.handleSelectedTile(tile.type)}\n            >\n              <Cell {...defaultCellProps} tileType={tile.type} />\n              <Label>{tile.name}</Label>\n            </CellWrapper>\n          );\n        })}\n        <p>Contents</p>\n        <CellWrapper\n          selected={props.selectedContent === 'Player'}\n          onClick={() => props.handleSelectedContent('Player')}\n        >\n          <Cell {...defaultCellProps} tileType={'.'} content=\"Player\" />\n          <Label>Player</Label>\n        </CellWrapper>\n        {ITEMS.map((item) => {\n          return (\n            <CellWrapper\n              key={item.type}\n              selected={props.selectedContent === item.type}\n              onClick={() => props.handleSelectedContent(item.type)}\n            >\n              <Cell {...defaultCellProps} tileType={'.'} content={item.type} />\n              <Label>{item.type}</Label>\n            </CellWrapper>\n          );\n        })}\n        <p>Creatures</p>\n        {Object.keys(CREATURES).map((creature) => {\n          const type = creature as CreatureType;\n          return (\n            <CellWrapper\n              key={type}\n              selected={props.selectedCreature === type}\n              onClick={() => props.handleSelectedCreature(type)}\n            >\n              <Cell {...defaultCellProps} tileType={'.'} creature={type} />\n              <Label>{type}</Label>\n            </CellWrapper>\n          );\n        })}\n        <p>Effects</p>\n        <CellWrapper\n          selected={props.selectedEffect === 'burn'}\n          onClick={() => props.handleSelectedEffect('burn')}\n        >\n          <Label>Burn</Label>\n        </CellWrapper>\n      </div>\n      <div style={{ height: '20%' }}>\n        <Link to=\"/play\">PLAY</Link>\n        <br />\n        <button\n          style={{ marginTop: 15 }}\n          onClick={() => {\n            const url = `${NFT_OPERATOR_URL}?seed=${props.seed}`;\n            window.open(url, '_blank');\n          }}\n        >\n          Mint as NFT\n        </button>\n        <br />\n        <button style={{ marginTop: 15 }} onClick={props.load}>\n          See NFTs Gallery\n        </button>\n        <input\n          style={{ marginTop: 15 }}\n          value={props.seed}\n          onChange={(event) => props.setSeed(event.target.value.replace(/^0x/, ''))}\n          placeholder=\"Enter seed or use URL param\"\n        />\n        <button style={{ marginTop: 15 }} onClick={props.load}>\n          Load from seed\n        </button>\n      </div>\n    </Wrapper>\n  );\n};\n","import React from 'react';\nimport seedrandom from 'seedrandom';\nimport styled from 'styled-components';\n\nimport { NUMBER_OF_ROUNDS_BURNING } from '../../constants/config';\nimport { CreatureType } from '../../constants/creatures';\nimport { TileType } from '../../constants/tiles';\nimport { gameActions } from '../../game-logic/game';\nimport { GameAction, GameState } from '../../game-logic/game';\nimport { generateLevel } from '../../pcg/generateLevel';\nimport { CellContent, CellData } from '../../typings/cell';\nimport { Effect } from '../../typings/effect';\nimport { Position } from '../../typings/position';\nimport { getRandomString } from '../../utils/getRandomString';\nimport Map from './Map';\nimport { Toolbar } from './Toolbar';\n\nconst Wrapper = styled.div`\n  display: flex;\n  width: 100%;\n  height: 100%;\n  align-items: center;\n  user-select: none;\n`;\n\ninterface Props {\n  state: GameState;\n  dispatch: React.Dispatch<GameAction>;\n}\n\nexport const MapGenerator: React.FC<Props> = (props) => {\n  const [selectedTile, setSelectedTile] = React.useState<TileType | null>(null);\n  const [selectedContent, setSelectedContent] = React.useState<CellContent | null>(null);\n  const [selectedCreature, setSelectedCreature] = React.useState<CreatureType | null>(null);\n  const [selectedEffect, setSelectedEffect] = React.useState<Effect | null>(null);\n  const [currentSeed, setCurrentSeed] = React.useState('');\n\n  const load = (seed: string) => {\n    const rng = seedrandom(seed);\n    const level = generateLevel(rng);\n    props.dispatch(gameActions.setSeed(seed));\n    props.dispatch(gameActions.setCurrentMap(level.gameMap));\n    props.dispatch(gameActions.initPlayerSpawn(level.playerSpawn));\n  };\n\n  React.useEffect(() => {\n    const seed = getRandomString();\n    setCurrentSeed(seed);\n    load(seed);\n  }, []);\n\n  if (props.state.currentMap.length === 0) {\n    return <div>loading...</div>;\n  }\n\n  const resetSelected = () => {\n    setSelectedTile(null);\n    setSelectedContent(null);\n    setSelectedCreature(null);\n    setSelectedEffect(null);\n  };\n\n  const handleSelectedTile = (tile: TileType) => {\n    resetSelected();\n    setSelectedTile(tile);\n  };\n\n  const handleSelectedContent = (content: CellContent) => {\n    resetSelected();\n    setSelectedContent(content);\n  };\n\n  const handleSelectedCreature = (creatureType: CreatureType) => {\n    resetSelected();\n    setSelectedCreature(creatureType);\n  };\n\n  const handleSelectedEffect = (effect: Effect) => {\n    resetSelected();\n    setSelectedEffect(effect);\n  };\n\n  const handleCellClick = (position: Position, cellData: CellData) => {\n    const updatedCellData = { ...cellData };\n    if (selectedTile) {\n      updatedCellData.tile = selectedTile;\n    }\n\n    if (selectedContent) {\n      if (updatedCellData.content) {\n        updatedCellData.content = 0;\n      } else {\n        updatedCellData.content = selectedContent;\n      }\n    }\n\n    if (selectedCreature) {\n      if (updatedCellData.creature) {\n        delete updatedCellData.creature;\n      } else {\n        updatedCellData.creature = { id: 'temp_id', type: selectedCreature };\n      }\n    }\n\n    if (selectedEffect) {\n      if (updatedCellData.burningRounds === 0) {\n        updatedCellData.burningRounds = NUMBER_OF_ROUNDS_BURNING;\n      } else {\n        updatedCellData.burningRounds = 0;\n      }\n    }\n\n    props.dispatch(gameActions.updateCell({ position, cellData: updatedCellData }));\n  };\n\n  return (\n    <Wrapper>\n      <Toolbar\n        selectedTile={selectedTile}\n        handleSelectedTile={handleSelectedTile}\n        selectedContent={selectedContent}\n        handleSelectedContent={handleSelectedContent}\n        selectedCreature={selectedCreature}\n        handleSelectedCreature={handleSelectedCreature}\n        selectedEffect={selectedEffect}\n        handleSelectedEffect={handleSelectedEffect}\n        seed={currentSeed}\n        setSeed={setCurrentSeed}\n        load={() => load(currentSeed)}\n      />\n      <Map gameMap={props.state.currentMap} handleCellClick={handleCellClick} />\n    </Wrapper>\n  );\n};\n","import './App.css';\n\nimport { HowlOptions } from 'howler';\nimport React from 'react';\nimport { HashRouter as Router, Route, Switch } from 'react-router-dom';\nimport styled from 'styled-components';\nimport { useImmerReducer } from 'use-immer';\nimport useSound from 'use-sound';\n\nimport crystalCaveSong from './assets/music/crystal-cave-song.mp3';\nimport gameoverSong from './assets/music/no-hope.mp3';\nimport { GAMEOVER_FADEOUT_DURATION, PLAY_MUSIC_AT_START } from './constants/config';\nimport { game } from './game-logic';\nimport { INITIAL_STATE } from './game-logic/game';\nimport { Game } from './game-ui/Game';\nimport { useDetectUserInput } from './game-ui/hooks/useDetectUserInput';\nimport { MapGenerator } from './game-ui/MapGenerator';\n\nconst Wrapper = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: black;\n  height: 100%;\n  width: 100%;\n  font-family: UglyTerminal;\n`;\n\nexport const App: React.FC = () => {\n  const [state, dispatch] = useImmerReducer(game, INITIAL_STATE);\n  const [play, { stop, sound }] = useSound<HowlOptions>(crystalCaveSong, {\n    src: crystalCaveSong,\n    loop: true,\n    volume: 0.1,\n  });\n  const [playGameover] = useSound(gameoverSong, { volume: 0.6 });\n  const didUserInput = useDetectUserInput();\n  const [withBackgroundMusic, setWithBackgroundMusic] = React.useState(PLAY_MUSIC_AT_START);\n\n  React.useEffect(() => {\n    if (didUserInput && withBackgroundMusic) {\n      play();\n    }\n  }, [didUserInput]);\n\n  React.useEffect(() => {\n    if (withBackgroundMusic === false) {\n      stop();\n    } else {\n      play();\n    }\n  }, [withBackgroundMusic]);\n\n  React.useEffect(() => {\n    if (state.gameStatus === 'gameover') {\n      if (sound) {\n        sound.fade(0.1, 0, GAMEOVER_FADEOUT_DURATION);\n      }\n      if (withBackgroundMusic) {\n        const timer = setTimeout(() => {\n          playGameover();\n        }, GAMEOVER_FADEOUT_DURATION);\n        return () => {\n          clearTimeout(timer);\n        };\n      }\n    }\n  }, [state.gameStatus, withBackgroundMusic]);\n\n  return (\n    <Wrapper>\n      <Router>\n        <Switch>\n          <Route exact path=\"/map-editor\">\n            <MapGenerator state={state} dispatch={dispatch} />\n          </Route>\n          <Route exact path=\"/\">\n            <Game\n              state={state}\n              dispatch={dispatch}\n              withBackgroundMusic={withBackgroundMusic}\n              setWithBackgroundMusic={setWithBackgroundMusic}\n            />\n          </Route>\n        </Switch>\n      </Router>\n    </Wrapper>\n  );\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { App } from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}